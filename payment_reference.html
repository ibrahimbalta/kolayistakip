<!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Ödeme Referansı — Kolay İş Takip</title>

  <!-- Tailwind -->
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
      tailwind.config = {
        theme: {
          extend: {
            colors: {
              primary: '#4f46e5',
              cyanAccent: '#06b6d4'
            }
          }
        }
      }
  </script>

  <!-- Icons -->
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" rel="stylesheet">

  <style>
    body{
      background:linear-gradient(140deg,#4b0082 0%,#6a1a8c 100%);
      min-height:100vh;
    }
    .glass{background:rgba(255,255,255,0.08);backdrop-filter:blur(10px);}
    .glow{box-shadow:0 18px 40px rgba(0,0,0,0.3);}
  </style>
</head>
<body class="text-gray-100 font-inter flex flex-col">

<!-- NAV -->
<header class="sticky top-0 bg-black/30 backdrop-blur z-50 border-b border-white/10">
  <div class="max-w-5xl mx-auto px-6 py-4 flex items-center justify-between">
      <a href="index.html" class="flex items-center gap-3 text-white">
        <span class="p-2 rounded-xl glass"><i class="fa-solid fa-check-double text-cyanAccent"></i></span>
        <span class="font-semibold text-lg">Kolay İş Takip</span>
      </a>
      <a href="index.html#pricing" class="px-4 py-2 rounded-xl glass hover:bg-white/10 text-sm transition">
        ← Geri Dön
      </a>
  </div>
</header>

<!-- CONTENT -->
<main class="flex-1 flex justify-center items-center px-4 py-10">
  <div class="glass glow p-8 border border-white/10 rounded-3xl w-full max-w-lg">

      <!-- Title -->
      <div class="text-center mb-6">
        <h1 class="text-2xl font-bold">Ödeme Referansı</h1>
        <p class="text-gray-300 text-sm">Gönderdiğin ödemenin referans bilgisi</p>
      </div>

      <!-- Summary -->
      <div class="glass border border-white/10 rounded-xl px-6 py-4 mb-6 text-center">
        <div class="text-gray-300 text-sm">ÖDENEN TUTAR</div>
        <div id="packagePrice" class="text-3xl font-extrabold mt-1 text-cyanAccent">0 TL</div>
        <div id="packageName" class="mt-1 text-gray-300 text-sm">Paket Yükleniyor...</div>
      </div>

      <!-- Reference -->
      <h3 class="font-semibold text-gray-200 mb-2 flex items-center gap-2">
        <i class="fa-solid fa-hashtag text-cyanAccent"></i> Ödeme Referans Kodu
      </h3>

      <div class="glass border border-white/10 p-4 rounded-xl mb-8 flex justify-between items-center">
        <div id="referenceCode" class="font-mono text-lg font-bold">Yükleniyor...</div>
        <button onclick="copyReference()" class="p-2 glass rounded hover:bg-white/10"><i class="fa-regular fa-copy"></i></button>
      </div>

      <!-- Close Button -->
      <button onclick="goDashboard()"
        class="w-full py-3 bg-gradient-to-r from-cyanAccent to-primary rounded-xl shadow-lg font-semibold hover:scale-[1.02] transition">
        <i class="fa-solid fa-circle-check"></i> Tamam
      </button>

  </div>
</main>


<!-- MODAL -->
<div id="modal" class="fixed inset-0 bg-black/50 backdrop-blur-xl hidden justify-center items-center">
  <div class="glass glow p-6 rounded-2xl text-center w-full max-w-sm">
      <div class="text-3xl mb-3"><i class="fa-solid fa-check text-cyanAccent"></i></div>
      <div id="modalText" class="text-gray-200 text-lg font-semibold">Kopyalandı</div>
      <button onclick="closeModal()" class="mt-4 w-full py-2 bg-gradient-to-r from-cyanAccent to-primary rounded-xl">Tamam</button>
  </div>
</div>


<!-- SUPABASE -->
<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
<script src="supabase-config.js"></script>
<script src="auth.js"></script>

<script>
let currentUser=null;
const url=new URLSearchParams(window.location.search);
const ref=url.get("ref");
const packageType=url.get("package");
const packageAmount=parseFloat(url.get("amount"));

document.addEventListener("DOMContentLoaded", async()=>{
  currentUser=await Auth.getCurrentUser();

  // Paket bilgileri
  document.getElementById("packagePrice").textContent=packageAmount+" TL";
  document.getElementById("packageName").textContent=
    (packageType==="yearly"?"Yıllık Premium":"Aylık Premium");

  // Referans kodu
  document.getElementById("referenceCode").textContent=ref;
});

function copyReference(){
  navigator.clipboard.writeText(ref);
  showModal("Referans kodu kopyalandı");
}

function goDashboard(){
  location.href="dashboard.html";
}

function showModal(t){
  document.getElementById("modalText").textContent=t;
  document.getElementById("modal").classList.remove("hidden");
}

function closeModal(){
  document.getElementById("modal").classList.add("hidden");
}
</script>

</body>
</html>
