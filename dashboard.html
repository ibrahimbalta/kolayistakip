<!DOCTYPE html>
<html lang="tr">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Kolay Ä°ÅŸ Takip - Panel</title>

    <!-- PWA Meta Tags -->
    <meta name="theme-color" content="#6366f1" />
    <meta name="description" content="KOBÄ°'ler iÃ§in iÅŸ takip ve CRM Ã§Ã¶zÃ¼mÃ¼" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
    <meta name="apple-mobile-web-app-title" content="KolayTakip" />
    <link rel="manifest" href="/manifest.json" />
    <link rel="apple-touch-icon" href="/icons/icon-192x192.png" />

    <link rel="stylesheet" href="dashboard.css" />
    <link rel="stylesheet" href="task-list-scroll.css" />
    <link rel="stylesheet" href="dashboard-mobile.css" />
    <link rel="stylesheet" href="subscription-warning.css" />
    <!-- Font Awesome for icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" />
    <!-- Chart.js for advanced charts -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
    <!-- jsPDF for PDF export -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.8.2/jspdf.plugin.autotable.min.js"></script>
    <!-- SheetJS for Excel export -->
    <script src="https://cdn.sheetjs.com/xlsx-0.20.1/package/dist/xlsx.full.min.js"></script>

    <link href='https://cdn.jsdelivr.net/npm/fullcalendar@6.1.10/index.global.min.css' rel='stylesheet' />

</head>

<body>
    <div class="dashboard-layout">
        <!-- Sidebar -->
        <aside class="sidebar">
            <div class="sidebar-header">
                <div class="logo">
                    <i class="fa-solid fa-layer-group"></i>
                    Kolay Ä°ÅŸ Takip
                </div>
            </div>
            <div class="user-profile">
                <div class="user-avatar">
                    <i class="fa-solid fa-user"></i>
                </div>
                <div class="user-info">
                    <div id="userNameDisplay" class="user-name">KullanÄ±cÄ±</div>
                    <div class="user-role">YÃ¶netici</div>
                </div>
            </div>
            <nav class="menu">
                <a href="#" class="menu-item active" onclick="switchView('dashboard')">
                    <i class="fa-solid fa-chart-line"></i> Genel Durum
                </a>
                <a href="#" class="menu-item" onclick="switchView('tasks')">
                    <i class="fa-solid fa-list-check"></i> Ä°ÅŸ Listesi
                </a>
                <a href="#" class="menu-item" onclick="switchView('appointments')">
                    <i class="fa-solid fa-calendar-check"></i> Randevular
                </a>
                <a href="#" class="menu-item" onclick="switchView('proposals')">
                    <i class="fa-solid fa-file-invoice-dollar"></i> Teklifler
                </a>
                <a href="#" class="menu-item" onclick="switchView('reservations')">
                    <i class="fa-solid fa-calendar-days"></i> Rezervasyonlar
                </a>
                <a href="#" class="menu-item" onclick="switchView('customers')">
                    <i class="fa-solid fa-user-group"></i> MÃ¼ÅŸteriler
                </a>
                <a href="#" class="menu-item" onclick="switchView('employees')">
                    <i class="fa-solid fa-users"></i> Ã‡alÄ±ÅŸanlar
                </a>
                <a href="#" class="menu-item" onclick="switchView('reports')">
                    <i class="fa-solid fa-chart-pie"></i> Raporlar
                </a>
                <a href="#" class="menu-item" onclick="switchView('website')">
                    <i class="fa-solid fa-globe"></i> Website
                </a>
                <a href="#" class="menu-item" onclick="switchView('settings')">
                    <i class="fa-solid fa-gear"></i> Ayarlar
                </a>
            </nav>
            <button onclick="Auth.logout()" class="logout-btn">
                <i class="fa-solid fa-right-from-bracket"></i> Ã‡Ä±kÄ±ÅŸ Yap
            </button>
        </aside>

        <!-- Main Content -->
        <main class="main-content">
            <header class="header-bar">
                <div class="page-title">
                    <h1 id="pageTitle">Panel</h1>
                    <p id="pageSubtitle">BugÃ¼nÃ¼n iÅŸlerini organize et.</p>
                </div>
                <div id="trialBadge" class="trial-badge">
                    <i class="fa-regular fa-clock"></i> Deneme SÃ¼rÃ¼mÃ¼
                </div>
            </header>

            <!-- VIEW: DASHBOARD (GENEL DURUM) -->
            <section id="view-dashboard" class="view-section">
                <!-- Statistics Cards -->
                <div class="dashboard-stats-grid"
                    style="display: grid; grid-template-columns: repeat(5, 1fr); gap: 0.75rem; margin-bottom: 2rem;">
                    <!-- Active Tasks Card -->
                    <div class="stat-card-dash"
                        style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; padding: 1rem; border-radius: 10px; box-shadow: 0 4px 6px rgba(0,0,0,0.1);">
                        <div
                            style="display: flex; justify-content: space-between; align-items: start; margin-bottom: 0.25rem;">
                            <div>
                                <div style="font-size: 0.75rem; opacity: 0.9; margin-bottom: 0.25rem;">Aktif Ä°ÅŸ SayÄ±sÄ±
                                </div>
                                <div id="dashActiveTasks" style="font-size: 1.8rem; font-weight: 700;">0</div>
                            </div>
                            <div style="background: rgba(255,255,255,0.2); padding: 8px; border-radius: 8px;">
                                <i class="fa-solid fa-briefcase" style="font-size: 1.2rem;"></i>
                            </div>
                        </div>
                        <div id="dashActiveTasksChange" style="font-size: 0.7rem; opacity: 0.8;">
                            <i class="fa-solid fa-arrow-up"></i> %15 ArtÄ±ÅŸ (GeÃ§en Hafta)
                        </div>
                    </div>

                    <!-- Pending Proposals Value Card -->
                    <div class="stat-card-dash"
                        style="background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%); color: white; padding: 1rem; border-radius: 10px; box-shadow: 0 4px 6px rgba(0,0,0,0.1);">
                        <div
                            style="display: flex; justify-content: space-between; align-items: start; margin-bottom: 0.25rem;">
                            <div>
                                <div style="font-size: 0.75rem; opacity: 0.9; margin-bottom: 0.25rem;">Bekleyen Teklif
                                    DeÄŸeri</div>
                                <div id="dashPendingValue" style="font-size: 1.8rem; font-weight: 700;">â‚º0</div>
                            </div>
                            <div style="background: rgba(255,255,255,0.2); padding: 8px; border-radius: 8px;">
                                <i class="fa-solid fa-file-invoice-dollar" style="font-size: 1.2rem;"></i>
                            </div>
                        </div>
                        <div id="dashPendingCount" style="font-size: 0.7rem; opacity: 0.8;">
                            0 Adet Bekleyen Teklif
                        </div>
                    </div>

                    <!-- New Customers (Last 30 Days) Card -->
                    <div class="stat-card-dash"
                        style="background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%); color: white; padding: 1rem; border-radius: 10px; box-shadow: 0 4px 6px rgba(0,0,0,0.1);">
                        <div
                            style="display: flex; justify-content: space-between; align-items: start; margin-bottom: 0.25rem;">
                            <div>
                                <div style="font-size: 0.75rem; opacity: 0.9; margin-bottom: 0.25rem;">Yeni MÃ¼ÅŸteri (Son
                                    30 GÃ¼n)</div>
                                <div id="dashNewCustomers" style="font-size: 1.8rem; font-weight: 700;">0</div>
                            </div>
                            <div style="background: rgba(255,255,255,0.2); padding: 8px; border-radius: 8px;">
                                <i class="fa-solid fa-user-plus" style="font-size: 1.2rem;"></i>
                            </div>
                        </div>
                        <div id="dashTotalCustomers" style="font-size: 0.7rem; opacity: 0.8;">
                            Toplam: 0 MÃ¼ÅŸteri
                        </div>
                    </div>

                    <!-- Today's Appointments Card -->
                    <div class="stat-card-dash"
                        style="background: linear-gradient(135deg, #43e97b 0%, #38f9d7 100%); color: white; padding: 1rem; border-radius: 10px; box-shadow: 0 4px 6px rgba(0,0,0,0.1);">
                        <div
                            style="display: flex; justify-content: space-between; align-items: start; margin-bottom: 0.25rem;">
                            <div>
                                <div style="font-size: 0.75rem; opacity: 0.9; margin-bottom: 0.25rem;">BugÃ¼nkÃ¼ Randevu
                                    SayÄ±sÄ±</div>
                                <div id="dashTodayAppointments" style="font-size: 1.8rem; font-weight: 700;">0</div>
                            </div>
                            <div style="background: rgba(255,255,255,0.2); padding: 8px; border-radius: 8px;">
                                <i class="fa-solid fa-calendar-check" style="font-size: 1.2rem;"></i>
                            </div>
                        </div>
                        <div style="font-size: 0.7rem; opacity: 0.8;">
                            MÃ¼sait ve Rezerve
                        </div>
                    </div>

                    <!-- Today's Reservations Card -->
                    <div class="stat-card-dash"
                        style="background: linear-gradient(135deg, #fa709a 0%, #fee140 100%); color: white; padding: 1rem; border-radius: 10px; box-shadow: 0 4px 6px rgba(0,0,0,0.1);">
                        <div
                            style="display: flex; justify-content: space-between; align-items: start; margin-bottom: 0.25rem;">
                            <div>
                                <div style="font-size: 0.75rem; opacity: 0.9; margin-bottom: 0.25rem;">BugÃ¼nkÃ¼
                                    Rezervasyon</div>
                                <div id="dashTodayReservationCount" style="font-size: 1.8rem; font-weight: 700;">0</div>
                            </div>
                            <div style="background: rgba(255,255,255,0.2); padding: 8px; border-radius: 8px;">
                                <i class="fa-solid fa-calendar-days" style="font-size: 1.2rem;"></i>
                            </div>
                        </div>
                        <div style="font-size: 0.7rem; opacity: 0.8;">
                            Rezerve Alanlar
                        </div>
                    </div>
                </div>

                <!-- Charts and Tables Grid -->
                <div
                    style="display: grid; grid-template-columns: repeat(auto-fit, minmax(450px, 1fr)); gap: 1.5rem; margin-bottom: 1.5rem;">
                    <!-- Recent Activity / Priority Tasks -->
                    <div class="card">
                        <h2 style="margin-bottom: 1rem;"><i class="fa-solid fa-exclamation-circle"
                                style="color: var(--warning);"></i> Ã–ncelikli Ä°ÅŸler</h2>
                        <div id="dashPriorityTasks" style="max-height: 400px; overflow-y: auto;">
                            <div style="text-align: center; padding: 2rem; color: var(--secondary);">
                                <i class="fa-solid fa-tasks"
                                    style="font-size: 2rem; opacity: 0.3; margin-bottom: 0.5rem;"></i>
                                <p>HenÃ¼z Ã¶ncelikli iÅŸ yok.</p>
                            </div>
                        </div>
                    </div>

                    <!-- Today's Schedule -->
                    <div class="card">
                        <h2 style="margin-bottom: 1rem;"><i class="fa-solid fa-calendar-day"
                                style="color: var(--primary);"></i> BugÃ¼nkÃ¼ Ajanda</h2>
                        <div id="dashTodaySchedule" style="max-height: 400px; overflow-y: auto;">
                            <div style="text-align: center; padding: 2rem; color: var(--secondary);">
                                <i class="fa-solid fa-calendar-xmark"
                                    style="font-size: 2rem; opacity: 0.3; margin-bottom: 0.5rem;"></i>
                                <p>BugÃ¼n iÃ§in randevu/rezervasyon yok.</p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Quick Actions -->
                <div class="card">
                    <h2 style="margin-bottom: 1rem;"><i class="fa-solid fa-bolt" style="color: var(--warning);"></i>
                        HÄ±zlÄ± Ä°ÅŸlemler</h2>
                    <div style="display: grid; grid-template-columns: repeat(5, 1fr); gap: 0.5rem;">
                        <button onclick="switchView('tasks')" class="btn"
                            style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; padding: 0.75rem 0.5rem; justify-content: center; gap: 0.3rem; font-size: 0.85rem;">
                            <i class="fa-solid fa-plus"></i> Yeni Ä°ÅŸ Ekle
                        </button>
                        <button onclick="switchView('appointments')" class="btn"
                            style="background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%); color: white; padding: 0.75rem 0.5rem; justify-content: center; gap: 0.3rem; font-size: 0.85rem;">
                            <i class="fa-solid fa-calendar-plus"></i> Randevu OluÅŸtur
                        </button>
                        <button onclick="switchView('proposals')" class="btn"
                            style="background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%); color: white; padding: 0.75rem 0.5rem; justify-content: center; gap: 0.3rem; font-size: 0.85rem;">
                            <i class="fa-solid fa-file-invoice"></i> Teklif HazÄ±rla
                        </button>
                        <button onclick="switchView('customers')" class="btn"
                            style="background: linear-gradient(135deg, #43e97b 0%, #38f9d7 100%); color: white; padding: 0.75rem 0.5rem; justify-content: center; gap: 0.3rem; font-size: 0.85rem;">
                            <i class="fa-solid fa-user-plus"></i> MÃ¼ÅŸteri Ekle
                        </button>
                        <button onclick="switchView('reservations')" class="btn"
                            style="background: linear-gradient(135deg, #fa709a 0%, #fee140 100%); color: white; padding: 0.75rem 0.5rem; justify-content: center; gap: 0.3rem; font-size: 0.85rem;">
                            <i class="fa-solid fa-calendar-days"></i> Rezervasyon Ekle
                        </button>
                    </div>
                </div>
            </section>

            <!-- VIEW: TASKS -->
            <section id="view-tasks" class="view-section" style="display:none;">
                <div class="task-stats">
                    <div class="stat-card">
                        <div class="stat-number" id="totalTasks">0</div>
                        <div class="stat-label">Toplam Ä°ÅŸ</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number" id="pendingTasks" style="color:var(--warning);">0</div>
                        <div class="stat-label">Bekleyen</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number" id="completedTasks" style="color:var(--success);">0</div>
                        <div class="stat-label">Tamamlanan</div>
                    </div>
                </div>
                <div class="content-grid">
                    <!-- Add Task Form -->
                    <div class="card">
                        <h2><i class="fa-solid fa-plus-circle" style="color: var(--primary);"></i> Yeni Ä°ÅŸ Ekle</h2>
                        <form id="taskForm">
                            <div class="form-group">
                                <label for="taskDesc">YapÄ±lacak Ä°ÅŸ</label>
                                <textarea id="taskDesc" placeholder="Ã–rn: MÃ¼ÅŸteri X'in sipariÅŸini hazÄ±rla..." required
                                    style="min-height:100px; resize:vertical;"></textarea>
                            </div>
                            <div class="form-group">
                                <label for="customerSelect">MÃ¼ÅŸteri SeÃ§ (Opsiyonel)</label>
                                <select id="customerSelect">
                                    <option value="">MÃ¼ÅŸteri SeÃ§in...</option>
                                </select>
                                <div style="margin-top:8px; font-size:0.85rem; color:var(--secondary);">
                                    Listede yok mu? <a href="#" onclick="switchView('customers')"
                                        style="color:var(--primary); font-weight:600;">Yeni MÃ¼ÅŸteri Ekle</a>
                                </div>
                            </div>
                            <div class="form-group">
                                <label for="departmentFilter">Departman SeÃ§</label>
                                <select id="departmentFilter">
                                    <option value="">TÃ¼m Departmanlar</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="employeeSelect">Ã‡alÄ±ÅŸan SeÃ§</label>
                                <select id="employeeSelect" required>
                                    <option value="">Ã‡alÄ±ÅŸan SeÃ§in...</option>
                                </select>
                                <div style="margin-top:8px; font-size:0.85rem; color:var(--secondary);">
                                    Listede yok mu? <a href="#" onclick="switchView('employees')"
                                        style="color:var(--primary); font-weight:600;">Yeni Ã‡alÄ±ÅŸan Ekle</a>
                                </div>
                            </div>
                            <div class="form-group">
                                <label for="taskDeadline">Termin Tarihi (Opsiyonel)</label>
                                <input type="date" id="taskDeadline" placeholder="gg.aa.yyyy" />
                            </div>
                            <button type="submit" class="btn btn-primary" style="width:100%; margin-top:1rem;">
                                <i class="fa-solid fa-paper-plane"></i> Ä°ÅŸi Ata ve GÃ¶nder
                            </button>
                        </form>
                    </div>
                    <!-- Task List -->
                    <div class="card">
                        <div
                            style="display:flex; justify-content:space-between; align-items:center; margin-bottom:1.5rem;">
                            <h2><i class="fa-solid fa-list-ul" style="color: var(--primary);"></i> GÃ¶revler</h2>
                            <div class="filter-buttons">
                                <button class="filter-btn active" data-filter="all">TÃ¼mÃ¼</button>
                                <button class="filter-btn" data-filter="pending">Bekleyen</button>
                                <button class="filter-btn" data-filter="completed">Tamamlanan</button>
                            </div>
                        </div>
                        <!-- Task Search Bar -->
                        <div style="margin-bottom: 1.5rem;">
                            <div style="position: relative;">
                                <i class="fa-solid fa-search"
                                    style="position: absolute; left: 12px; top: 50%; transform: translateY(-50%); color: var(--secondary); font-size: 0.9rem;"></i>
                                <input type="text" id="taskSearchInput"
                                    placeholder="GÃ¶rev ara (aÃ§Ä±klama, Ã§alÄ±ÅŸan adÄ±, mÃ¼ÅŸteri...)..."
                                    oninput="filterTasks()"
                                    style="width: 100%; padding: 10px 10px 10px 38px; border: 1px solid var(--border-color); border-radius: 8px; font-size: 0.95rem;" />
                            </div>
                        </div>
                        <div id="taskList" class="task-list">
                            <div class="empty-state" style="text-align:center; padding:3rem 0; color:var(--secondary);">
                                <i class="fa-solid fa-clipboard-list"
                                    style="font-size:3rem; margin-bottom:1rem; opacity:0.3;"></i>
                                <p>HenÃ¼z kayÄ±tlÄ± iÅŸ yok.</p>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
            <!-- VIEW: APPOINTMENTS -->
            <section id="view-appointments" class="view-section" style="display:none;">
                <!-- Stats -->
                <div class="task-stats">
                    <div class="stat-card">
                        <div class="stat-number" id="totalSlots">0</div>
                        <div class="stat-label">Toplam Slot</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number" id="availableSlots" style="color:var(--success);">0</div>
                        <div class="stat-label">MÃ¼sait</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number" id="reservedSlots" style="color:var(--primary);">0</div>
                        <div class="stat-label">OnaylÄ±</div>
                    </div>
                    <div class="stat-card"
                        style="background: linear-gradient(135deg, #eab308 0%, #f59e0b 100%); color: white;">
                        <div class="stat-number" id="pendingApprovals" style="color: white;">0</div>
                        <div class="stat-label" style="color: rgba(255,255,255,0.9);">Bekleyen Onay</div>
                    </div>
                    <div class="stat-card"
                        style="background: linear-gradient(135deg, #f59e0b 0%, #f97316 100%); color: white;">
                        <div class="stat-number" id="pendingReminders" style="color: white;">0</div>
                        <div class="stat-label" style="color: rgba(255,255,255,0.9);">HatÄ±rlatÄ±lacak</div>
                    </div>
                </div>


                <!-- Bekleyen Onaylar Panel -->
                <div class="card" id="pendingApprovalsPanel"
                    style="margin-bottom: 1.5rem; border-left: 4px solid #eab308;">
                    <div
                        style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1rem;">
                        <h2 style="margin: 0;">
                            <i class="fa-solid fa-clock-rotate-left" style="color: #eab308;"></i>
                            Bekleyen Randevu OnaylarÄ±
                        </h2>
                    </div>
                    <div id="pendingApprovalsList" style="max-height: 350px; overflow-y: auto;">
                        <div style="text-align: center; padding: 2rem; color: var(--secondary);">
                            <i class="fa-solid fa-hourglass-half"
                                style="font-size: 2rem; opacity: 0.3; margin-bottom: 0.5rem;"></i>
                            <p>Bekleyen randevu onayÄ± yok.</p>
                        </div>
                    </div>
                </div>

                <!-- WhatsApp Reminder Panel -->
                <div class="card" id="reminderPanel" style="margin-bottom: 1.5rem; border-left: 4px solid #25D366;">
                    <div
                        style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1rem;">
                        <h2 style="margin: 0;">
                            <i class="fa-solid fa-bell" style="color: #f59e0b;"></i>
                            YarÄ±nki Randevular - HatÄ±rlatma
                        </h2>
                        <button onclick="sendAllReminders()" class="btn" style="background: #25D366; color: white;">
                            <i class="fa-brands fa-whatsapp"></i> TÃ¼mÃ¼ne GÃ¶nder
                        </button>
                    </div>
                    <div id="reminderList" style="max-height: 300px; overflow-y: auto;">
                        <div style="text-align: center; padding: 2rem; color: var(--secondary);">
                            <i class="fa-solid fa-calendar-check"
                                style="font-size: 2rem; opacity: 0.3; margin-bottom: 0.5rem;"></i>
                            <p>YarÄ±n iÃ§in randevu yok veya yÃ¼kleniyor...</p>
                        </div>
                    </div>
                </div>
                <div class="content-grid">
                    <!-- Calendar -->
                    <div class="card" style="grid-column: 1 / -1;">
                        <div
                            style="display:flex; justify-content:space-between; align-items:center; margin-bottom:1.5rem;">
                            <h2><i class="fa-solid fa-calendar-days" style="color: var(--primary);"></i> Randevu Takvimi
                            </h2>
                            <div style="display: flex; gap: 10px;">
                                <button onclick="shareViaWhatsApp()" class="btn btn-primary">
                                    <i class="fa-brands fa-whatsapp"></i> WhatsApp ile PaylaÅŸ
                                </button>
                            </div>
                        </div>

                        <!-- Share Link -->
                        <div style="margin-bottom: 20px; display: flex; gap: 10px;">
                            <input type="text" id="shareLink" readonly
                                style="flex: 1; padding: 10px; border: 1px solid var(--border-color); border-radius: 8px; background: #f9fafb;"
                                placeholder="Takvim yÃ¼kleniyor...">
                            <button onclick="copyShareLink()" class="btn"
                                style="background: var(--primary); color: white;">
                                <i class="fa-solid fa-copy"></i> Kopyala
                            </button>
                        </div>
                        <!-- Calendar Container -->
                        <div id="appointmentCalendar"></div>

                        <div style="margin-top: 20px; padding: 15px; background: #f9fafb; border-radius: 8px;">
                            <p style="margin: 0 0 10px 0; color: var(--secondary); font-size: 0.9rem;">
                                <i class="fa-solid fa-info-circle"></i>
                                <strong>KullanÄ±m:</strong> Takvimde bir zaman dilimi seÃ§erek mÃ¼sait saat ekleyin.
                                Randevulara tÄ±klayarak detaylarÄ± gÃ¶rebilirsiniz.
                            </p>
                            <div style="display: flex; flex-wrap: wrap; gap: 15px; font-size: 0.85rem;">
                                <span><span
                                        style="display:inline-block; width:12px; height:12px; background:#10b981; border-radius:3px; margin-right:5px;"></span>
                                    MÃ¼sait</span>
                                <span><span
                                        style="display:inline-block; width:12px; height:12px; background:#f59e0b; border-radius:3px; margin-right:5px;"></span>
                                    Onay Bekliyor</span>
                                <span><span
                                        style="display:inline-block; width:12px; height:12px; background:#667eea; border-radius:3px; margin-right:5px;"></span>
                                    OnaylandÄ±</span>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- VIEW: PROPOSALS -->
            <section id="view-proposals" class="view-section" style="display:none;">
                <div class="task-stats">
                    <div class="stat-card">
                        <div class="stat-number" id="totalProposals">0</div>
                        <div class="stat-label">Toplam Teklif</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number" id="approvedProposals" style="color:var(--success);">0</div>
                        <div class="stat-label">Onaylanan</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number" id="pendingProposals" style="color:var(--warning);">0</div>
                        <div class="stat-label">Bekleyen</div>
                    </div>
                </div>
                <div class="content-grid">
                    <div class="card">
                        <div
                            style="display:flex; justify-content:space-between; align-items:center; margin-bottom:2rem;">
                            <h2><i class="fa-solid fa-file-invoice-dollar" style="color: var(--primary);"></i> Teklifler
                            </h2>
                            <button onclick="openProposalModal()" class="btn btn-primary">
                                <i class="fa-solid fa-plus"></i> Yeni Teklif
                            </button>
                        </div>
                        <div class="table-responsive">
                            <table class="data-table">
                                <thead>
                                    <tr>
                                        <th>MÃ¼ÅŸteri</th>
                                        <th>BaÅŸlÄ±k</th>
                                        <th>Tutar</th>
                                        <th>Durum</th>
                                        <th>Tarih</th>
                                        <th>Ä°ÅŸlemler</th>
                                    </tr>
                                </thead>
                                <tbody id="proposalListBody">
                                    <tr>
                                        <td colspan="6" style="text-align:center; color:var(--secondary);">HenÃ¼z teklif
                                            yok.</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </section>

            <!-- VIEW: CUSTOMERS -->
            <section id="view-customers" class="view-section" style="display:none;">
                <div class="card">
                    <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:2rem;">
                        <h2><i class="fa-solid fa-user-group" style="color: var(--primary);"></i> MÃ¼ÅŸteri Listesi</h2>
                        <div style="display: flex; gap: 0.75rem;">
                            <button onclick="exportCustomersToExcel()" class="btn"
                                style="background: #10b981; color: white;">
                                <i class="fa-solid fa-file-excel"></i> Excel Ä°ndir
                            </button>
                            <button onclick="exportCustomersToPDF()" class="btn"
                                style="background: #ef4444; color: white;">
                                <i class="fa-solid fa-file-pdf"></i> PDF Ä°ndir
                            </button>
                            <button onclick="showAddCustomerModal()" class="btn btn-primary">
                                <i class="fa-solid fa-plus"></i> Yeni MÃ¼ÅŸteri
                            </button>
                        </div>
                    </div>
                    <!-- Customer Search Bar -->
                    <div style="margin-bottom: 1.5rem;">
                        <div style="position: relative;">
                            <i class="fa-solid fa-search"
                                style="position: absolute; left: 12px; top: 50%; transform: translateY(-50%); color: var(--secondary); font-size: 0.9rem;"></i>
                            <input type="text" id="customerSearchInput"
                                placeholder="MÃ¼ÅŸteri ara (isim, email, telefon, sektÃ¶r...)" oninput="filterCustomers()"
                                style="width: 100%; padding: 10px 10px 10px 38px; border: 1px solid var(--border-color); border-radius: 8px; font-size: 0.95rem;" />
                        </div>
                    </div>
                    <div id="customerCardsGrid"
                        style="display: grid; grid-template-columns: repeat(auto-fill, minmax(240px, 1fr)); gap: 1rem;">
                        <!-- Customer cards will be rendered here -->
                        <div style="grid-column: 1 / -1; text-align:center; padding:3rem 0; color:var(--secondary);">
                            <i class="fa-solid fa-user-group"
                                style="font-size:3rem; margin-bottom:1rem; opacity:0.3;"></i>
                            <p>HenÃ¼z mÃ¼ÅŸteri eklenmemiÅŸ.</p>
                        </div>
                    </div>
                </div>
            </section>

            <!-- VIEW: EMPLOYEES -->
            <section id="view-employees" class="view-section" style="display:none;">
                <div class="card">
                    <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:2rem;">
                        <h2><i class="fa-solid fa-users" style="color: var(--primary);"></i> Ã‡alÄ±ÅŸan Listesi</h2>
                        <button onclick="showAddEmployeeModal()" class="btn btn-primary">
                            <i class="fa-solid fa-plus"></i> Yeni Ã‡alÄ±ÅŸan
                        </button>
                    </div>
                    <div class="table-responsive">
                        <table class="data-table">
                            <thead>
                                <tr>
                                    <th>Ad Soyad</th>
                                    <th>Telefon</th>
                                    <th>Aktif GÃ¶revler</th>
                                    <th>Departman</th>
                                    <th>Ä°ÅŸlem</th>
                                </tr>
                            </thead>
                            <tbody id="employeeListBody">
                                <tr>
                                    <td colspan="5" style="text-align:center; color:var(--secondary);">HenÃ¼z Ã§alÄ±ÅŸan
                                        eklenmemiÅŸ.</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </section>

            <!-- VIEW: RESERVATIONS -->
            <section id="view-reservations" class="view-section" style="display:none;">
                <!-- Compact Horizontal Form -->
                <div class="card" style="margin-bottom: 1.5rem;">
                    <h2 style="margin-bottom: 1.25rem;"><i class="fa-solid fa-plus-circle"
                            style="color: var(--primary);"></i> Yeni Alan TanÄ±mlama</h2>
                    <form id="reservationForm">
                        <input type="hidden" id="editReservationId">

                        <!-- First Row: Main Fields -->
                        <div
                            style="display: grid; grid-template-columns: 150px 180px 200px 150px 1fr auto; gap: 12px; align-items: end; margin-bottom: 12px;">
                            <div class="form-group" style="margin-bottom: 0;">
                                <label for="alanNo" style="font-size: 0.75rem; margin-bottom: 4px;">Alan
                                    Kodu/NumarasÄ±</label>
                                <input type="text" id="alanNo" required placeholder="Ã–rn: F301"
                                    style="padding: 10px 12px;">
                            </div>

                            <div class="form-group" style="margin-bottom: 0;">
                                <label for="alanTipi" style="font-size: 0.75rem; margin-bottom: 4px;">Alan Tipi</label>
                                <select id="alanTipi" required style="padding: 10px 12px;">
                                    <option value="stand">Fuar StandÄ±</option>
                                    <option value="toplanti">ToplantÄ± OdasÄ±</option>
                                    <option value="masa">Coworking MasasÄ±</option>
                                    <option value="kort">Spor Kortu/Saha</option>
                                    <option value="loca">Stadyum LocasÄ±</option>
                                </select>
                            </div>

                            <div class="form-group" style="margin-bottom: 0;">
                                <label for="alanBuyukluk" style="font-size: 0.75rem; margin-bottom: 4px;">BÃ¼yÃ¼klÃ¼k /
                                    Kapasite</label>
                                <input type="text" id="alanBuyukluk" required placeholder="Ã–rn: 24 mÂ² veya 20 kiÅŸilik"
                                    style="padding: 10px 12px;">
                            </div>

                            <div class="form-group" style="margin-bottom: 0;">
                                <label for="fiyatMiktar" style="font-size: 0.75rem; margin-bottom: 4px;">Fiyat
                                    (â‚º)</label>
                                <div style="display: flex; align-items: center; gap: 0;">
                                    <span
                                        style="background: #f1f5f9; padding: 10px 12px; border: 1px solid var(--border); border-right: none; border-radius: 8px 0 0 8px; color: var(--primary); font-weight: 600;">â‚º</span>
                                    <input type="number" id="fiyatMiktar" min="0" step="0.01" required
                                        placeholder="0.00"
                                        style="padding: 10px 12px; border-radius: 0 8px 8px 0; flex: 1;">
                                </div>
                                <input type="hidden" id="paraBirimi" value="TRY">
                                <input type="hidden" id="fiyatTipi" value="tek_fiyat">
                            </div>

                            <div class="form-group" style="margin-bottom: 0;">
                                <label for="alanDurum" style="font-size: 0.75rem; margin-bottom: 4px;">Durum</label>
                                <select id="alanDurum" required style="padding: 10px 12px;">
                                    <option value="bos">MÃ¼sait</option>
                                    <option value="opsiyonda">Opsiyonda</option>
                                    <option value="rezerve">Dolu</option>
                                </select>
                            </div>

                            <button type="submit" class="btn btn-primary" id="reservationSubmitBtn"
                                style="padding: 10px 24px; white-space: nowrap;">
                                <i class="fa-solid fa-plus"></i> TanÄ±mla
                            </button>
                        </div>

                        <!-- Second Row: Description + Action Buttons -->
                        <div style="display: flex; gap: 12px; align-items: end;">
                            <div class="form-group" style="margin-bottom: 0; flex: 1;">
                                <label for="alanAciklama" style="font-size: 0.75rem; margin-bottom: 4px;">AÃ§Ä±klama
                                    (Opsiyonel)</label>
                                <input type="text" id="alanAciklama" placeholder="Alan hakkÄ±nda ek bilgiler, notlar..."
                                    style="padding: 10px 12px;">
                            </div>

                            <div style="display: flex; gap: 8px;">
                                <button type="button" class="btn"
                                    style="background: #8b5cf6; color: white; padding: 10px 14px;"
                                    onclick="openBulkCreateModal()" title="Toplu Alan OluÅŸtur">
                                    <i class="fa-solid fa-layer-group"></i> Toplu
                                </button>
                                <button type="button" class="btn"
                                    style="background: #f1f5f9; color: #64748b; padding: 10px 14px;"
                                    onclick="document.getElementById('krokiFileInput').click()" title="GÃ¶rsel YÃ¼kle">
                                    <i class="fa-solid fa-image"></i>
                                </button>
                                <input type="file" id="krokiFileInput" accept="image/*" style="display: none;"
                                    onchange="uploadKrokiImage(this)">
                                <button type="button" class="btn"
                                    style="background: #f1f5f9; color: #64748b; padding: 10px 14px;"
                                    onclick="shareReservations()" title="WhatsApp PaylaÅŸ">
                                    <i class="fa-solid fa-share-nodes"></i>
                                </button>
                            </div>
                        </div>

                        <!-- Hidden Reservation Info Section (for editing reserved areas) -->
                        <div id="reservationInfoSection"
                            style="display: none; border-top: 2px solid var(--border); padding-top: 1.5rem; margin-top: 1.5rem;">
                            <h3 style="color: var(--primary); margin-bottom: 1rem; font-size: 1rem;">
                                <i class="fa-solid fa-building"></i> Rezervasyon Bilgileri
                            </h3>
                            <div
                                style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 12px;">
                                <div class="form-group" style="margin-bottom: 0;">
                                    <label for="reservedCompany" style="font-size: 0.75rem;">Firma ÃœnvanÄ±</label>
                                    <input type="text" id="reservedCompany" placeholder="Ã–rn: ABC Tekstil Ltd. Åžti."
                                        style="padding: 8px 12px;">
                                </div>
                                <div class="form-group" style="margin-bottom: 0;">
                                    <label for="reservedName" style="font-size: 0.75rem;">Yetkili Ad Soyad</label>
                                    <input type="text" id="reservedName" placeholder="Ã–rn: Ahmet YÄ±lmaz"
                                        style="padding: 8px 12px;">
                                </div>
                                <div class="form-group" style="margin-bottom: 0;">
                                    <label for="reservedPhone" style="font-size: 0.75rem;">Telefon</label>
                                    <input type="tel" id="reservedPhone" placeholder="(5XX) XXX XX XX"
                                        style="padding: 8px 12px;">
                                </div>
                                <div class="form-group" style="margin-bottom: 0;">
                                    <label for="reservedEmail" style="font-size: 0.75rem;">E-posta</label>
                                    <input type="email" id="reservedEmail" placeholder="ornek@firma.com"
                                        style="padding: 8px 12px;">
                                </div>
                            </div>
                            <div class="form-group" style="margin-top: 12px; margin-bottom: 0;">
                                <label for="reservedNotes" style="font-size: 0.75rem;">Ã–zel Ä°stekler / Notlar</label>
                                <textarea id="reservedNotes" rows="2" placeholder="Varsa Ã¶zel istekler veya notlar..."
                                    style="padding: 8px 12px;"></textarea>
                            </div>
                        </div>
                    </form>
                </div>

                <!-- Reservation Cards Section -->
                <div>
                    <h2 style="margin-bottom: 1rem; font-weight: 600; color: var(--dark);"><i
                            class="fa-solid fa-th-large" style="color: var(--primary); margin-right: 8px;"></i>TanÄ±mlÄ±
                        Alanlar</h2>
                    <div id="reservationCardsGrid"
                        style="display: grid; grid-template-columns: repeat(auto-fill, minmax(280px, 1fr)); gap: 16px;">
                        <div
                            style="grid-column: 1/-1; text-align: center; padding: 60px 40px; color: var(--secondary); background: #f8fafc; border-radius: 12px; border: 2px dashed #e2e8f0;">
                            <i class="fa-solid fa-inbox"
                                style="font-size: 3rem; opacity: 0.3; margin-bottom: 1rem;"></i>
                            <p style="margin: 0;">HenÃ¼z alan eklenmemiÅŸ.</p>
                        </div>
                    </div>
                </div>
            </section>

            <!-- VIEW: REPORTS -->
            <section id="view-reports" class="view-section" style="display:none;">
                <!-- Export Toolbar -->
                <div class="export-toolbar">
                    <button onclick="exportToExcel()" class="btn btn-export">
                        <i class="fa-solid fa-file-excel"></i> Excel Ä°ndir
                    </button>
                    <button onclick="exportToPDF()" class="btn btn-export">
                        <i class="fa-solid fa-file-pdf"></i> PDF Ä°ndir
                    </button>
                </div>

                <!-- Performance Cards -->
                <div class="performance-cards-grid" id="performanceCards">
                    <!-- Will be populated by JavaScript -->
                </div>

                <!-- Charts Grid -->
                <div class="charts-grid">
                    <!-- Completion Rate Chart -->
                    <div class="card">
                        <h2><i class="fa-solid fa-chart-pie" style="color: var(--primary);"></i> Tamamlanma OranÄ±</h2>
                        <div class="chart-wrapper">
                            <canvas id="completionChart"></canvas>
                        </div>
                        <div id="completionStats" class="chart-stats"></div>
                    </div>

                    <!-- Productivity Trend Chart -->
                    <div class="card">
                        <h2><i class="fa-solid fa-chart-line" style="color: var(--success);"></i> Verimlilik Trendi (Son
                            7 GÃ¼n)</h2>
                        <div class="chart-wrapper">
                            <canvas id="productivityChart"></canvas>
                        </div>
                    </div>
                </div>

                <!-- Employee Performance Table -->
                <div class="card">
                    <h2 style="display: flex; align-items: center; gap: 10px;">
                        <i class="fa-solid fa-ranking-star" style="color: var(--warning);"></i>
                        Ã‡alÄ±ÅŸan Performans DetaylarÄ±
                        <i class="fa-solid fa-circle-info"
                            style="cursor: help; font-size: 0.9rem; color: var(--primary);" title="Performans Skoru Hesaplama:
â€¢ Tamamlanan GÃ¶rev Ã— 10 puan
â€¢ Tamamlanma OranÄ± Ã— 0.5 puan  
â€¢ 5+ gÃ¶rev varsa +10 bonus
Seviyeler:
80-100: MÃ¼kemmel â­
60-79: Ä°yi ðŸ‘
40-59: Orta ðŸ“Š
0-39: GeliÅŸmeli ðŸ“ˆ"></i>
                    </h2>
                    <div class="table-responsive">
                        <table class="data-table analytics-table" id="performanceTable">
                            <thead>
                                <tr>
                                    <th>Ã‡alÄ±ÅŸan</th>
                                    <th>Toplam GÃ¶rev</th>
                                    <th>Tamamlanan</th>
                                    <th>Bekleyen</th>
                                    <th>Tamamlanma OranÄ±</th>
                                    <th>Performans Skoru</th>
                                </tr>
                            </thead>
                            <tbody id="performanceTableBody">
                                <tr>
                                    <td colspan="6" style="text-align:center; color:var(--secondary);">HenÃ¼z veri yok.
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </section>

            <!-- VIEW: SETTINGS -->
            <section id="view-settings" class="view-section" style="display:none;">
                <div class="card" style="max-width:600px; margin:0 auto;">
                    <h2><i class="fa-solid fa-gear" style="color: var(--secondary);"></i> Ayarlar</h2>
                    <form id="settingsForm">
                        <div class="form-group">
                            <label>Firma AdÄ±</label>
                            <input type="text" id="settingCompanyName" />
                        </div>
                        <div class="form-group">
                            <label>KullanÄ±cÄ± AdÄ±</label>
                            <input type="text" id="settingEmail" disabled style="background:#f1f5f9;" />
                        </div>
                        <div class="form-group">
                            <label>Yeni Åžifre (DeÄŸiÅŸtirmek iÃ§in doldurun)</label>
                            <input type="password" id="settingNewPassword" placeholder="Yeni ÅŸifrenizi girin" />
                        </div>
                        <div class="form-group">
                            <label>Yeni Åžifre Tekrar</label>
                            <input type="password" id="settingConfirmPassword"
                                placeholder="Yeni ÅŸifrenizi tekrar girin" />
                        </div>
                        <button type="submit" class="btn btn-primary">Kaydet</button>

                    </form>
                    </form>
                    <!-- Department Management Section -->
                    <hr style="margin:2rem 0; border:0; border-top:1px solid var(--border);" />
                    <div style="margin-bottom: 2rem;">
                        <h3 style="margin-bottom: 1rem; display: flex; align-items: center; gap: 10px;">
                            <i class="fa-solid fa-building" style="color: var(--primary);"></i>
                            Departman YÃ¶netimi
                        </h3>
                        <div style="display: flex; gap: 10px; margin-bottom: 1rem;">
                            <input type="text" id="newDepartmentName" placeholder="Departman adÄ±"
                                style="flex: 1; padding: 10px; border: 1px solid var(--border); border-radius: 8px;" />
                            <button onclick="addDepartment()" class="btn btn-primary">
                                <i class="fa-solid fa-plus"></i> Ekle
                            </button>
                        </div>
                        <div id="departmentList" style="display: flex; flex-direction: column; gap: 8px;">
                            <!-- Departments will be loaded here -->
                        </div>
                    </div>

                    <hr style="margin:2rem 0; border:0; border-top:1px solid var(--border);" />
                    <div style="background:#fef2f2; padding:1.5rem; border-radius:12px; border:1px solid #fecaca;">
                        <h3 style="color:#991b1b; font-size:1.1rem; margin-bottom:0.5rem;">Tehlikeli BÃ¶lge</h3>
                        <p style="color:#b91c1c; font-size:0.9rem; margin-bottom:1rem;">TÃ¼m verilerinizi (gÃ¶revler,
                            Ã§alÄ±ÅŸanlar) kalÄ±cÄ± olarak siler.</p>
                        <button onclick="clearAllData()" class="btn btn-delete" style="width:auto;">Verileri
                            SÄ±fÄ±rla</button>
                    </div>
                </div>
            </section>

            <!-- VIEW: WEBSITE MANAGEMENT -->
            <section id="view-website" class="view-section" style="display:none;">
                <!-- Copy Link Button - aligned to right -->
                <div style="display: flex; justify-content: flex-end; margin-bottom: 1rem;">
                    <button id="copyWebsiteLinkBtn" onclick="copyWebsiteLink()" class="btn"
                        style="background: linear-gradient(135deg, #10b981 0%, #059669 100%); color: white; display: flex; align-items: center; gap: 8px; padding: 10px 16px; font-weight: 600; box-shadow: 0 4px 12px rgba(16, 185, 129, 0.3);">
                        <i class="fa-solid fa-link"></i>
                        <span>Website Linkini Kopyala</span>
                    </button>
                </div>

                <div class="task-stats">
                    <div class="stat-card">
                        <div class="stat-number" id="websiteStatus">-</div>
                        <div class="stat-label">Website Durumu</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number" id="websiteProductCount" style="color:var(--primary);">0</div>
                        <div class="stat-label">ÃœrÃ¼nler</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number" id="websiteServiceCount" style="color:var(--success);">0</div>
                        <div class="stat-label">Hizmetler</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number" id="websiteTeamCount" style="color:var(--warning);">0</div>
                        <div class="stat-label">Ekip Ãœyeleri</div>
                    </div>
                </div>

                <!-- Website Management Tabs -->
                <div class="card" style="margin-bottom: 2rem;">
                    <div class="website-tabs"
                        style="display: flex; gap: 8px; flex-wrap: wrap; border-bottom: 2px solid #e2e8f0; padding-bottom: 1rem;">
                        <button class="website-tab active" data-tab="settings"
                            style="padding: 10px 18px; border: none; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; border-radius: 8px; cursor: pointer; font-weight: 600; display: flex; align-items: center; gap: 6px; transition: all 0.3s;">
                            <i class="fa-solid fa-gear"></i> Ayarlar
                        </button>
                        <button class="website-tab" data-tab="products"
                            style="padding: 10px 18px; border: 1px solid #e2e8f0; background: white; color: #64748b; border-radius: 8px; cursor: pointer; font-weight: 500; display: flex; align-items: center; gap: 6px; transition: all 0.3s;">
                            <i class="fa-solid fa-box"></i> ÃœrÃ¼nler
                        </button>
                        <button class="website-tab" data-tab="services"
                            style="padding: 10px 18px; border: 1px solid #e2e8f0; background: white; color: #64748b; border-radius: 8px; cursor: pointer; font-weight: 500; display: flex; align-items: center; gap: 6px; transition: all 0.3s;">
                            <i class="fa-solid fa-briefcase"></i> Hizmetler
                        </button>
                        <button class="website-tab" data-tab="team"
                            style="padding: 10px 18px; border: 1px solid #e2e8f0; background: white; color: #64748b; border-radius: 8px; cursor: pointer; font-weight: 500; display: flex; align-items: center; gap: 6px; transition: all 0.3s;">
                            <i class="fa-solid fa-users"></i> Ekip
                        </button>
                        <button class="website-tab" data-tab="gallery"
                            style="padding: 10px 18px; border: 1px solid #e2e8f0; background: white; color: #64748b; border-radius: 8px; cursor: pointer; font-weight: 500; display: flex; align-items: center; gap: 6px; transition: all 0.3s;">
                            <i class="fa-solid fa-images"></i> Galeri
                        </button>
                        <button class="website-tab" data-tab="pages"
                            style="padding: 10px 18px; border: 1px solid #e2e8f0; background: white; color: #64748b; border-radius: 8px; cursor: pointer; font-weight: 500; display: flex; align-items: center; gap: 6px; transition: all 0.3s;">
                            <i class="fa-solid fa-file-lines"></i> Sayfalar
                        </button>
                        <button class="website-tab" data-tab="messages"
                            style="padding: 10px 18px; border: 1px solid #e2e8f0; background: white; color: #64748b; border-radius: 8px; cursor: pointer; font-weight: 500; display: flex; align-items: center; gap: 6px; transition: all 0.3s;">
                            <i class="fa-solid fa-envelope"></i> Mesajlar
                        </button>
                    </div>
                </div>

                <!-- Settings Tab Content -->
                <div id="website-tab-settings" class="website-tab-content">
                    <div class="card">
                        <h2><i class="fa-solid fa-gear" style="color: var(--primary);"></i> Website AyarlarÄ±</h2>
                        <form id="websiteSettingsForm">
                            <div class="form-group">
                                <label>Firma Adresi</label>
                                <div style="display: flex; gap: 10px; align-items: center;">
                                    <span style="color: var(--secondary); font-weight: 500;">kolayistakip.com/</span>
                                    <input type="text" id="websiteSubdomain" placeholder="firmaadi" pattern="[a-z0-9-]+"
                                        style="flex: 1;" />
                                    <button type="button" onclick="WebsiteManager.checkSubdomain()" class="btn"
                                        style="background: var(--primary); color: white;">
                                        <i class="fa-solid fa-check"></i> Kontrol Et
                                    </button>
                                </div>
                                <small style="color: var(--secondary);">Sadece kÃ¼Ã§Ã¼k harf, rakam ve tire
                                    kullanÄ±n</small>
                            </div>

                            <div
                                style="display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 1rem;">
                                <div class="form-group">
                                    <label>Firma AdÄ±</label>
                                    <input type="text" id="websiteCompanyName" placeholder="Firma AdÄ±nÄ±z" />
                                </div>

                                <div class="form-group">
                                    <label>Slogan</label>
                                    <input type="text" id="websiteSlogan"
                                        placeholder="Dijital GeleceÄŸinizi Åžekillendiriyoruz" />
                                </div>
                            </div>

                            <div class="form-group">
                                <label>Firma AÃ§Ä±klamasÄ±</label>
                                <textarea id="websiteDescription" rows="3"
                                    placeholder="FirmanÄ±z hakkÄ±nda kÄ±sa aÃ§Ä±klama..."></textarea>
                            </div>

                            <div class="form-group">
                                <label>Logo</label>
                                <div style="display: flex; gap: 10px; align-items: center;">
                                    <input type="file" id="websiteLogoFile" accept="image/*"
                                        onchange="WebsiteManager.uploadLogo(this)" style="display: none;" />
                                    <input type="text" id="websiteLogo" placeholder="Logo yÃ¼kleyin veya URL girin"
                                        readonly style="flex: 1; background: #f8fafc;" />
                                    <button type="button" onclick="document.getElementById('websiteLogoFile').click()"
                                        class="btn"
                                        style="background: var(--primary); color: white; white-space: nowrap;">
                                        <i class="fa-solid fa-upload"></i> YÃ¼kle
                                    </button>
                                </div>
                                <div id="logoPreview" style="margin-top: 10px; display: none;">
                                    <img id="logoPreviewImg" src="" alt="Logo"
                                        style="max-height: 60px; border-radius: 8px; border: 1px solid var(--border);">
                                </div>
                            </div>

                            <div class="form-group">
                                <label>Hero GÃ¶rseli</label>
                                <div style="display: flex; gap: 10px; align-items: center;">
                                    <input type="file" id="websiteHeroFile" accept="image/*"
                                        onchange="WebsiteManager.uploadHeroImage(this)" style="display: none;" />
                                    <input type="text" id="websiteHeroImage"
                                        placeholder="Hero gÃ¶rseli yÃ¼kleyin veya URL girin" readonly
                                        style="flex: 1; background: #f8fafc;" />
                                    <button type="button" onclick="document.getElementById('websiteHeroFile').click()"
                                        class="btn"
                                        style="background: var(--primary); color: white; white-space: nowrap;">
                                        <i class="fa-solid fa-upload"></i> YÃ¼kle
                                    </button>
                                </div>
                                <div id="heroPreview" style="margin-top: 10px; display: none;">
                                    <img id="heroPreviewImg" src="" alt="Hero"
                                        style="max-width: 100%; max-height: 150px; border-radius: 8px; border: 1px solid var(--border);">
                                </div>
                            </div>

                            <div class="form-group">
                                <label><i class="fa-solid fa-panorama" style="color: var(--primary);"></i> Banner
                                    GÃ¶rseli</label>
                                <div style="display: flex; gap: 10px; align-items: center;">
                                    <input type="file" id="websiteBannerFile" accept="image/*"
                                        onchange="WebsiteManager.uploadBannerImage(this)" style="display: none;" />
                                    <input type="text" id="websiteBanner" placeholder="Banner gÃ¶rseli yÃ¼kleyin" readonly
                                        style="flex: 1; background: #f8fafc;" />
                                    <button type="button" onclick="document.getElementById('websiteBannerFile').click()"
                                        class="btn"
                                        style="background: var(--primary); color: white; white-space: nowrap;">
                                        <i class="fa-solid fa-upload"></i> YÃ¼kle
                                    </button>
                                </div>
                                <small style="color: var(--secondary); display: block; margin-top: 6px;">
                                    <i class="fa-solid fa-info-circle"></i> Ã–nerilen boyut: <strong>1920 x 500
                                        piksel</strong> (otomatik boyutlandÄ±rÄ±lÄ±r)
                                </small>
                                <div id="bannerPreview" style="margin-top: 10px; display: none;">
                                    <img id="bannerPreviewImg" src="" alt="Banner"
                                        style="max-width: 100%; max-height: 120px; border-radius: 8px; border: 1px solid var(--border); object-fit: cover;">
                                </div>
                            </div>

                            <div
                                style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 1rem;">
                                <div class="form-group">
                                    <label>Ä°letiÅŸim E-posta</label>
                                    <input type="email" id="websiteEmail" placeholder="info@firma.com" />
                                </div>

                                <div class="form-group">
                                    <label>Telefon</label>
                                    <input type="tel" id="websitePhone" placeholder="0XXX XXX XX XX" />
                                </div>

                                <div class="form-group">
                                    <label><i class="fa-brands fa-whatsapp" style="color: #25d366;"></i> WhatsApp
                                        NumarasÄ±</label>
                                    <input type="tel" id="websiteWhatsapp" placeholder="05XX XXX XX XX" />
                                    <small style="color: var(--secondary);">BoÅŸ bÄ±rakÄ±lÄ±rsa telefon numarasÄ±
                                        kullanÄ±lÄ±r</small>
                                </div>
                            </div>

                            <div class="form-group">
                                <label>Adres</label>
                                <textarea id="websiteAddress" rows="2" placeholder="Firma adresiniz..."></textarea>
                            </div>

                            <div
                                style="display: grid; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); gap: 1rem;">
                                <div class="form-group">
                                    <label>Ana Renk</label>
                                    <input type="color" id="websitePrimaryColor" value="#667eea"
                                        style="height: 45px; cursor: pointer;" />
                                </div>
                                <div class="form-group">
                                    <label>Ä°kincil Renk</label>
                                    <input type="color" id="websiteSecondaryColor" value="#764ba2"
                                        style="height: 45px; cursor: pointer;" />
                                </div>
                                <div class="form-group">
                                    <label>Vurgu Rengi</label>
                                    <input type="color" id="websiteAccentColor" value="#22c55e"
                                        style="height: 45px; cursor: pointer;" />
                                </div>
                            </div>

                            <!-- Randevu ve Rezervasyon Linkleri -->
                            <div
                                style="background: #f0fdf4; padding: 1rem; border-radius: 8px; margin-top: 1.5rem; border: 1px solid #bbf7d0;">
                                <h4 style="margin-bottom: 1rem; color: #166534; font-size: 1rem;">
                                    <i class="fa-solid fa-link"></i> HÄ±zlÄ± EriÅŸim Linkleri
                                </h4>
                                <div
                                    style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 1rem;">
                                    <div class="form-group" style="margin-bottom: 0;">
                                        <label><i class="fa-solid fa-calendar-check" style="color: #8b5cf6;"></i>
                                            Randevu Linki</label>
                                        <input type="url" id="websiteAppointmentLink"
                                            placeholder="https://kolayistakip.vercel.app/randevu.html?calendar_id=..." />
                                        <small style="color: var(--secondary);">Randevu modÃ¼lÃ¼nden paylaÅŸÄ±m linkini
                                            yapÄ±ÅŸtÄ±rÄ±n</small>
                                    </div>
                                    <div class="form-group" style="margin-bottom: 0;">
                                        <label><i class="fa-solid fa-calendar-days" style="color: #10b981;"></i>
                                            Rezervasyon Linki</label>
                                        <input type="url" id="websiteReservationLink"
                                            placeholder="https://kolayistakip.vercel.app/alan-rezervasyon.html?user_id=..." />
                                        <small style="color: var(--secondary);">Rezervasyon modÃ¼lÃ¼nden paylaÅŸÄ±m linkini
                                            yapÄ±ÅŸtÄ±rÄ±n</small>
                                    </div>
                                </div>
                            </div>

                            <!-- Sosyal Medya Linkleri -->
                            <div
                                style="background: #eff6ff; padding: 1rem; border-radius: 8px; margin-top: 1.5rem; border: 1px solid #bfdbfe;">
                                <h4 style="margin-bottom: 1rem; color: #1e40af; font-size: 1rem;">
                                    <i class="fa-solid fa-share-nodes"></i> Sosyal Medya Linkleri
                                </h4>
                                <div
                                    style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 1rem;">
                                    <div class="form-group" style="margin-bottom: 0;">
                                        <label><i class="fa-brands fa-facebook" style="color: #1877f2;"></i>
                                            Facebook</label>
                                        <input type="url" id="websiteFacebook"
                                            placeholder="https://facebook.com/firmaadi" />
                                    </div>
                                    <div class="form-group" style="margin-bottom: 0;">
                                        <label><i class="fa-brands fa-x-twitter" style="color: #000;"></i> Twitter /
                                            X</label>
                                        <input type="url" id="websiteTwitter" placeholder="https://x.com/firmaadi" />
                                    </div>
                                    <div class="form-group" style="margin-bottom: 0;">
                                        <label><i class="fa-brands fa-instagram" style="color: #e4405f;"></i>
                                            Instagram</label>
                                        <input type="url" id="websiteInstagram"
                                            placeholder="https://instagram.com/firmaadi" />
                                    </div>
                                    <div class="form-group" style="margin-bottom: 0;">
                                        <label><i class="fa-brands fa-linkedin" style="color: #0a66c2;"></i>
                                            LinkedIn</label>
                                        <input type="url" id="websiteLinkedin"
                                            placeholder="https://linkedin.com/company/firmaadi" />
                                    </div>
                                    <div class="form-group" style="margin-bottom: 0;">
                                        <label><i class="fa-brands fa-youtube" style="color: #ff0000;"></i>
                                            YouTube</label>
                                        <input type="url" id="websiteYoutube"
                                            placeholder="https://youtube.com/@firmaadi" />
                                    </div>
                                    <div class="form-group" style="margin-bottom: 0;">
                                        <label><i class="fa-brands fa-tiktok" style="color: #000;"></i> TikTok</label>
                                        <input type="url" id="websiteTiktok"
                                            placeholder="https://tiktok.com/@firmaadi" />
                                    </div>
                                </div>
                            </div>

                            <div class="form-group"
                                style="background: #f8fafc; padding: 1rem; border-radius: 8px; margin-top: 1rem;">
                                <label style="display: flex; align-items: center; gap: 10px; cursor: pointer;">
                                    <input type="checkbox" id="websitePublished"
                                        style="width: 20px; height: 20px; cursor: pointer;" />
                                    <span style="font-weight: 600; color: var(--primary);">Website'i YayÄ±nla</span>
                                </label>
                                <small style="color: var(--secondary); display: block; margin-top: 5px;">YayÄ±nlandÄ±ÄŸÄ±nda
                                    siteniz herkese aÃ§Ä±k olacaktÄ±r.</small>
                            </div>


                            <button type="submit" class="btn btn-primary"
                                style="width: 100%; margin-top: 1.5rem; padding: 14px;">
                                <i class="fa-solid fa-save"></i> AyarlarÄ± Kaydet
                            </button>
                        </form>
                    </div>
                </div>

                <!-- Products Tab Content -->
                <div id="website-tab-products" class="website-tab-content" style="display:none;">
                    <div class="card">
                        <div
                            style="display:flex; justify-content:space-between; align-items:center; margin-bottom:2rem;">
                            <h2><i class="fa-solid fa-box" style="color: var(--primary);"></i> ÃœrÃ¼nler</h2>
                            <button onclick="WebsiteManager.openProductModal()" class="btn btn-primary">
                                <i class="fa-solid fa-plus"></i> Yeni ÃœrÃ¼n Ekle
                            </button>
                        </div>
                        <div id="websiteProductsGrid"
                            style="display: grid; grid-template-columns: repeat(auto-fill, minmax(280px, 1fr)); gap: 1.5rem;">
                            <div style="grid-column: 1/-1; text-align:center; color:var(--secondary); padding: 3rem;">
                                <i class="fa-solid fa-box"
                                    style="font-size: 3rem; opacity: 0.2; margin-bottom: 1rem;"></i>
                                <p>HenÃ¼z Ã¼rÃ¼n eklenmemiÅŸ.</p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Services Tab Content -->
                <div id="website-tab-services" class="website-tab-content" style="display:none;">
                    <div class="card">
                        <div
                            style="display:flex; justify-content:space-between; align-items:center; margin-bottom:2rem;">
                            <h2><i class="fa-solid fa-briefcase" style="color: var(--primary);"></i> Hizmetler</h2>
                            <button onclick="WebsiteManager.openServiceModal()" class="btn btn-primary">
                                <i class="fa-solid fa-plus"></i> Yeni Hizmet Ekle
                            </button>
                        </div>
                        <div id="websiteServicesGrid"
                            style="display: grid; grid-template-columns: repeat(auto-fill, minmax(300px, 1fr)); gap: 1.5rem;">
                            <div style="grid-column: 1/-1; text-align:center; color:var(--secondary); padding: 3rem;">
                                <i class="fa-solid fa-briefcase"
                                    style="font-size: 3rem; opacity: 0.2; margin-bottom: 1rem;"></i>
                                <p>HenÃ¼z hizmet eklenmemiÅŸ.</p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Team Tab Content -->
                <div id="website-tab-team" class="website-tab-content" style="display:none;">
                    <div class="card">
                        <div
                            style="display:flex; justify-content:space-between; align-items:center; margin-bottom:2rem;">
                            <h2><i class="fa-solid fa-users" style="color: var(--primary);"></i> Ekip Ãœyeleri</h2>
                            <button onclick="WebsiteManager.openTeamModal()" class="btn btn-primary">
                                <i class="fa-solid fa-plus"></i> Yeni Ãœye Ekle
                            </button>
                        </div>
                        <div id="websiteTeamGrid"
                            style="display: grid; grid-template-columns: repeat(auto-fill, minmax(250px, 1fr)); gap: 1.5rem;">
                            <div style="grid-column: 1/-1; text-align:center; color:var(--secondary); padding: 3rem;">
                                <i class="fa-solid fa-users"
                                    style="font-size: 3rem; opacity: 0.2; margin-bottom: 1rem;"></i>
                                <p>HenÃ¼z ekip Ã¼yesi eklenmemiÅŸ.</p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Gallery Tab Content -->
                <div id="website-tab-gallery" class="website-tab-content" style="display:none;">
                    <div class="card">
                        <div
                            style="display:flex; justify-content:space-between; align-items:center; margin-bottom:2rem;">
                            <h2><i class="fa-solid fa-images" style="color: var(--primary);"></i> Galeri</h2>
                            <button onclick="WebsiteManager.openGalleryModal()" class="btn btn-primary">
                                <i class="fa-solid fa-plus"></i> GÃ¶rsel Ekle
                            </button>
                        </div>
                        <div id="websiteGalleryGrid"
                            style="display: grid; grid-template-columns: repeat(auto-fill, minmax(200px, 1fr)); gap: 1rem;">
                            <div style="grid-column: 1/-1; text-align:center; color:var(--secondary); padding: 3rem;">
                                <i class="fa-solid fa-images"
                                    style="font-size: 3rem; opacity: 0.2; margin-bottom: 1rem;"></i>
                                <p>HenÃ¼z gÃ¶rsel eklenmemiÅŸ.</p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Pages Tab Content -->
                <div id="website-tab-pages" class="website-tab-content" style="display:none;">
                    <div class="card">
                        <div
                            style="display:flex; justify-content:space-between; align-items:center; margin-bottom:2rem;">
                            <h2><i class="fa-solid fa-file-lines" style="color: var(--primary);"></i> Sayfalar</h2>
                            <button onclick="WebsiteManager.openPageModal()" class="btn btn-primary">
                                <i class="fa-solid fa-plus"></i> Yeni Sayfa Ekle
                            </button>
                        </div>
                        <div class="table-responsive">
                            <table class="data-table">
                                <thead>
                                    <tr>
                                        <th>Sayfa BaÅŸlÄ±ÄŸÄ±</th>
                                        <th>Slug</th>
                                        <th>Durum</th>
                                        <th>Ä°ÅŸlemler</th>
                                    </tr>
                                </thead>
                                <tbody id="websitePagesList">
                                    <tr>
                                        <td colspan="4" style="text-align:center; color:var(--secondary);">HenÃ¼z sayfa
                                            eklenmemiÅŸ.
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>

                <!-- Messages Tab Content -->
                <div id="website-tab-messages" class="website-tab-content" style="display:none;">
                    <div class="card">
                        <div
                            style="display:flex; justify-content:space-between; align-items:center; margin-bottom:2rem;">
                            <h2><i class="fa-solid fa-envelope" style="color: var(--primary);"></i> Gelen Mesajlar</h2>
                            <button onclick="WebsiteManager.loadMessages()" class="btn"
                                style="background: var(--primary); color: white;">
                                <i class="fa-solid fa-refresh"></i> Yenile
                            </button>
                        </div>
                        <div class="table-responsive">
                            <table class="data-table">
                                <thead>
                                    <tr>
                                        <th>GÃ¶nderen</th>
                                        <th>E-posta</th>
                                        <th>Mesaj</th>
                                        <th>Tarih</th>
                                        <th>Ä°ÅŸlemler</th>
                                    </tr>
                                </thead>
                                <tbody id="websiteMessagesList">
                                    <tr>
                                        <td colspan="5"
                                            style="text-align:center; color:var(--secondary);padding: 2rem;">HenÃ¼z mesaj
                                            yok.
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </section>
        </main>
    </div>

    <!-- Bulk Create Areas Modal -->
    <div id="bulkCreateModal" class="modal-overlay" style="display:none;">
        <div class="modal-content card" style="max-width: 550px;">
            <h2 style="margin-bottom:1.5rem;"><i class="fa-solid fa-layer-group" style="color: #8b5cf6;"></i> Toplu Alan
                OluÅŸtur</h2>
            <p style="color: var(--secondary); font-size: 0.9rem; margin-bottom: 1.5rem;">
                Birden fazla alanÄ± tek seferde oluÅŸturun. Ã–rn: h100 ile h150 arasÄ± 51 alan.
            </p>
            <form id="bulkCreateForm">
                <div style="display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 12px; margin-bottom: 1rem;">
                    <div class="form-group" style="margin-bottom: 0;">
                        <label style="font-size: 0.75rem;">Ã–nek (prefix)</label>
                        <input type="text" id="bulkPrefix" required placeholder="Ã–rn: H"
                            style="text-transform: uppercase;">
                    </div>
                    <div class="form-group" style="margin-bottom: 0;">
                        <label style="font-size: 0.75rem;">BaÅŸlangÄ±Ã§ No</label>
                        <input type="number" id="bulkStartNo" required min="1" placeholder="100">
                    </div>
                    <div class="form-group" style="margin-bottom: 0;">
                        <label style="font-size: 0.75rem;">BitiÅŸ No</label>
                        <input type="number" id="bulkEndNo" required min="1" placeholder="200">
                    </div>
                </div>

                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 12px; margin-bottom: 1rem;">
                    <div class="form-group" style="margin-bottom: 0;">
                        <label style="font-size: 0.75rem;">Alan Tipi</label>
                        <select id="bulkAlanTipi" required>
                            <option value="stand">Fuar StandÄ±</option>
                            <option value="toplanti">ToplantÄ± OdasÄ±</option>
                            <option value="masa">Coworking MasasÄ±</option>
                            <option value="kort">Spor Kortu/Saha</option>
                            <option value="loca">Stadyum LocasÄ±</option>
                        </select>
                    </div>
                    <div class="form-group" style="margin-bottom: 0;">
                        <label style="font-size: 0.75rem;">BÃ¼yÃ¼klÃ¼k</label>
                        <input type="text" id="bulkBuyukluk" required placeholder="Ã–rn: 18 mÂ²">
                    </div>
                </div>

                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 12px; margin-bottom: 1rem;">
                    <div class="form-group" style="margin-bottom: 0;">
                        <label style="font-size: 0.75rem;">Fiyat (â‚º)</label>
                        <input type="number" id="bulkFiyat" required min="0" step="0.01" placeholder="0.00">
                    </div>
                    <div class="form-group" style="margin-bottom: 0;">
                        <label style="font-size: 0.75rem;">Durum</label>
                        <select id="bulkDurum" required>
                            <option value="bos">MÃ¼sait</option>
                            <option value="opsiyonda">Opsiyonda</option>
                            <option value="rezerve">Dolu</option>
                        </select>
                    </div>
                </div>

                <div id="bulkPreview"
                    style="background: #f8fafc; padding: 12px; border-radius: 8px; margin-bottom: 1rem; font-size: 0.85rem; color: var(--secondary);">
                    <i class="fa-solid fa-info-circle"></i> OluÅŸturulacak alan sayÄ±sÄ± hesaplanacak...
                </div>

                <div style="display:flex; gap:1rem; margin-top:1.5rem;">
                    <button type="button" onclick="closeBulkCreateModal()" class="btn"
                        style="background:#f1f5f9; color:var(--dark);">Ä°ptal</button>
                    <button type="submit" class="btn" style="flex:1; background: #8b5cf6; color: white;">
                        <i class="fa-solid fa-layer-group"></i> Toplu OluÅŸtur
                    </button>
                </div>
            </form>
        </div>
    </div>

    <!-- Add Employee Modal -->
    <div id="addEmployeeModal" class="modal-overlay" style="display:none;">
        <div class="modal-content card">
            <h2 style="margin-bottom:1.5rem;"><i class="fa-solid fa-user-plus" style="color: var(--primary);"></i> Yeni
                Ã‡alÄ±ÅŸan Ekle</h2>
            <form id="addEmployeeForm">
                <div class="form-group">
                    <label>Ad Soyad</label>
                    <input type="text" id="newEmpName" required placeholder="Ã–rn: Ahmet YÄ±lmaz" />
                </div>
                <div class="form-group">
                    <label>Telefon</label>
                    <input type="tel" id="newEmpPhone" required placeholder="5XX XXX XX XX" />
                </div>
                <div class="form-group">
                    <label>Departman (Opsiyonel)</label>
                    <select id="newEmpDepartment">
                        <option value="">Departman SeÃ§iniz</option>
                        <!-- Departments will be loaded dynamically -->
                    </select>
                </div>
                <div style="display:flex; gap:1rem; margin-top:1.5rem;">
                    <button type="button" onclick="closeAddEmployeeModal()" class="btn"
                        style="background:#f1f5f9; color:var(--dark);">Ä°ptal</button>
                    <button type="submit" class="btn btn-primary" style="flex:1;">Kaydet</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Edit Employee Modal -->
    <div id="editEmployeeModal" class="modal-overlay" style="display:none;">
        <div class="modal-content card">
            <h2 style="margin-bottom:1.5rem;"><i class="fa-solid fa-pen-to-square" style="color: var(--primary);"></i>
                Ã‡alÄ±ÅŸan DÃ¼zenle</h2>
            <form id="editEmployeeForm">
                <input type="hidden" id="editEmpId" />
                <div class="form-group">
                    <label>Ad Soyad</label>
                    <input type="text" id="editEmpName" required placeholder="Ã–rn: Ahmet YÄ±lmaz" />
                </div>
                <div class="form-group">
                    <label>Telefon</label>
                    <input type="tel" id="editEmpPhone" required placeholder="5XX XXX XX XX" />
                </div>
                <div class="form-group">
                    <label>Departman (Opsiyonel)</label>
                    <select id="editEmpDepartment">
                        <option value="">Departman SeÃ§iniz</option>
                        <!-- Departments will be loaded dynamically -->
                    </select>
                </div>
                <div style="display:flex; gap:1rem; margin-top:1.5rem;">
                    <button type="button" onclick="closeEditEmployeeModal()" class="btn"
                        style="background:#f1f5f9; color:var(--dark);">Ä°ptal</button>
                    <button type="submit" class="btn btn-primary" style="flex:1;">GÃ¼ncelle</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Edit Task Modal -->
    <div id="editTaskModal" class="modal-overlay" style="display:none;">
        <div class="modal-content card">
            <h2 style="margin-bottom:1.5rem;"><i class="fa-solid fa-pen-to-square" style="color: var(--primary);"></i>
                GÃ¶rev DÃ¼zenle</h2>
            <form id="editTaskForm">
                <input type="hidden" id="editTaskId" />
                <div class="form-group">
                    <label>YapÄ±lacak Ä°ÅŸ <span style="color: red;">*</span></label>
                    <textarea id="editTaskDesc" required placeholder="GÃ¶rev aÃ§Ä±klamasÄ±..."
                        style="min-height:100px; resize:vertical;"></textarea>
                </div>
                <div class="form-group">
                    <label>Ã‡alÄ±ÅŸan</label>
                    <select id="editTaskEmployee" required>
                        <option value="">Ã‡alÄ±ÅŸan SeÃ§in...</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>MÃ¼ÅŸteri (Opsiyonel)</label>
                    <select id="editTaskCustomer">
                        <option value="">MÃ¼ÅŸteri SeÃ§in...</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>Termin Tarihi (Opsiyonel)</label>
                    <input type="date" id="editTaskDeadline" />
                </div>
                <div style="display:flex; gap:1rem; margin-top:1.5rem;">
                    <button type="button" onclick="closeEditTaskModal()" class="btn"
                        style="background:#f1f5f9; color:var(--dark);">Ä°ptal</button>
                    <button type="submit" class="btn btn-primary" style="flex:1;">GÃ¼ncelle</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Add Customer Modal -->
    <div id="addCustomerModal" class="modal-overlay" style="display:none;">
        <div class="modal-content card">
            <h2 style="margin-bottom:1.5rem;"><i class="fa-solid fa-user-plus" style="color: var(--primary);"></i> Yeni
                MÃ¼ÅŸteri KartÄ±</h2>
            <form id="addCustomerForm">
                <div class="form-group">
                    <label>Ad Soyad <span style="color: red;">*</span></label>
                    <input type="text" id="newCustomerName" required placeholder="Ã–rn: Ahmet YÄ±lmaz" />
                </div>
                <div class="form-group">
                    <label>E-posta Adresi <span style="color: red;">*</span></label>
                    <input type="email" id="newCustomerEmail" required placeholder="ornek@email.com" />
                </div>
                <div class="form-group">
                    <label>Telefon Numara <span style="color: red;">*</span></label>
                    <input type="tel" id="newCustomerPhone" required placeholder="5XX XXX XX XX" />
                </div>
                <div class="form-group">
                    <label>SektÃ¶r / Ä°ÅŸ AlanÄ± <span style="color: red;">*</span></label>
                    <input type="text" id="newCustomerSector" required placeholder="Ã–rn: Teknoloji, SaÄŸlÄ±k, EÄŸitim" />
                </div>
                <div class="form-group">
                    <label>Durum <span style="color: red;">*</span></label>
                    <select id="newCustomerStatus" required>
                        <option value="Aktif" selected>Aktif</option>
                        <option value="Potansiyel">Potansiyel</option>
                        <option value="Pasif">Pasif</option>
                    </select>
                </div>
                <div style="display:flex; gap:1rem; margin-top:1.5rem;">
                    <button type="button" onclick="closeAddCustomerModal()" class="btn"
                        style="background:#f1f5f9; color:var(--dark);">Ä°ptal</button>
                    <button type="submit" class="btn btn-primary" style="flex:1;">Kaydet</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Edit Customer Modal -->
    <div id="editCustomerModal" class="modal-overlay" style="display:none;">
        <div class="modal-content card">
            <h2 style="margin-bottom:1.5rem;"><i class="fa-solid fa-pen-to-square" style="color: var(--primary);"></i>
                MÃ¼ÅŸteri DÃ¼zenle</h2>
            <form id="editCustomerForm">
                <input type="hidden" id="editCustomerId" />
                <div class="form-group">
                    <label>Ad Soyad <span style="color: red;">*</span></label>
                    <input type="text" id="editCustomerName" required placeholder="Ã–rn: Ahmet YÄ±lmaz" />
                </div>
                <div class="form-group">
                    <label>E-posta Adresi <span style="color: red;">*</span></label>
                    <input type="email" id="editCustomerEmail" required placeholder="ornek@email.com" />
                </div>
                <div class="form-group">
                    <label>Telefon Numara <span style="color: red;">*</span></label>
                    <input type="tel" id="editCustomerPhone" required placeholder="5XX XXX XX XX" />
                </div>
                <div class="form-group">
                    <label>SektÃ¶r / Ä°ÅŸ AlanÄ± <span style="color: red;">*</span></label>
                    <input type="text" id="editCustomerSector" required placeholder="Ã–rn: Teknoloji, SaÄŸlÄ±k, EÄŸitim" />
                </div>
                <div class="form-group">
                    <label>Durum <span style="color: red;">*</span></label>
                    <select id="editCustomerStatus" required>
                        <option value="Aktif">Aktif</option>
                        <option value="Potansiyel">Potansiyel</option>
                        <option value="Pasif">Pasif</option>
                    </select>
                </div>
                <div style="display:flex; gap:1rem; margin-top:1.5rem;">
                    <button type="button" onclick="closeEditCustomerModal()" class="btn"
                        style="background:#f1f5f9; color:var(--dark);">Ä°ptal</button>
                    <button type="submit" class="btn btn-primary" style="flex:1;">GÃ¼ncelle</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Customer Tasks Modal -->
    <div id="customerTasksModal" class="modal-overlay" style="display:none;"
        onclick="if(event.target === this) closeCustomerTasksModal()">
        <div class="modal-content card" style="max-width: 700px; max-height: 85vh; overflow-y: auto;">
            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1.5rem;">
                <h2 style="margin: 0;">
                    <i class="fa-solid fa-list-check" style="color: var(--primary);"></i>
                    <span id="customerTasksModalTitle">MÃ¼ÅŸteri GÃ¶revleri</span>
                </h2>
                <button onclick="closeCustomerTasksModal()"
                    style="background: none; border: none; font-size: 1.5rem; cursor: pointer; color: var(--secondary); padding: 0; width: 32px; height: 32px; display: flex; align-items: center; justify-content: center;">
                    <i class="fa-solid fa-xmark"></i>
                </button>
            </div>

            <div id="customerTasksListContainer">
                <!-- Tasks will be rendered here -->
            </div>
        </div>
    </div>

    <!-- Reservation Detail Modal -->
    <div id="reservationDetailModal" class="modal-overlay" style="display:none;"
        onclick="if(event.target === this) closeReservationDetailModal()">
        <div class="modal-content card" style="max-width: 500px;">
            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1.5rem;">
                <h2 style="margin: 0;"><i class="fa-solid fa-circle-info" style="color: var(--primary);"></i> Alan
                    DetaylarÄ±</h2>
                <button onclick="closeReservationDetailModal()"
                    style="background: none; border: none; font-size: 1.5rem; cursor: pointer; color: var(--secondary);">
                    <i class="fa-solid fa-xmark"></i>
                </button>
            </div>
            <div id="reservationDetailContent">
                <!-- Content will be populated by JS -->
            </div>
            <div style="margin-top: 1.5rem; display: flex; gap: 10px;">
                <button onclick="closeReservationDetailModal()" class="btn"
                    style="flex: 1; background: #f1f5f9; color: var(--dark);">Kapat</button>
                <button onclick="editFromDetailModal()" class="btn btn-primary" style="flex: 1;"><i
                        class="fa-solid fa-pen"></i> DÃ¼zenle</button>
            </div>
        </div>
    </div>

    <!-- Reservation Edit Modal -->
    <div id="reservationEditModal" class="modal-overlay" style="display:none;"
        onclick="if(event.target === this) closeReservationEditModal()">
        <div class="modal-content card" style="max-width: 600px; max-height: 90vh; overflow-y: auto;">
            <h2 style="margin-bottom: 1.5rem;"><i class="fa-solid fa-pen-to-square" style="color: var(--primary);"></i>
                Alan DÃ¼zenle</h2>
            <form id="reservationEditForm">
                <input type="hidden" id="modalEditReservationId">

                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 12px; margin-bottom: 1rem;">
                    <div class="form-group" style="margin-bottom: 0;">
                        <label style="font-size: 0.85rem;">Alan Kodu/NumarasÄ±</label>
                        <input type="text" id="modalAlanNo" required placeholder="Ã–rn: F301">
                    </div>
                    <div class="form-group" style="margin-bottom: 0;">
                        <label style="font-size: 0.85rem;">Alan Tipi</label>
                        <select id="modalAlanTipi" required>
                            <option value="stand">Fuar StandÄ±</option>
                            <option value="toplanti">ToplantÄ± OdasÄ±</option>
                            <option value="masa">Coworking MasasÄ±</option>
                            <option value="kort">Spor Kortu/Saha</option>
                            <option value="loca">Stadyum LocasÄ±</option>
                        </select>
                    </div>
                </div>

                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 12px; margin-bottom: 1rem;">
                    <div class="form-group" style="margin-bottom: 0;">
                        <label style="font-size: 0.85rem;">BÃ¼yÃ¼klÃ¼k / Kapasite</label>
                        <input type="text" id="modalAlanBuyukluk" required placeholder="Ã–rn: 24 mÂ²">
                    </div>
                    <div class="form-group" style="margin-bottom: 0;">
                        <label style="font-size: 0.85rem;">Fiyat (â‚º)</label>
                        <input type="number" id="modalFiyatMiktar" min="0" step="0.01" required placeholder="0.00">
                    </div>
                </div>

                <div class="form-group" style="margin-bottom: 1rem;">
                    <label style="font-size: 0.85rem;">Durum</label>
                    <select id="modalAlanDurum" required onchange="toggleModalReservationInfo()">
                        <option value="bos">MÃ¼sait</option>
                        <option value="opsiyonda">Opsiyonda</option>
                        <option value="rezerve">Dolu</option>
                    </select>
                </div>

                <div class="form-group" style="margin-bottom: 1rem;">
                    <label style="font-size: 0.85rem;">AÃ§Ä±klama (Opsiyonel)</label>
                    <input type="text" id="modalAlanAciklama" placeholder="Alan hakkÄ±nda ek bilgiler...">
                </div>

                <!-- Reservation Info Section (shown when durum = rezerve) -->
                <div id="modalReservationInfoSection"
                    style="display: none; border-top: 2px solid var(--border); padding-top: 1rem; margin-top: 1rem;">
                    <h3 style="color: var(--primary); margin-bottom: 1rem; font-size: 1rem;">
                        <i class="fa-solid fa-building"></i> Rezervasyon Bilgileri
                    </h3>
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 12px;">
                        <div class="form-group" style="margin-bottom: 0;">
                            <label style="font-size: 0.85rem;">Firma ÃœnvanÄ±</label>
                            <input type="text" id="modalReservedCompany" placeholder="Ã–rn: ABC Ltd. Åžti.">
                        </div>
                        <div class="form-group" style="margin-bottom: 0;">
                            <label style="font-size: 0.85rem;">Yetkili Ad Soyad</label>
                            <input type="text" id="modalReservedName" placeholder="Ã–rn: Ahmet YÄ±lmaz">
                        </div>
                        <div class="form-group" style="margin-bottom: 0;">
                            <label style="font-size: 0.85rem;">Telefon</label>
                            <input type="tel" id="modalReservedPhone" placeholder="(5XX) XXX XX XX">
                        </div>
                        <div class="form-group" style="margin-bottom: 0;">
                            <label style="font-size: 0.85rem;">E-posta</label>
                            <input type="email" id="modalReservedEmail" placeholder="ornek@firma.com">
                        </div>
                    </div>
                    <div class="form-group" style="margin-top: 12px; margin-bottom: 0;">
                        <label style="font-size: 0.85rem;">Ã–zel Ä°stekler / Notlar</label>
                        <textarea id="modalReservedNotes" rows="2" placeholder="Varsa Ã¶zel istekler..."></textarea>
                    </div>
                </div>

                <div style="display: flex; gap: 1rem; margin-top: 1.5rem;">
                    <button type="button" onclick="closeReservationEditModal()" class="btn"
                        style="background: #f1f5f9; color: var(--dark);">Ä°ptal</button>
                    <button type="submit" class="btn btn-primary" style="flex: 1;"><i class="fa-solid fa-save"></i>
                        Kaydet</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Scripts -->
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <script src="supabase-config.js"></script>
    <script src="security.js"></script>
    <script src="auth.js"></script>

    <script src="app.js"></script>
    <!-- FullCalendar JS -->
    <script src='https://cdn.jsdelivr.net/npm/fullcalendar@6.1.10/index.global.min.js'></script>
    <script src='https://cdn.jsdelivr.net/npm/@fullcalendar/core@6.1.10/locales/tr.global.min.js'></script>
    <script src="appointments.js"></script>
    <script src="proposals.js"></script>
    <script src="dashboard-data.js"></script>
    <script src="website-manager.js"></script>

    <script>
        document.addEventListener('DOMContentLoaded', async () => {
            const user = await Auth.checkAuth();
            if (user) {
                document.getElementById('userNameDisplay').textContent = user.company_name || user.username;

                const badge = document.getElementById('trialBadge');
                if (user.is_premium) {
                    badge.style.background = '#dcfce7';
                    badge.style.color = '#166534';
                    badge.innerHTML = '<i class="fa-solid fa-crown"></i> Premium Ãœyelik';
                } else {
                    const daysLeft = Auth.getDaysLeft(user);
                    if (daysLeft < 0) {
                        badge.style.background = '#fee2e2'; badge.style.color = '#991b1b';
                        badge.innerHTML = '<i class="fa-solid fa-circle-exclamation"></i> SÃ¼re Doldu';
                    } else {
                        badge.innerHTML = `<i
        class="fa-regular fa-clock"></i> ${daysLeft} GÃ¼n KaldÄ±`;
                    }
                }
            }
        });
    </script>

    <!-- Slot Modal -->
    <div id="slotModal" class="modal-overlay" style="display:none;">
        <div class="modal-content card" style="max-height: 85vh; overflow-y: auto;">
            <h2 style="margin-bottom:1rem;">
                <i class="fa-solid fa-calendar-plus" style="color: var(--primary);"></i> Yeni Zaman Dilimi
            </h2>
            <form id="slotForm">
                <div class="form-group">
                    <label>Tarih</label>
                    <input type="date" id="slotDate" required />
                </div>
                <div class="form-group">
                    <label>Saat</label>
                    <input type="time" id="slotTime" required />
                </div>
                <div class="form-group">
                    <label>SÃ¼re (Dakika)</label>
                    <select id="slotDuration" required>
                        <option value="30">30 dakika</option>
                        <option value="60" selected>1 saat</option>
                        <option value="90">1.5 saat</option>
                        <option value="120">2 saat</option>
                    </select>
                </div>

                <div class="form-group"
                    style="background: #f0fdf4; padding: 12px; border-radius: 8px; border: 1px solid #bbf7d0;">
                    <label style="color: #166534;"><i class="fa-solid fa-users"></i> Kapasite (Opsiyonel)</label>
                    <input type="number" id="slotCapacity" min="2" max="100"
                        placeholder="Ã–rn: 10 (boÅŸ bÄ±rakÄ±n = tek kiÅŸilik)" />
                    <small style="color: #166534; display: block; margin-top: 5px;">
                        <i class="fa-solid fa-info-circle"></i> Grup dersleri, seminerler veya toplu etkinlikler iÃ§in
                        kapasite belirleyin.
                    </small>
                </div>

                <div class="form-group">
                    <label>MÃ¼ÅŸteri SeÃ§ (Opsiyonel)</label>
                    <select id="slotCustomerSelect">
                        <option value="">MÃ¼ÅŸteri SeÃ§in...</option>
                        <!-- Will be populated from customers list -->
                    </select>
                    <div style="margin-top:8px; font-size:0.85rem; color:var(--secondary);">
                        Listede yok mu? <a href="#" onclick="switchView('customers')"
                            style="color:var(--primary); font-weight:600;">Yeni MÃ¼ÅŸteri Ekle</a>
                    </div>
                </div>

                <div style="border-top: 1px solid #e5e7eb; margin: 1rem 0; padding-top: 1rem;">
                    <h3 style="font-size: 0.95rem; margin-bottom: 0.5rem; color: var(--primary);">
                        <i class="fa-solid fa-user-pen"></i> DoÄŸrudan Randevu (Opsiyonel)
                    </h3>
                    <p style="font-size: 0.8rem; color: var(--secondary); margin-bottom: 1rem;">
                        EÄŸer boÅŸ bÄ±rakÄ±rsanÄ±z "MÃ¼sait" olarak aÃ§Ä±lÄ±r. DoldurursanÄ±z direkt randevu oluÅŸturulur.
                    </p>
                    <div class="form-group">
                        <label>MÃ¼ÅŸteri AdÄ± SoyadÄ±</label>
                        <input type="text" id="slotCustomerName" placeholder="Ã–rn: AyÅŸe Demir" />
                    </div>
                    <div class="form-group">
                        <label>MÃ¼ÅŸteri Telefon</label>
                        <input type="tel" id="slotCustomerPhone" placeholder="Ã–rn: 5XX XXX XX XX" />
                    </div>
                </div>

                <div style="display:flex; gap:1rem; margin-top:1rem;">
                    <button type="button" onclick="closeSlotModal()" class="btn"
                        style="background:#f1f5f9; color:var(--dark);">Ä°ptal</button>
                    <button type="submit" class="btn btn-primary" style="flex:1;">Ekle</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Proposal Modal -->
    <div id="proposalModal" class="modal-overlay" style="display:none;">
        <div class="modal-content card" style="max-width: 600px; width: 95%; max-height: 85vh; overflow-y: auto;">
            <h2 style="margin-bottom:1.5rem; color: #0ea5e9; display: flex; align-items: center; gap: 10px;">
                <i class="fa-solid fa-file-signature"></i> Fiyat Teklifi OluÅŸtur
            </h2>
            <form id="proposalForm">
                <div class="form-group">
                    <label style="font-weight: 600; color: #334155;">MÃ¼ÅŸteri AdÄ± / Firma:</label>
                    <input type="text" id="propCustomerName" required placeholder="Ã–rn: Mehmet Demir"
                        style="border: 1px solid #cbd5e1; padding: 10px; border-radius: 6px; width: 100%;" />
                </div>
                <div class="form-group">
                    <label style="font-weight: 600; color: #334155;">MÃ¼ÅŸteri WhatsApp NumarasÄ± (Opsiyonel):</label>
                    <input type="tel" id="propCustomerPhone" placeholder="5XX XXX XX XX"
                        style="border: 1px solid #cbd5e1; padding: 10px; border-radius: 6px; width: 100%;" />
                </div>

                <div class="form-group">
                    <label style="font-weight: 600; color: #334155;">Teklif BaÅŸlÄ±ÄŸÄ±:</label>
                    <input type="text" id="propTitle" required placeholder="Ã–rn: Web Sitesi TasarÄ±mÄ±"
                        style="border: 1px solid #cbd5e1; padding: 10px; border-radius: 6px; width: 100%;" />
                </div>

                <div style="margin-top: 20px;">
                    <h3 style="font-size: 1.1rem; font-weight: 600; color: #334155; margin-bottom: 10px;">ÃœrÃ¼n/Hizmet
                        Kalemleri</h3>

                    <div id="proposalItemsContainer" style="display: flex; flex-direction: column; gap: 10px;">
                        <!-- Dynamic Items will be added here -->
                    </div>

                    <button type="button" onclick="Proposals.addItem()" class="btn"
                        style="background: #22c55e; color: white; margin-top: 10px; display: inline-flex; align-items: center; gap: 5px;">
                        <i class="fa-solid fa-plus"></i> Yeni Kalem Ekle
                    </button>
                </div>

                <div class="form-group" style="margin-top: 20px;">
                    <label style="font-weight: 600; color: #334155;">Ek Notlar:</label>
                    <textarea id="propDetails" rows="3" placeholder="Teklif detaylarÄ±nÄ± buraya yazÄ±n..."
                        style="border: 1px solid #cbd5e1; padding: 10px; border-radius: 6px; width: 100%;"></textarea>
                </div>

                <div style="text-align: right; margin-top: 20px; font-size: 1.2rem; font-weight: 700; color: #0ea5e9;">
                    Toplam Tutar: <span id="propTotalAmount">â‚º0.00</span>
                </div>

                <div style="display:flex; gap:1rem; margin-top:1.5rem;">
                    <button type="button" onclick="closeProposalModal()" class="btn"
                        style="background:#f1f5f9; color:var(--dark);">Ä°ptal</button>
                    <button type="submit" class="btn btn-primary" style="flex:1;">Teklifi Kaydet</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Firma Ekleme Modal -->
    <div id="firmaModal" class="modal-overlay" style="display:none;">
        <div class="modal-content card">
            <h2 style="margin-bottom:1.5rem;"><i class="fa-solid fa-building" style="color: var(--primary);"></i> Firma
                Bilgileri Ekle</h2>
            <form id="firmaModalForm" onsubmit="saveFirmaToReservation(event)">
                <input type="hidden" id="firmaModalReservationId">

                <div class="form-group">
                    <label>Firma ÃœnvanÄ± *</label>
                    <input type="text" id="modalFirmaName" required placeholder="Ã–rn: ABC Tekstil Ltd. Åžti.">
                </div>

                <div class="form-group">
                    <label>Yetkili Ad Soyad</label>
                    <input type="text" id="modalYetkili" placeholder="Ã–rn: Ahmet YÄ±lmaz">
                </div>

                <div class="form-group">
                    <label>Telefon</label>
                    <input type="tel" id="modalTelefon" placeholder="5XX XXX XX XX">
                </div>

                <div class="form-group">
                    <label>E-posta</label>
                    <input type="email" id="modalEmail" placeholder="ornek@firma.com">
                </div>

                <div class="form-group">
                    <label>Ã–zel Ä°stekler / Notlar</label>
                    <textarea id="modalNotes" rows="3" placeholder="Varsa Ã¶zel istekler veya notlar..."></textarea>
                </div>

                <div style="display:flex; gap:1rem; margin-top:1.5rem;">
                    <button type="button" onclick="closeFirmaModal()" class="btn"
                        style="background:#f1f5f9; color:var(--dark);">Ä°ptal</button>
                    <button type="submit" class="btn btn-primary" style="flex:1;">Kaydet ve Rezerve Et</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Website Product Modal -->
    <div id="productModal" class="modal-overlay" style="display:none;">
        <div class="modal-content card" style="max-width: 500px; max-height: 90vh; overflow-y: auto;">
            <h2 id="productModalTitle" style="margin-bottom: 1.5rem;"><i class="fa-solid fa-box"
                    style="color: var(--primary);"></i> ÃœrÃ¼n Ekle</h2>
            <form id="productForm">
                <input type="hidden" id="productId">
                <div class="form-group">
                    <label>ÃœrÃ¼n AdÄ± <span style="color: red;">*</span></label>
                    <input type="text" id="productName" required placeholder="Ã–rn: Premium Paket">
                </div>
                <div class="form-group">
                    <label>Kategori</label>
                    <input type="text" id="productCategory" placeholder="Ã–rn: YazÄ±lÄ±m">
                </div>
                <div class="form-group">
                    <label>Fiyat (â‚º)</label>
                    <input type="number" id="productPrice" step="0.01" placeholder="0.00">
                </div>
                <div class="form-group">
                    <label>ÃœrÃ¼n GÃ¶rseli</label>
                    <div style="display: flex; gap: 10px; align-items: center;">
                        <input type="file" id="productImageFile" accept="image/*"
                            onchange="WebsiteManager.uploadProductImage(this)" style="display: none;" />
                        <input type="text" id="productImage" placeholder="GÃ¶rsel yÃ¼kleyin" readonly
                            style="flex: 1; background: #f8fafc;" />
                        <button type="button" onclick="document.getElementById('productImageFile').click()" class="btn"
                            style="background: var(--primary); color: white; white-space: nowrap;">
                            <i class="fa-solid fa-upload"></i> YÃ¼kle
                        </button>
                    </div>
                    <div id="productImagePreview" style="margin-top: 10px; display: none;">
                        <img id="productImagePreviewImg" src="" alt="ÃœrÃ¼n"
                            style="max-width: 100%; max-height: 100px; border-radius: 8px; border: 1px solid var(--border);">
                    </div>
                </div>
                <div class="form-group">
                    <label>AÃ§Ä±klama</label>
                    <textarea id="productDescription" rows="3" placeholder="ÃœrÃ¼n hakkÄ±nda kÄ±sa aÃ§Ä±klama..."></textarea>
                </div>
                <div class="form-group" style="background: #f8fafc; padding: 0.75rem; border-radius: 8px;">
                    <label style="display: flex; align-items: center; gap: 8px; cursor: pointer; margin: 0;">
                        <input type="checkbox" id="productActive" style="width: 18px; height: 18px;" checked>
                        <span>Aktif (Sitede gÃ¶ster)</span>
                    </label>
                </div>
                <div style="display:flex; gap:10px; justify-content:flex-end; margin-top:1.5rem;">
                    <button type="button" onclick="document.getElementById('productModal').style.display='none'"
                        class="btn" style="background:#f1f5f9; color:#333;">Ä°ptal</button>
                    <button type="submit" class="btn btn-primary">Kaydet</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Website Service Modal -->
    <div id="serviceModal" class="modal-overlay" style="display:none;">
        <div class="modal-content card" style="max-width: 500px; max-height: 90vh; overflow-y: auto;">
            <h2 id="serviceModalTitle" style="margin-bottom: 1.5rem;"><i class="fa-solid fa-briefcase"
                    style="color: var(--primary);"></i> Hizmet Ekle</h2>
            <form id="serviceForm">
                <input type="hidden" id="serviceId">
                <div class="form-group">
                    <label>Hizmet AdÄ± <span style="color: red;">*</span></label>
                    <input type="text" id="serviceName" required placeholder="Ã–rn: Web GeliÅŸtirme">
                </div>
                <div class="form-group">
                    <label>Ä°kon (FontAwesome sÄ±nÄ±fÄ±)</label>
                    <input type="text" id="serviceIcon" placeholder="fa-solid fa-code">
                    <small style="color:var(--secondary);">Ã–rn: fa-solid fa-code, fa-solid fa-paint-brush, fa-solid
                        fa-mobile</small>
                </div>
                <div class="form-group">
                    <label>AÃ§Ä±klama</label>
                    <textarea id="serviceDescription" rows="3"
                        placeholder="Hizmet hakkÄ±nda kÄ±sa aÃ§Ä±klama..."></textarea>
                </div>
                <div class="form-group" style="background: #f8fafc; padding: 0.75rem; border-radius: 8px;">
                    <label style="display: flex; align-items: center; gap: 8px; cursor: pointer; margin: 0;">
                        <input type="checkbox" id="serviceActive" style="width: 18px; height: 18px;" checked>
                        <span>Aktif (Sitede gÃ¶ster)</span>
                    </label>
                </div>
                <div style="display:flex; gap:10px; justify-content:flex-end; margin-top:1.5rem;">
                    <button type="button" onclick="document.getElementById('serviceModal').style.display='none'"
                        class="btn" style="background:#f1f5f9; color:#333;">Ä°ptal</button>
                    <button type="submit" class="btn btn-primary">Kaydet</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Website Team Modal -->
    <div id="teamModal" class="modal-overlay" style="display:none;">
        <div class="modal-content card" style="max-width: 500px; max-height: 90vh; overflow-y: auto;">
            <h2 id="teamModalTitle" style="margin-bottom: 1.5rem;"><i class="fa-solid fa-user-plus"
                    style="color: var(--primary);"></i> Ekip Ãœyesi Ekle</h2>
            <form id="teamForm">
                <input type="hidden" id="teamId">
                <div class="form-group">
                    <label>Ad Soyad <span style="color: red;">*</span></label>
                    <input type="text" id="teamName" required placeholder="Ã–rn: Ahmet YÄ±lmaz">
                </div>
                <div class="form-group">
                    <label>Pozisyon / Ãœnvan <span style="color: red;">*</span></label>
                    <input type="text" id="teamPosition" required placeholder="Ã–rn: YazÄ±lÄ±m GeliÅŸtirici">
                </div>
                <div class="form-group">
                    <label>FotoÄŸraf</label>
                    <div style="display: flex; gap: 10px; align-items: center;">
                        <input type="file" id="teamPhotoFile" accept="image/*"
                            onchange="WebsiteManager.uploadTeamPhoto(this)" style="display: none;" />
                        <input type="text" id="teamPhoto" placeholder="FotoÄŸraf yÃ¼kleyin" readonly
                            style="flex: 1; background: #f8fafc;" />
                        <button type="button" onclick="document.getElementById('teamPhotoFile').click()" class="btn"
                            style="background: var(--primary); color: white; white-space: nowrap;">
                            <i class="fa-solid fa-upload"></i> YÃ¼kle
                        </button>
                    </div>
                    <div id="teamPhotoPreview" style="margin-top: 10px; display: none;">
                        <img id="teamPhotoPreviewImg" src="" alt="Ekip"
                            style="max-width: 80px; max-height: 80px; border-radius: 50%; border: 2px solid var(--border);">
                    </div>
                </div>
                <div class="form-group">
                    <label>Biyografi</label>
                    <textarea id="teamBio" rows="3" placeholder="Ekip Ã¼yesi hakkÄ±nda kÄ±sa bilgi..."></textarea>
                </div>
                <div class="form-group">
                    <label>SÄ±ralama</label>
                    <input type="number" id="teamOrder" value="0" min="0">
                    <small style="color:var(--secondary);">DÃ¼ÅŸÃ¼k sayÄ± Ã¶nce gÃ¶rÃ¼nÃ¼r</small>
                </div>
                <div style="display:flex; gap:10px; justify-content:flex-end; margin-top:1.5rem;">
                    <button type="button" onclick="document.getElementById('teamModal').style.display='none'"
                        class="btn" style="background:#f1f5f9; color:#333;">Ä°ptal</button>
                    <button type="submit" class="btn btn-primary">Kaydet</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Website Gallery Modal -->
    <div id="galleryModal" class="modal-overlay" style="display:none;">
        <div class="modal-content card" style="max-width: 500px;">
            <h2 style="margin-bottom: 1.5rem;"><i class="fa-solid fa-image" style="color: var(--primary);"></i> Galeriye
                GÃ¶rsel Ekle</h2>
            <form id="galleryForm">
                <div class="form-group">
                    <label>GÃ¶rsel <span style="color: red;">*</span></label>
                    <div style="display: flex; gap: 10px; align-items: center;">
                        <input type="file" id="galleryImageFile" accept="image/*"
                            onchange="WebsiteManager.uploadGalleryImage(this)" style="display: none;" />
                        <input type="text" id="galleryImage" placeholder="GÃ¶rsel yÃ¼kleyin" readonly required
                            style="flex: 1; background: #f8fafc;" />
                        <button type="button" onclick="document.getElementById('galleryImageFile').click()" class="btn"
                            style="background: var(--primary); color: white; white-space: nowrap;">
                            <i class="fa-solid fa-upload"></i> YÃ¼kle
                        </button>
                    </div>
                    <div id="galleryImagePreview" style="margin-top: 10px; display: none;">
                        <img id="galleryImagePreviewImg" src="" alt="Galeri"
                            style="max-width: 100%; max-height: 150px; border-radius: 8px; border: 1px solid var(--border);">
                    </div>
                </div>
                <div class="form-group">
                    <label>BaÅŸlÄ±k (Opsiyonel)</label>
                    <input type="text" id="galleryTitle" placeholder="GÃ¶rsel baÅŸlÄ±ÄŸÄ±">
                </div>
                <div class="form-group">
                    <label>Kategori <span style="color: red;">*</span></label>
                    <input type="text" id="galleryCategory" required placeholder="Ã–rn: AraÃ§lar, Projeler, Ofis"
                        list="galleryCategoryList">
                    <datalist id="galleryCategoryList">
                        <option value="Genel">
                        <option value="AraÃ§lar">
                        <option value="Projeler">
                        <option value="ÃœrÃ¼nler">
                        <option value="Ofis">
                        <option value="Etkinlikler">
                    </datalist>
                    <small style="color: var(--secondary);">AynÄ± kategorideki gÃ¶rseller gruplanarak gÃ¶sterilir</small>
                </div>
                <div class="form-group">
                    <label>SÄ±ralama</label>
                    <input type="number" id="galleryOrder" value="0" min="0">
                </div>
                <div style="display:flex; gap:10px; justify-content:flex-end; margin-top:1.5rem;">
                    <button type="button" onclick="document.getElementById('galleryModal').style.display='none'"
                        class="btn" style="background:#f1f5f9; color:#333;">Ä°ptal</button>
                    <button type="submit" class="btn btn-primary">Ekle</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Website Page Modal -->
    <div id="pageModal" class="modal-overlay" style="display:none;">
        <div class="modal-content card" style="max-width: 800px; width: 95%;">
            <h2 id="pageModalTitle" style="margin-bottom: 1.5rem;"><i class="fa-solid fa-file-lines"
                    style="color: var(--primary);"></i> Sayfa Ekle</h2>
            <form id="pageForm">
                <input type="hidden" id="pageId">
                <div class="form-group">
                    <label>Sayfa BaÅŸlÄ±ÄŸÄ± <span style="color: red;">*</span></label>
                    <input type="text" id="websitePageTitle" required placeholder="Ã–rn: HakkÄ±mÄ±zda">
                </div>
                <div class="form-group">
                    <label>Slug (URL KÄ±smÄ±) <span style="color: red;">*</span></label>
                    <input type="text" id="pageSlug" required pattern="[a-z0-9-]+" placeholder="hakkimizda">
                    <small style="color:var(--secondary);">Sadece kÃ¼Ã§Ã¼k harf, rakam ve tire. Ã–rn: hakkimizda,
                        iletisim</small>
                </div>
                <div class="form-group">
                    <label>Ä°Ã§erik</label>
                    <textarea id="pageContent" rows="12" style="font-size: 0.95rem;"
                        placeholder="Sayfa iÃ§eriÄŸinizi buraya yazÄ±n..."></textarea>
                </div>
                <div class="form-group" style="background: #f8fafc; padding: 0.75rem; border-radius: 8px;">
                    <label style="display: flex; align-items: center; gap: 8px; cursor: pointer; margin: 0;">
                        <input type="checkbox" id="pagePublished" style="width: 18px; height: 18px;" checked>
                        <span>YayÄ±nda</span>
                    </label>
                </div>
                <div style="display:flex; gap:10px; justify-content:flex-end; margin-top:1.5rem;">
                    <button type="button" onclick="document.getElementById('pageModal').style.display='none'"
                        class="btn" style="background:#f1f5f9; color:#333;">Ä°ptal</button>
                    <button type="submit" class="btn btn-primary">Kaydet</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Randevu Red Modal -->
    <div id="rejectReasonModal" class="modal-overlay" style="display:none;">
        <div class="modal-content card" style="max-width: 450px;">
            <h2 style="margin-bottom:1rem; color: #ef4444;">
                <i class="fa-solid fa-ban"></i> Randevu Reddi
            </h2>
            <form id="rejectReasonForm">
                <input type="hidden" id="rejectSlotId">
                <div style="background: #fef2f2; padding: 12px; border-radius: 8px; margin-bottom: 1rem;">
                    <p style="margin: 0; color: #991b1b; font-size: 0.9rem;">
                        <i class="fa-solid fa-exclamation-triangle"></i>
                        Bu randevuyu reddettiÄŸinizde slot tekrar "mÃ¼sait" hale gelecektir.
                    </p>
                </div>
                <div class="form-group">
                    <label>Red Sebebi (Opsiyonel)</label>
                    <textarea id="rejectReason" rows="3" placeholder="MÃ¼ÅŸteriye iletilecek red sebebi..."></textarea>
                </div>
                <div style="display:flex; gap:1rem; margin-top:1rem;">
                    <button type="button" onclick="closeRejectModal()" class="btn"
                        style="background:#f1f5f9; color:var(--dark);">Ä°ptal</button>
                    <button type="submit" class="btn" style="flex:1; background: #ef4444; color: white;">
                        <i class="fa-solid fa-ban"></i> Reddet
                    </button>
                </div>
            </form>
        </div>
    </div>

    <script src="subscription-warning.js"></script>

    <!-- PWA Service Worker Registration -->
    <script>
        // Register Service Worker for PWA
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('/sw.js')
                    .then((registration) => {
                        console.log('âœ… Service Worker registered:', registration.scope);
                    })
                    .catch((error) => {
                        console.log('âŒ Service Worker registration failed:', error);
                    });
            });
        }
    </script>
</body>

</html>