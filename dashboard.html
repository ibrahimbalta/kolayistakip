<!DOCTYPE html>
<html lang="tr">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Kolay İş Takip - Panel</title>

    <!-- PWA Meta Tags -->
    <meta name="theme-color" content="#6366f1" />
    <meta name="description" content="KOBİ'ler için iş takip ve CRM çözümü" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
    <meta name="apple-mobile-web-app-title" content="KolayTakip" />
    <link rel="manifest" href="/manifest.json" />
    <link rel="apple-touch-icon" href="/icons/icon-192x192.png" />

    <link rel="stylesheet" href="dashboard.css" />
    <link rel="stylesheet" href="task-list-scroll.css" />
    <link rel="stylesheet" href="dashboard-mobile.css" />
    <link rel="stylesheet" href="subscription-warning.css" />
    <!-- Font Awesome for icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" />
    <!-- Chart.js for advanced charts -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
    <!-- jsPDF for PDF export -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.8.2/jspdf.plugin.autotable.min.js"></script>
    <!-- SheetJS for Excel export -->
    <script src="https://cdn.sheetjs.com/xlsx-0.20.1/package/dist/xlsx.full.min.js"></script>

    <link href='https://cdn.jsdelivr.net/npm/fullcalendar@6.1.10/index.global.min.css' rel='stylesheet' />

</head>

<body>
    <div class="dashboard-layout">
        <!-- Sidebar -->
        <aside class="sidebar">
            <div class="sidebar-header">
                <div class="logo">
                    <i class="fa-solid fa-layer-group"></i>
                    Kolay İş Takip
                </div>
            </div>
            <div class="user-profile">
                <div class="user-avatar">
                    <i class="fa-solid fa-user"></i>
                </div>
                <div class="user-info">
                    <div id="userNameDisplay" class="user-name">Kullanıcı</div>
                    <div class="user-role">Yönetici</div>
                </div>
            </div>
            <nav class="menu">
                <a href="#" class="menu-item active" onclick="switchView('dashboard')">
                    <i class="fa-solid fa-chart-line"></i> Genel Durum
                </a>
                <a href="#" class="menu-item" onclick="switchView('tasks')">
                    <i class="fa-solid fa-list-check"></i> İş Listesi
                </a>
                <a href="#" class="menu-item" onclick="switchView('appointments')">
                    <i class="fa-solid fa-calendar-check"></i> Randevular
                </a>
                <a href="#" class="menu-item" onclick="switchView('proposals')">
                    <i class="fa-solid fa-file-invoice-dollar"></i> Teklifler
                </a>
                <a href="#" class="menu-item" onclick="switchView('reservations')">
                    <i class="fa-solid fa-calendar-days"></i> Rezervasyonlar
                </a>
                <a href="#" class="menu-item" onclick="switchView('customers')">
                    <i class="fa-solid fa-user-group"></i> Müşteriler
                </a>
                <a href="#" class="menu-item" onclick="switchView('employees')">
                    <i class="fa-solid fa-users"></i> Çalışanlar
                </a>
                <a href="#" class="menu-item" onclick="switchView('reports')">
                    <i class="fa-solid fa-chart-pie"></i> Raporlar
                </a>
                <a href="#" class="menu-item" onclick="switchView('website')">
                    <i class="fa-solid fa-globe"></i> Website
                </a>
                <a href="#" class="menu-item" onclick="switchView('settings')">
                    <i class="fa-solid fa-gear"></i> Ayarlar
                </a>
            </nav>
            <button onclick="Auth.logout()" class="logout-btn">
                <i class="fa-solid fa-right-from-bracket"></i> Çıkış Yap
            </button>
        </aside>

        <!-- Main Content -->
        <main class="main-content">
            <header class="header-bar">
                <div class="page-title">
                    <h1 id="pageTitle">Panel</h1>
                    <p id="pageSubtitle">Bugünün işlerini organize et.</p>
                </div>
                <div id="trialBadge" class="trial-badge">
                    <i class="fa-regular fa-clock"></i> Deneme Sürümü
                </div>
            </header>

            <!-- VIEW: DASHBOARD (GENEL DURUM) -->
            <section id="view-dashboard" class="view-section">
                <!-- Statistics Cards -->
                <div class="dashboard-stats-grid"
                    style="display: grid; grid-template-columns: repeat(5, 1fr); gap: 0.75rem; margin-bottom: 2rem;">
                    <!-- Active Tasks Card -->
                    <div class="stat-card-dash"
                        style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; padding: 1rem; border-radius: 10px; box-shadow: 0 4px 6px rgba(0,0,0,0.1);">
                        <div
                            style="display: flex; justify-content: space-between; align-items: start; margin-bottom: 0.25rem;">
                            <div>
                                <div style="font-size: 0.75rem; opacity: 0.9; margin-bottom: 0.25rem;">Aktif İş Sayısı
                                </div>
                                <div id="dashActiveTasks" style="font-size: 1.8rem; font-weight: 700;">0</div>
                            </div>
                            <div style="background: rgba(255,255,255,0.2); padding: 8px; border-radius: 8px;">
                                <i class="fa-solid fa-briefcase" style="font-size: 1.2rem;"></i>
                            </div>
                        </div>
                        <div id="dashActiveTasksChange" style="font-size: 0.7rem; opacity: 0.8;">
                            <i class="fa-solid fa-arrow-up"></i> %15 Artış (Geçen Hafta)
                        </div>
                    </div>

                    <!-- Pending Proposals Value Card -->
                    <div class="stat-card-dash"
                        style="background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%); color: white; padding: 1rem; border-radius: 10px; box-shadow: 0 4px 6px rgba(0,0,0,0.1);">
                        <div
                            style="display: flex; justify-content: space-between; align-items: start; margin-bottom: 0.25rem;">
                            <div>
                                <div style="font-size: 0.75rem; opacity: 0.9; margin-bottom: 0.25rem;">Bekleyen Teklif
                                    Değeri</div>
                                <div id="dashPendingValue" style="font-size: 1.8rem; font-weight: 700;">₺0</div>
                            </div>
                            <div style="background: rgba(255,255,255,0.2); padding: 8px; border-radius: 8px;">
                                <i class="fa-solid fa-file-invoice-dollar" style="font-size: 1.2rem;"></i>
                            </div>
                        </div>
                        <div id="dashPendingCount" style="font-size: 0.7rem; opacity: 0.8;">
                            0 Adet Bekleyen Teklif
                        </div>
                    </div>

                    <!-- New Customers (Last 30 Days) Card -->
                    <div class="stat-card-dash"
                        style="background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%); color: white; padding: 1rem; border-radius: 10px; box-shadow: 0 4px 6px rgba(0,0,0,0.1);">
                        <div
                            style="display: flex; justify-content: space-between; align-items: start; margin-bottom: 0.25rem;">
                            <div>
                                <div style="font-size: 0.75rem; opacity: 0.9; margin-bottom: 0.25rem;">Yeni Müşteri (Son
                                    30 Gün)</div>
                                <div id="dashNewCustomers" style="font-size: 1.8rem; font-weight: 700;">0</div>
                            </div>
                            <div style="background: rgba(255,255,255,0.2); padding: 8px; border-radius: 8px;">
                                <i class="fa-solid fa-user-plus" style="font-size: 1.2rem;"></i>
                            </div>
                        </div>
                        <div id="dashTotalCustomers" style="font-size: 0.7rem; opacity: 0.8;">
                            Toplam: 0 Müşteri
                        </div>
                    </div>

                    <!-- Today's Appointments Card -->
                    <div class="stat-card-dash"
                        style="background: linear-gradient(135deg, #43e97b 0%, #38f9d7 100%); color: white; padding: 1rem; border-radius: 10px; box-shadow: 0 4px 6px rgba(0,0,0,0.1);">
                        <div
                            style="display: flex; justify-content: space-between; align-items: start; margin-bottom: 0.25rem;">
                            <div>
                                <div style="font-size: 0.75rem; opacity: 0.9; margin-bottom: 0.25rem;">Bugünkü Randevu
                                    Sayısı</div>
                                <div id="dashTodayAppointments" style="font-size: 1.8rem; font-weight: 700;">0</div>
                            </div>
                            <div style="background: rgba(255,255,255,0.2); padding: 8px; border-radius: 8px;">
                                <i class="fa-solid fa-calendar-check" style="font-size: 1.2rem;"></i>
                            </div>
                        </div>
                        <div style="font-size: 0.7rem; opacity: 0.8;">
                            Müsait ve Rezerve
                        </div>
                    </div>

                    <!-- Today's Reservations Card -->
                    <div class="stat-card-dash"
                        style="background: linear-gradient(135deg, #fa709a 0%, #fee140 100%); color: white; padding: 1rem; border-radius: 10px; box-shadow: 0 4px 6px rgba(0,0,0,0.1);">
                        <div
                            style="display: flex; justify-content: space-between; align-items: start; margin-bottom: 0.25rem;">
                            <div>
                                <div style="font-size: 0.75rem; opacity: 0.9; margin-bottom: 0.25rem;">Bugünkü
                                    Rezervasyon</div>
                                <div id="dashTodayReservationCount" style="font-size: 1.8rem; font-weight: 700;">0</div>
                            </div>
                            <div style="background: rgba(255,255,255,0.2); padding: 8px; border-radius: 8px;">
                                <i class="fa-solid fa-calendar-days" style="font-size: 1.2rem;"></i>
                            </div>
                        </div>
                        <div style="font-size: 0.7rem; opacity: 0.8;">
                            Rezerve Alanlar
                        </div>
                    </div>
                </div>

                <!-- Charts and Tables Grid -->
                <div
                    style="display: grid; grid-template-columns: repeat(auto-fit, minmax(450px, 1fr)); gap: 1.5rem; margin-bottom: 1.5rem;">
                    <!-- Recent Activity / Priority Tasks -->
                    <div class="card">
                        <h2 style="margin-bottom: 1rem;"><i class="fa-solid fa-exclamation-circle"
                                style="color: var(--warning);"></i> Öncelikli İşler</h2>
                        <div id="dashPriorityTasks" style="max-height: 400px; overflow-y: auto;">
                            <div style="text-align: center; padding: 2rem; color: var(--secondary);">
                                <i class="fa-solid fa-tasks"
                                    style="font-size: 2rem; opacity: 0.3; margin-bottom: 0.5rem;"></i>
                                <p>Henüz öncelikli iş yok.</p>
                            </div>
                        </div>
                    </div>

                    <!-- Today's Schedule -->
                    <div class="card">
                        <h2 style="margin-bottom: 1rem;"><i class="fa-solid fa-calendar-day"
                                style="color: var(--primary);"></i> Bugünkü Ajanda</h2>
                        <div id="dashTodaySchedule" style="max-height: 400px; overflow-y: auto;">
                            <div style="text-align: center; padding: 2rem; color: var(--secondary);">
                                <i class="fa-solid fa-calendar-xmark"
                                    style="font-size: 2rem; opacity: 0.3; margin-bottom: 0.5rem;"></i>
                                <p>Bugün için randevu/rezervasyon yok.</p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Quick Actions -->
                <div class="card">
                    <h2 style="margin-bottom: 1rem;"><i class="fa-solid fa-bolt" style="color: var(--warning);"></i>
                        Hızlı İşlemler</h2>
                    <div style="display: grid; grid-template-columns: repeat(5, 1fr); gap: 0.5rem;">
                        <button onclick="switchView('tasks')" class="btn"
                            style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; padding: 0.75rem 0.5rem; justify-content: center; gap: 0.3rem; font-size: 0.85rem;">
                            <i class="fa-solid fa-plus"></i> Yeni İş Ekle
                        </button>
                        <button onclick="switchView('appointments')" class="btn"
                            style="background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%); color: white; padding: 0.75rem 0.5rem; justify-content: center; gap: 0.3rem; font-size: 0.85rem;">
                            <i class="fa-solid fa-calendar-plus"></i> Randevu Oluştur
                        </button>
                        <button onclick="switchView('proposals')" class="btn"
                            style="background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%); color: white; padding: 0.75rem 0.5rem; justify-content: center; gap: 0.3rem; font-size: 0.85rem;">
                            <i class="fa-solid fa-file-invoice"></i> Teklif Hazırla
                        </button>
                        <button onclick="switchView('customers')" class="btn"
                            style="background: linear-gradient(135deg, #43e97b 0%, #38f9d7 100%); color: white; padding: 0.75rem 0.5rem; justify-content: center; gap: 0.3rem; font-size: 0.85rem;">
                            <i class="fa-solid fa-user-plus"></i> Müşteri Ekle
                        </button>
                        <button onclick="switchView('reservations')" class="btn"
                            style="background: linear-gradient(135deg, #fa709a 0%, #fee140 100%); color: white; padding: 0.75rem 0.5rem; justify-content: center; gap: 0.3rem; font-size: 0.85rem;">
                            <i class="fa-solid fa-calendar-days"></i> Rezervasyon Ekle
                        </button>
                    </div>
                </div>
            </section>

            <!-- VIEW: TASKS -->
            <section id="view-tasks" class="view-section" style="display:none;">
                <div class="task-stats">
                    <div class="stat-card">
                        <div class="stat-number" id="totalTasks">0</div>
                        <div class="stat-label">Toplam İş</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number" id="pendingTasks" style="color:var(--warning);">0</div>
                        <div class="stat-label">Bekleyen</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number" id="completedTasks" style="color:var(--success);">0</div>
                        <div class="stat-label">Tamamlanan</div>
                    </div>
                </div>
                <div class="content-grid">
                    <!-- Add Task Form -->
                    <div class="card">
                        <h2><i class="fa-solid fa-plus-circle" style="color: var(--primary);"></i> Yeni İş Ekle</h2>
                        <form id="taskForm">
                            <div class="form-group">
                                <label for="taskDesc">Yapılacak İş</label>
                                <textarea id="taskDesc" placeholder="Örn: Müşteri X'in siparişini hazırla..." required
                                    style="min-height:100px; resize:vertical;"></textarea>
                            </div>
                            <div class="form-group">
                                <label for="customerSelect">Müşteri Seç (Opsiyonel)</label>
                                <select id="customerSelect">
                                    <option value="">Müşteri Seçin...</option>
                                </select>
                                <div style="margin-top:8px; font-size:0.85rem; color:var(--secondary);">
                                    Listede yok mu? <a href="#" onclick="switchView('customers')"
                                        style="color:var(--primary); font-weight:600;">Yeni Müşteri Ekle</a>
                                </div>
                            </div>
                            <div class="form-group">
                                <label for="departmentFilter">Departman Seç</label>
                                <select id="departmentFilter">
                                    <option value="">Tüm Departmanlar</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="employeeSelect">Çalışan Seç</label>
                                <select id="employeeSelect" required>
                                    <option value="">Çalışan Seçin...</option>
                                </select>
                                <div style="margin-top:8px; font-size:0.85rem; color:var(--secondary);">
                                    Listede yok mu? <a href="#" onclick="switchView('employees')"
                                        style="color:var(--primary); font-weight:600;">Yeni Çalışan Ekle</a>
                                </div>
                            </div>
                            <div class="form-group">
                                <label for="taskDeadline">Termin Tarihi (Opsiyonel)</label>
                                <input type="date" id="taskDeadline" placeholder="gg.aa.yyyy" />
                            </div>
                            <button type="submit" class="btn btn-primary" style="width:100%; margin-top:1rem;">
                                <i class="fa-solid fa-paper-plane"></i> İşi Ata ve Gönder
                            </button>
                        </form>
                    </div>
                    <!-- Task List -->
                    <div class="card">
                        <div
                            style="display:flex; justify-content:space-between; align-items:center; margin-bottom:1.5rem;">
                            <h2><i class="fa-solid fa-list-ul" style="color: var(--primary);"></i> Görevler</h2>
                            <div class="filter-buttons">
                                <button class="filter-btn active" data-filter="all">Tümü</button>
                                <button class="filter-btn" data-filter="pending">Bekleyen</button>
                                <button class="filter-btn" data-filter="completed">Tamamlanan</button>
                            </div>
                        </div>
                        <!-- Task Search Bar -->
                        <div style="margin-bottom: 1.5rem;">
                            <div style="position: relative;">
                                <i class="fa-solid fa-search"
                                    style="position: absolute; left: 12px; top: 50%; transform: translateY(-50%); color: var(--secondary); font-size: 0.9rem;"></i>
                                <input type="text" id="taskSearchInput"
                                    placeholder="Görev ara (açıklama, çalışan adı, müşteri...)..."
                                    oninput="filterTasks()"
                                    style="width: 100%; padding: 10px 10px 10px 38px; border: 1px solid var(--border-color); border-radius: 8px; font-size: 0.95rem;" />
                            </div>
                        </div>
                        <div id="taskList" class="task-list">
                            <div class="empty-state" style="text-align:center; padding:3rem 0; color:var(--secondary);">
                                <i class="fa-solid fa-clipboard-list"
                                    style="font-size:3rem; margin-bottom:1rem; opacity:0.3;"></i>
                                <p>Henüz kayıtlı iş yok.</p>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
            <!-- VIEW: APPOINTMENTS -->
            <section id="view-appointments" class="view-section" style="display:none;">
                <!-- Stats -->
                <div class="task-stats">
                    <div class="stat-card">
                        <div class="stat-number" id="totalSlots">0</div>
                        <div class="stat-label">Toplam Slot</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number" id="availableSlots" style="color:var(--success);">0</div>
                        <div class="stat-label">Müsait</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number" id="reservedSlots" style="color:var(--primary);">0</div>
                        <div class="stat-label">Onaylı</div>
                    </div>
                    <div class="stat-card"
                        style="background: linear-gradient(135deg, #eab308 0%, #f59e0b 100%); color: white;">
                        <div class="stat-number" id="pendingApprovals" style="color: white;">0</div>
                        <div class="stat-label" style="color: rgba(255,255,255,0.9);">Bekleyen Onay</div>
                    </div>
                    <div class="stat-card"
                        style="background: linear-gradient(135deg, #f59e0b 0%, #f97316 100%); color: white;">
                        <div class="stat-number" id="pendingReminders" style="color: white;">0</div>
                        <div class="stat-label" style="color: rgba(255,255,255,0.9);">Hatırlatılacak</div>
                    </div>
                </div>


                <!-- Bekleyen Onaylar Panel -->
                <div class="card" id="pendingApprovalsPanel"
                    style="margin-bottom: 1.5rem; border-left: 4px solid #eab308;">
                    <div
                        style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1rem;">
                        <h2 style="margin: 0;">
                            <i class="fa-solid fa-clock-rotate-left" style="color: #eab308;"></i>
                            Bekleyen Randevu Onayları
                        </h2>
                    </div>
                    <div id="pendingApprovalsList" style="max-height: 350px; overflow-y: auto;">
                        <div style="text-align: center; padding: 2rem; color: var(--secondary);">
                            <i class="fa-solid fa-hourglass-half"
                                style="font-size: 2rem; opacity: 0.3; margin-bottom: 0.5rem;"></i>
                            <p>Bekleyen randevu onayı yok.</p>
                        </div>
                    </div>
                </div>

                <!-- WhatsApp Reminder Panel -->
                <div class="card" id="reminderPanel" style="margin-bottom: 1.5rem; border-left: 4px solid #25D366;">
                    <div
                        style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1rem;">
                        <h2 style="margin: 0;">
                            <i class="fa-solid fa-bell" style="color: #f59e0b;"></i>
                            Yarınki Randevular - Hatırlatma
                        </h2>
                        <button onclick="sendAllReminders()" class="btn" style="background: #25D366; color: white;">
                            <i class="fa-brands fa-whatsapp"></i> Tümüne Gönder
                        </button>
                    </div>
                    <div id="reminderList" style="max-height: 300px; overflow-y: auto;">
                        <div style="text-align: center; padding: 2rem; color: var(--secondary);">
                            <i class="fa-solid fa-calendar-check"
                                style="font-size: 2rem; opacity: 0.3; margin-bottom: 0.5rem;"></i>
                            <p>Yarın için randevu yok veya yükleniyor...</p>
                        </div>
                    </div>
                </div>
                <div class="content-grid">
                    <!-- Calendar -->
                    <div class="card" style="grid-column: 1 / -1;">
                        <div
                            style="display:flex; justify-content:space-between; align-items:center; margin-bottom:1.5rem;">
                            <h2><i class="fa-solid fa-calendar-days" style="color: var(--primary);"></i> Randevu Takvimi
                            </h2>
                            <div style="display: flex; gap: 10px;">
                                <button onclick="shareViaWhatsApp()" class="btn btn-primary">
                                    <i class="fa-brands fa-whatsapp"></i> WhatsApp ile Paylaş
                                </button>
                            </div>
                        </div>

                        <!-- Share Link -->
                        <div style="margin-bottom: 20px; display: flex; gap: 10px;">
                            <input type="text" id="shareLink" readonly
                                style="flex: 1; padding: 10px; border: 1px solid var(--border-color); border-radius: 8px; background: #f9fafb;"
                                placeholder="Takvim yükleniyor...">
                            <button onclick="copyShareLink()" class="btn"
                                style="background: var(--primary); color: white;">
                                <i class="fa-solid fa-copy"></i> Kopyala
                            </button>
                        </div>
                        <!-- Calendar Container -->
                        <div id="appointmentCalendar">
                            <div id="calendarLoading"
                                style="display: flex; flex-direction: column; align-items: center; justify-content: center; padding: 3rem; background: #f8fafc; border-radius: 12px; border: 2px dashed #e2e8f0;">
                                <div
                                    style="width: 48px; height: 48px; border: 4px solid #e2e8f0; border-top-color: var(--primary); border-radius: 50%; animation: spin 1s linear infinite; margin-bottom: 1rem;">
                                </div>
                                <p style="margin: 0; color: var(--secondary); font-weight: 500;">Takvim yükleniyor...
                                </p>
                                <p style="margin: 0.5rem 0 0; color: #94a3b8; font-size: 0.85rem;">Randevular
                                    hazırlanıyor</p>
                            </div>
                            <style>
                                @keyframes spin {
                                    to {
                                        transform: rotate(360deg);
                                    }
                                }
                            </style>
                        </div>

                        <div style="margin-top: 20px; padding: 15px; background: #f9fafb; border-radius: 8px;">
                            <p style="margin: 0 0 10px 0; color: var(--secondary); font-size: 0.9rem;">
                                <i class="fa-solid fa-info-circle"></i>
                                <strong>Kullanım:</strong> Takvimde bir zaman dilimi seçerek müsait saat ekleyin.
                                Randevulara tıklayarak detayları görebilirsiniz.
                            </p>
                            <div style="display: flex; flex-wrap: wrap; gap: 15px; font-size: 0.85rem;">
                                <span><span
                                        style="display:inline-block; width:12px; height:12px; background:#10b981; border-radius:3px; margin-right:5px;"></span>
                                    Müsait</span>
                                <span><span
                                        style="display:inline-block; width:12px; height:12px; background:#f59e0b; border-radius:3px; margin-right:5px;"></span>
                                    Onay Bekliyor</span>
                                <span><span
                                        style="display:inline-block; width:12px; height:12px; background:#667eea; border-radius:3px; margin-right:5px;"></span>
                                    Onaylandı</span>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- VIEW: PROPOSALS -->
            <section id="view-proposals" class="view-section" style="display:none;">
                <div class="task-stats">
                    <div class="stat-card">
                        <div class="stat-number" id="totalProposals">0</div>
                        <div class="stat-label">Toplam Teklif</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number" id="approvedProposals" style="color:var(--success);">0</div>
                        <div class="stat-label">Onaylanan</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number" id="pendingProposals" style="color:var(--warning);">0</div>
                        <div class="stat-label">Bekleyen</div>
                    </div>
                </div>
                <div class="content-grid">
                    <div class="card">
                        <div
                            style="display:flex; justify-content:space-between; align-items:center; margin-bottom:2rem;">
                            <h2><i class="fa-solid fa-file-invoice-dollar" style="color: var(--primary);"></i> Teklifler
                            </h2>
                            <button onclick="openProposalModal()" class="btn btn-primary">
                                <i class="fa-solid fa-plus"></i> Yeni Teklif
                            </button>
                        </div>
                        <div class="table-responsive">
                            <table class="data-table">
                                <thead>
                                    <tr>
                                        <th>Müşteri</th>
                                        <th>Başlık</th>
                                        <th>Tutar</th>
                                        <th>Durum</th>
                                        <th>Tarih</th>
                                        <th>İşlemler</th>
                                    </tr>
                                </thead>
                                <tbody id="proposalListBody">
                                    <tr>
                                        <td colspan="6" style="text-align:center; color:var(--secondary);">Henüz teklif
                                            yok.</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </section>

            <!-- VIEW: CUSTOMERS -->
            <section id="view-customers" class="view-section" style="display:none;">
                <div class="card">
                    <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:2rem;">
                        <h2><i class="fa-solid fa-user-group" style="color: var(--primary);"></i> Müşteri Listesi</h2>
                        <div style="display: flex; gap: 0.75rem;">
                            <button onclick="exportCustomersToExcel()" class="btn"
                                style="background: #10b981; color: white;">
                                <i class="fa-solid fa-file-excel"></i> Excel İndir
                            </button>
                            <button onclick="exportCustomersToPDF()" class="btn"
                                style="background: #ef4444; color: white;">
                                <i class="fa-solid fa-file-pdf"></i> PDF İndir
                            </button>
                            <button onclick="showAddCustomerModal()" class="btn btn-primary">
                                <i class="fa-solid fa-plus"></i> Yeni Müşteri
                            </button>
                        </div>
                    </div>
                    <!-- Customer Search Bar -->
                    <div style="margin-bottom: 1.5rem;">
                        <div style="position: relative;">
                            <i class="fa-solid fa-search"
                                style="position: absolute; left: 12px; top: 50%; transform: translateY(-50%); color: var(--secondary); font-size: 0.9rem;"></i>
                            <input type="text" id="customerSearchInput"
                                placeholder="Müşteri ara (isim, email, telefon, sektör...)" oninput="filterCustomers()"
                                style="width: 100%; padding: 10px 10px 10px 38px; border: 1px solid var(--border-color); border-radius: 8px; font-size: 0.95rem;" />
                        </div>
                    </div>
                    <div id="customerCardsGrid"
                        style="display: grid; grid-template-columns: repeat(auto-fill, minmax(240px, 1fr)); gap: 1rem;">
                        <!-- Customer cards will be rendered here -->
                        <div style="grid-column: 1 / -1; text-align:center; padding:3rem 0; color:var(--secondary);">
                            <i class="fa-solid fa-user-group"
                                style="font-size:3rem; margin-bottom:1rem; opacity:0.3;"></i>
                            <p>Henüz müşteri eklenmemiş.</p>
                        </div>
                    </div>
                </div>
            </section>

            <!-- VIEW: EMPLOYEES -->
            <section id="view-employees" class="view-section" style="display:none;">
                <div class="card">
                    <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:2rem;">
                        <h2><i class="fa-solid fa-users" style="color: var(--primary);"></i> Çalışan Listesi</h2>
                        <button onclick="showAddEmployeeModal()" class="btn btn-primary">
                            <i class="fa-solid fa-plus"></i> Yeni Çalışan
                        </button>
                    </div>
                    <div class="table-responsive">
                        <table class="data-table">
                            <thead>
                                <tr>
                                    <th>Ad Soyad</th>
                                    <th>Telefon</th>
                                    <th>Aktif Görevler</th>
                                    <th>Departman</th>
                                    <th>İşlem</th>
                                </tr>
                            </thead>
                            <tbody id="employeeListBody">
                                <tr>
                                    <td colspan="5" style="text-align:center; color:var(--secondary);">Henüz çalışan
                                        eklenmemiş.</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </section>

            <!-- VIEW: RESERVATIONS -->
            <section id="view-reservations" class="view-section" style="display:none;">
                <!-- Reservation Stats -->
                <div class="task-stats">
                    <div class="stat-card">
                        <div class="stat-number" id="totalAreas">0</div>
                        <div class="stat-label">Toplam Alan</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number" id="availableAreas" style="color:var(--success);">0</div>
                        <div class="stat-label">Müsait Alan</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number" id="reservedAreas" style="color:var(--danger);">0</div>
                        <div class="stat-label">Dolu Alan</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number" id="optionalAreas" style="color:var(--warning);">0</div>
                        <div class="stat-label">Opsiyonlu Alan</div>
                    </div>
                </div>

                <!-- Compact Horizontal Form -->
                <div class="card" style="margin-bottom: 1.5rem;">
                    <h2 style="margin-bottom: 1.25rem;"><i class="fa-solid fa-plus-circle"
                            style="color: var(--primary);"></i> Yeni Alan Tanımlama</h2>
                    <form id="reservationForm">
                        <input type="hidden" id="editReservationId">

                        <!-- First Row: Main Fields -->
                        <div
                            style="display: grid; grid-template-columns: 150px 180px 200px 150px 1fr auto; gap: 12px; align-items: end; margin-bottom: 12px;">
                            <div class="form-group" style="margin-bottom: 0;">
                                <label for="alanNo" style="font-size: 0.75rem; margin-bottom: 4px;">Alan
                                    Kodu/Numarası</label>
                                <input type="text" id="alanNo" required placeholder="Örn: F301"
                                    style="padding: 10px 12px;">
                            </div>

                            <div class="form-group" style="margin-bottom: 0;">
                                <label for="alanTipi" style="font-size: 0.75rem; margin-bottom: 4px;">Alan Tipi</label>
                                <select id="alanTipi" required style="padding: 10px 12px;">
                                    <option value="stand">Fuar Standı</option>
                                    <option value="toplanti">Toplantı Odası</option>
                                    <option value="masa">Coworking Masası</option>
                                    <option value="kort">Spor Kortu/Saha</option>
                                    <option value="loca">Stadyum Locası</option>
                                </select>
                            </div>

                            <div class="form-group" style="margin-bottom: 0;">
                                <label for="alanBuyukluk" style="font-size: 0.75rem; margin-bottom: 4px;">Büyüklük /
                                    Kapasite</label>
                                <input type="text" id="alanBuyukluk" required placeholder="Örn: 24 m² veya 20 kişilik"
                                    style="padding: 10px 12px;">
                            </div>

                            <div class="form-group" style="margin-bottom: 0;">
                                <label for="fiyatMiktar" style="font-size: 0.75rem; margin-bottom: 4px;">Fiyat
                                    (₺)</label>
                                <div style="display: flex; align-items: center; gap: 0;">
                                    <span
                                        style="background: #f1f5f9; padding: 10px 12px; border: 1px solid var(--border); border-right: none; border-radius: 8px 0 0 8px; color: var(--primary); font-weight: 600;">₺</span>
                                    <input type="number" id="fiyatMiktar" min="0" step="0.01" required
                                        placeholder="0.00"
                                        style="padding: 10px 12px; border-radius: 0 8px 8px 0; flex: 1;">
                                </div>
                                <input type="hidden" id="paraBirimi" value="TRY">
                                <input type="hidden" id="fiyatTipi" value="tek_fiyat">
                            </div>

                            <div class="form-group" style="margin-bottom: 0;">
                                <label for="alanDurum" style="font-size: 0.75rem; margin-bottom: 4px;">Durum</label>
                                <select id="alanDurum" required style="padding: 10px 12px;">
                                    <option value="bos">Müsait</option>
                                    <option value="opsiyonda">Opsiyonda</option>
                                    <option value="rezerve">Dolu</option>
                                </select>
                            </div>

                            <button type="submit" class="btn btn-primary" id="reservationSubmitBtn"
                                style="padding: 10px 24px; white-space: nowrap;">
                                <i class="fa-solid fa-plus"></i> Tanımla
                            </button>
                        </div>

                        <!-- Second Row: Description + Action Buttons -->
                        <div style="display: flex; gap: 12px; align-items: end;">
                            <div class="form-group" style="margin-bottom: 0; flex: 1;">
                                <label for="alanAciklama" style="font-size: 0.75rem; margin-bottom: 4px;">Açıklama
                                    (Opsiyonel)</label>
                                <input type="text" id="alanAciklama" placeholder="Alan hakkında ek bilgiler, notlar..."
                                    style="padding: 10px 12px;">
                            </div>

                            <div style="display: flex; gap: 8px;">
                                <button type="button" class="btn"
                                    style="background: #8b5cf6; color: white; padding: 10px 14px;"
                                    onclick="openBulkCreateModal()" title="Toplu Alan Oluştur">
                                    <i class="fa-solid fa-layer-group"></i> Toplu
                                </button>
                                <button type="button" class="btn"
                                    style="background: #f1f5f9; color: #64748b; padding: 10px 14px;"
                                    onclick="document.getElementById('krokiFileInput').click()" title="Görsel Yükle">
                                    <i class="fa-solid fa-image"></i>
                                </button>
                                <input type="file" id="krokiFileInput" accept="image/*" style="display: none;"
                                    onchange="uploadKrokiImage(this)">
                                <button type="button" class="btn"
                                    style="background: #f1f5f9; color: #64748b; padding: 10px 14px;"
                                    onclick="shareReservations()" title="WhatsApp Paylaş">
                                    <i class="fa-solid fa-share-nodes"></i>
                                </button>
                            </div>
                        </div>

                        <!-- Hidden Reservation Info Section (for editing reserved areas) -->
                        <div id="reservationInfoSection"
                            style="display: none; border-top: 2px solid var(--border); padding-top: 1.5rem; margin-top: 1.5rem;">
                            <h3 style="color: var(--primary); margin-bottom: 1rem; font-size: 1rem;">
                                <i class="fa-solid fa-building"></i> Rezervasyon Bilgileri
                            </h3>
                            <div
                                style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 12px;">
                                <div class="form-group" style="margin-bottom: 0;">
                                    <label for="reservedCompany" style="font-size: 0.75rem;">Firma Ünvanı</label>
                                    <input type="text" id="reservedCompany" placeholder="Örn: ABC Tekstil Ltd. Şti."
                                        style="padding: 8px 12px;">
                                </div>
                                <div class="form-group" style="margin-bottom: 0;">
                                    <label for="reservedName" style="font-size: 0.75rem;">Yetkili Ad Soyad</label>
                                    <input type="text" id="reservedName" placeholder="Örn: Ahmet Yılmaz"
                                        style="padding: 8px 12px;">
                                </div>
                                <div class="form-group" style="margin-bottom: 0;">
                                    <label for="reservedPhone" style="font-size: 0.75rem;">Telefon</label>
                                    <input type="tel" id="reservedPhone" placeholder="(5XX) XXX XX XX"
                                        style="padding: 8px 12px;">
                                </div>
                                <div class="form-group" style="margin-bottom: 0;">
                                    <label for="reservedEmail" style="font-size: 0.75rem;">E-posta</label>
                                    <input type="email" id="reservedEmail" placeholder="ornek@firma.com"
                                        style="padding: 8px 12px;">
                                </div>
                            </div>
                            <div class="form-group" style="margin-top: 12px; margin-bottom: 0;">
                                <label for="reservedNotes" style="font-size: 0.75rem;">Özel İstekler / Notlar</label>
                                <textarea id="reservedNotes" rows="2" placeholder="Varsa özel istekler veya notlar..."
                                    style="padding: 8px 12px;"></textarea>
                            </div>
                        </div>
                    </form>
                </div>

                <!-- Reservation Cards Section -->
                <div>
                    <h2 style="margin-bottom: 1rem; font-weight: 600; color: var(--dark);"><i
                            class="fa-solid fa-th-large" style="color: var(--primary); margin-right: 8px;"></i>Tanımlı
                        Alanlar</h2>
                    <div id="reservationCardsGrid"
                        style="display: grid; grid-template-columns: repeat(auto-fill, minmax(280px, 1fr)); gap: 16px;">
                        <div
                            style="grid-column: 1/-1; text-align: center; padding: 60px 40px; color: var(--secondary); background: #f8fafc; border-radius: 12px; border: 2px dashed #e2e8f0;">
                            <i class="fa-solid fa-inbox"
                                style="font-size: 3rem; opacity: 0.3; margin-bottom: 1rem;"></i>
                            <p style="margin: 0;">Henüz alan eklenmemiş.</p>
                        </div>
                    </div>
                </div>
            </section>

            <!-- VIEW: REPORTS -->
            <section id="view-reports" class="view-section" style="display:none;">
                <!-- Export Toolbar -->
                <div class="export-toolbar">
                    <button onclick="exportToExcel()" class="btn btn-export">
                        <i class="fa-solid fa-file-excel"></i> Excel İndir
                    </button>
                    <button onclick="exportToPDF()" class="btn btn-export">
                        <i class="fa-solid fa-file-pdf"></i> PDF İndir
                    </button>
                </div>

                <!-- Performance Cards -->
                <div class="performance-cards-grid" id="performanceCards">
                    <!-- Will be populated by JavaScript -->
                </div>

                <!-- Charts Grid -->
                <div class="charts-grid">
                    <!-- Completion Rate Chart -->
                    <div class="card">
                        <h2><i class="fa-solid fa-chart-pie" style="color: var(--primary);"></i> Tamamlanma Oranı</h2>
                        <div class="chart-wrapper">
                            <canvas id="completionChart"></canvas>
                        </div>
                        <div id="completionStats" class="chart-stats"></div>
                    </div>

                    <!-- Productivity Trend Chart -->
                    <div class="card">
                        <h2><i class="fa-solid fa-chart-line" style="color: var(--success);"></i> Verimlilik Trendi (Son
                            7 Gün)</h2>
                        <div class="chart-wrapper">
                            <canvas id="productivityChart"></canvas>
                        </div>
                    </div>
                </div>

                <!-- Employee Performance Table -->
                <div class="card">
                    <h2 style="display: flex; align-items: center; gap: 10px;">
                        <i class="fa-solid fa-ranking-star" style="color: var(--warning);"></i>
                        Çalışan Performans Detayları
                        <i class="fa-solid fa-circle-info"
                            style="cursor: help; font-size: 0.9rem; color: var(--primary);" title="Performans Skoru Hesaplama:
• Tamamlanan Görev × 10 puan
• Tamamlanma Oranı × 0.5 puan  
• 5+ görev varsa +10 bonus
Seviyeler:
80-100: Mükemmel ⭐
60-79: İyi 👍
40-59: Orta 📊
0-39: Gelişmeli 📈"></i>
                    </h2>
                    <div class="table-responsive">
                        <table class="data-table analytics-table" id="performanceTable">
                            <thead>
                                <tr>
                                    <th>Çalışan</th>
                                    <th>Toplam Görev</th>
                                    <th>Tamamlanan</th>
                                    <th>Bekleyen</th>
                                    <th>Tamamlanma Oranı</th>
                                    <th>Performans Skoru</th>
                                </tr>
                            </thead>
                            <tbody id="performanceTableBody">
                                <tr>
                                    <td colspan="6" style="text-align:center; color:var(--secondary);">Henüz veri yok.
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </section>

            <!-- VIEW: SETTINGS -->
            <section id="view-settings" class="view-section" style="display:none;">
                <div class="card" style="max-width:600px; margin:0 auto;">
                    <h2><i class="fa-solid fa-gear" style="color: var(--secondary);"></i> Ayarlar</h2>
                    <form id="settingsForm">
                        <div class="form-group">
                            <label>Firma Adı</label>
                            <input type="text" id="settingCompanyName" />
                        </div>
                        <div class="form-group">
                            <label>Kullanıcı Adı</label>
                            <input type="text" id="settingEmail" disabled style="background:#f1f5f9;" />
                        </div>
                        <div class="form-group">
                            <label>Yeni Şifre (Değiştirmek için doldurun)</label>
                            <input type="password" id="settingNewPassword" placeholder="Yeni şifrenizi girin" />
                        </div>
                        <div class="form-group">
                            <label>Yeni Şifre Tekrar</label>
                            <input type="password" id="settingConfirmPassword"
                                placeholder="Yeni şifrenizi tekrar girin" />
                        </div>
                        <button type="submit" class="btn btn-primary">Kaydet</button>

                    </form>
                    </form>
                    <!-- Department Management Section -->
                    <hr style="margin:2rem 0; border:0; border-top:1px solid var(--border);" />
                    <div style="margin-bottom: 2rem;">
                        <h3 style="margin-bottom: 1rem; display: flex; align-items: center; gap: 10px;">
                            <i class="fa-solid fa-building" style="color: var(--primary);"></i>
                            Departman Yönetimi
                        </h3>
                        <div style="display: flex; gap: 10px; margin-bottom: 1rem;">
                            <input type="text" id="newDepartmentName" placeholder="Departman adı"
                                style="flex: 1; padding: 10px; border: 1px solid var(--border); border-radius: 8px;" />
                            <button onclick="addDepartment()" class="btn btn-primary">
                                <i class="fa-solid fa-plus"></i> Ekle
                            </button>
                        </div>
                        <div id="departmentList" style="display: flex; flex-direction: column; gap: 8px;">
                            <!-- Departments will be loaded here -->
                        </div>
                    </div>

                    <hr style="margin:2rem 0; border:0; border-top:1px solid var(--border);" />
                    <div style="background:#fef2f2; padding:1.5rem; border-radius:12px; border:1px solid #fecaca;">
                        <h3 style="color:#991b1b; font-size:1.1rem; margin-bottom:0.5rem;">Tehlikeli Bölge</h3>
                        <p style="color:#b91c1c; font-size:0.9rem; margin-bottom:1rem;">Tüm verilerinizi (görevler,
                            çalışanlar) kalıcı olarak siler.</p>
                        <button onclick="clearAllData()" class="btn btn-delete" style="width:auto;">Verileri
                            Sıfırla</button>
                    </div>
                </div>
            </section>

            <!-- VIEW: WEBSITE MANAGEMENT -->
            <section id="view-website" class="view-section" style="display:none;">
                <!-- Copy Link Button - aligned to right -->
                <div style="display: flex; justify-content: flex-end; margin-bottom: 1rem;">
                    <button id="copyWebsiteLinkBtn" onclick="copyWebsiteLink()" class="btn"
                        style="background: linear-gradient(135deg, #10b981 0%, #059669 100%); color: white; display: flex; align-items: center; gap: 8px; padding: 10px 16px; font-weight: 600; box-shadow: 0 4px 12px rgba(16, 185, 129, 0.3);">
                        <i class="fa-solid fa-link"></i>
                        <span>Website Linkini Kopyala</span>
                    </button>
                </div>

                <div class="task-stats">
                    <div class="stat-card">
                        <div class="stat-number" id="websiteStatus">-</div>
                        <div class="stat-label">Website Durumu</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number" id="websiteProductCount" style="color:var(--primary);">0</div>
                        <div class="stat-label">Ürünler</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number" id="websiteServiceCount" style="color:var(--success);">0</div>
                        <div class="stat-label">Hizmetler</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number" id="websiteTeamCount" style="color:var(--warning);">0</div>
                        <div class="stat-label">Ekip Üyeleri</div>
                    </div>
                </div>

                <!-- Website Management Tabs -->
                <div class="card" style="margin-bottom: 2rem;">
                    <div class="website-tabs"
                        style="display: flex; gap: 8px; flex-wrap: wrap; border-bottom: 2px solid #e2e8f0; padding-bottom: 1rem;">
                        <button class="website-tab active" data-tab="settings"
                            style="padding: 10px 18px; border: none; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; border-radius: 8px; cursor: pointer; font-weight: 600; display: flex; align-items: center; gap: 6px; transition: all 0.3s;">
                            <i class="fa-solid fa-gear"></i> Ayarlar
                        </button>
                        <button class="website-tab" data-tab="products"
                            style="padding: 10px 18px; border: 1px solid #e2e8f0; background: white; color: #64748b; border-radius: 8px; cursor: pointer; font-weight: 500; display: flex; align-items: center; gap: 6px; transition: all 0.3s;">
                            <i class="fa-solid fa-box"></i> Ürünler
                        </button>
                        <button class="website-tab" data-tab="services"
                            style="padding: 10px 18px; border: 1px solid #e2e8f0; background: white; color: #64748b; border-radius: 8px; cursor: pointer; font-weight: 500; display: flex; align-items: center; gap: 6px; transition: all 0.3s;">
                            <i class="fa-solid fa-briefcase"></i> Hizmetler
                        </button>
                        <button class="website-tab" data-tab="team"
                            style="padding: 10px 18px; border: 1px solid #e2e8f0; background: white; color: #64748b; border-radius: 8px; cursor: pointer; font-weight: 500; display: flex; align-items: center; gap: 6px; transition: all 0.3s;">
                            <i class="fa-solid fa-users"></i> Ekip
                        </button>
                        <button class="website-tab" data-tab="gallery"
                            style="padding: 10px 18px; border: 1px solid #e2e8f0; background: white; color: #64748b; border-radius: 8px; cursor: pointer; font-weight: 500; display: flex; align-items: center; gap: 6px; transition: all 0.3s;">
                            <i class="fa-solid fa-images"></i> Galeri
                        </button>
                        <button class="website-tab" data-tab="pages"
                            style="padding: 10px 18px; border: 1px solid #e2e8f0; background: white; color: #64748b; border-radius: 8px; cursor: pointer; font-weight: 500; display: flex; align-items: center; gap: 6px; transition: all 0.3s;">
                            <i class="fa-solid fa-file-lines"></i> Sayfalar
                        </button>
                        <button class="website-tab" data-tab="messages"
                            style="padding: 10px 18px; border: 1px solid #e2e8f0; background: white; color: #64748b; border-radius: 8px; cursor: pointer; font-weight: 500; display: flex; align-items: center; gap: 6px; transition: all 0.3s;">
                            <i class="fa-solid fa-envelope"></i> Mesajlar
                        </button>
                    </div>
                </div>

                <!-- Settings Tab Content -->
                <div id="website-tab-settings" class="website-tab-content">
                    <div class="card">
                        <h2><i class="fa-solid fa-gear" style="color: var(--primary);"></i> Website Ayarları</h2>
                        <form id="websiteSettingsForm">
                            <div class="form-group">
                                <label>Firma Adresi</label>
                                <div style="display: flex; gap: 10px; align-items: center;">
                                    <span style="color: var(--secondary); font-weight: 500;">kolayistakip.com/</span>
                                    <input type="text" id="websiteSubdomain" placeholder="firmaadi" pattern="[a-z0-9-]+"
                                        style="flex: 1;" />
                                    <button type="button" onclick="WebsiteManager.checkSubdomain()" class="btn"
                                        style="background: var(--primary); color: white;">
                                        <i class="fa-solid fa-check"></i> Kontrol Et
                                    </button>
                                </div>
                                <small style="color: var(--secondary);">Sadece küçük harf, rakam ve tire
                                    kullanın</small>
                            </div>

                            <div
                                style="display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 1rem;">
                                <div class="form-group">
                                    <label>Firma Adı</label>
                                    <input type="text" id="websiteCompanyName" placeholder="Firma Adınız" />
                                </div>

                                <div class="form-group">
                                    <label>Slogan</label>
                                    <input type="text" id="websiteSlogan"
                                        placeholder="Dijital Geleceğinizi Şekillendiriyoruz" />
                                </div>
                            </div>

                            <div class="form-group">
                                <label>Firma Açıklaması</label>
                                <textarea id="websiteDescription" rows="3"
                                    placeholder="Firmanız hakkında kısa açıklama..."></textarea>
                            </div>

                            <div class="form-group">
                                <label>Logo</label>
                                <div style="display: flex; gap: 10px; align-items: center;">
                                    <input type="file" id="websiteLogoFile" accept="image/*"
                                        onchange="WebsiteManager.uploadLogo(this)" style="display: none;" />
                                    <input type="text" id="websiteLogo" placeholder="Logo yükleyin veya URL girin"
                                        readonly style="flex: 1; background: #f8fafc;" />
                                    <button type="button" onclick="document.getElementById('websiteLogoFile').click()"
                                        class="btn"
                                        style="background: var(--primary); color: white; white-space: nowrap;">
                                        <i class="fa-solid fa-upload"></i> Yükle
                                    </button>
                                </div>
                                <div id="logoPreview" style="margin-top: 10px; display: none;">
                                    <img id="logoPreviewImg" src="" alt="Logo"
                                        style="max-height: 60px; border-radius: 8px; border: 1px solid var(--border);">
                                </div>
                            </div>

                            <div class="form-group">
                                <label>Hero Görseli</label>
                                <div style="display: flex; gap: 10px; align-items: center;">
                                    <input type="file" id="websiteHeroFile" accept="image/*"
                                        onchange="WebsiteManager.uploadHeroImage(this)" style="display: none;" />
                                    <input type="text" id="websiteHeroImage"
                                        placeholder="Hero görseli yükleyin veya URL girin" readonly
                                        style="flex: 1; background: #f8fafc;" />
                                    <button type="button" onclick="document.getElementById('websiteHeroFile').click()"
                                        class="btn"
                                        style="background: var(--primary); color: white; white-space: nowrap;">
                                        <i class="fa-solid fa-upload"></i> Yükle
                                    </button>
                                </div>
                                <div id="heroPreview" style="margin-top: 10px; display: none;">
                                    <img id="heroPreviewImg" src="" alt="Hero"
                                        style="max-width: 100%; max-height: 150px; border-radius: 8px; border: 1px solid var(--border);">
                                </div>
                            </div>

                            <div class="form-group">
                                <label><i class="fa-solid fa-panorama" style="color: var(--primary);"></i> Banner
                                    Görseli</label>
                                <div style="display: flex; gap: 10px; align-items: center;">
                                    <input type="file" id="websiteBannerFile" accept="image/*"
                                        onchange="WebsiteManager.uploadBannerImage(this)" style="display: none;" />
                                    <input type="text" id="websiteBanner" placeholder="Banner görseli yükleyin" readonly
                                        style="flex: 1; background: #f8fafc;" />
                                    <button type="button" onclick="document.getElementById('websiteBannerFile').click()"
                                        class="btn"
                                        style="background: var(--primary); color: white; white-space: nowrap;">
                                        <i class="fa-solid fa-upload"></i> Yükle
                                    </button>
                                </div>
                                <small style="color: var(--secondary); display: block; margin-top: 6px;">
                                    <i class="fa-solid fa-info-circle"></i> Önerilen boyut: <strong>1920 x 500
                                        piksel</strong> (otomatik boyutlandırılır)
                                </small>
                                <div id="bannerPreview" style="margin-top: 10px; display: none;">
                                    <img id="bannerPreviewImg" src="" alt="Banner"
                                        style="max-width: 100%; max-height: 120px; border-radius: 8px; border: 1px solid var(--border); object-fit: cover;">
                                </div>
                            </div>

                            <div
                                style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 1rem;">
                                <div class="form-group">
                                    <label>İletişim E-posta</label>
                                    <input type="email" id="websiteEmail" placeholder="info@firma.com" />
                                </div>

                                <div class="form-group">
                                    <label>Telefon</label>
                                    <input type="tel" id="websitePhone" placeholder="0XXX XXX XX XX" />
                                </div>

                                <div class="form-group">
                                    <label><i class="fa-brands fa-whatsapp" style="color: #25d366;"></i> WhatsApp
                                        Numarası</label>
                                    <input type="tel" id="websiteWhatsapp" placeholder="05XX XXX XX XX" />
                                    <small style="color: var(--secondary);">Boş bırakılırsa telefon numarası
                                        kullanılır</small>
                                </div>
                            </div>

                            <div class="form-group">
                                <label>Adres</label>
                                <textarea id="websiteAddress" rows="2" placeholder="Firma adresiniz..."></textarea>
                            </div>

                            <div
                                style="display: grid; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); gap: 1rem;">
                                <div class="form-group">
                                    <label>Ana Renk</label>
                                    <input type="color" id="websitePrimaryColor" value="#667eea"
                                        style="height: 45px; cursor: pointer;" />
                                </div>
                                <div class="form-group">
                                    <label>İkincil Renk</label>
                                    <input type="color" id="websiteSecondaryColor" value="#764ba2"
                                        style="height: 45px; cursor: pointer;" />
                                </div>
                                <div class="form-group">
                                    <label>Vurgu Rengi</label>
                                    <input type="color" id="websiteAccentColor" value="#22c55e"
                                        style="height: 45px; cursor: pointer;" />
                                </div>
                            </div>

                            <!-- Randevu ve Rezervasyon Linkleri -->
                            <div
                                style="background: #f0fdf4; padding: 1rem; border-radius: 8px; margin-top: 1.5rem; border: 1px solid #bbf7d0;">
                                <h4 style="margin-bottom: 1rem; color: #166534; font-size: 1rem;">
                                    <i class="fa-solid fa-link"></i> Hızlı Erişim Linkleri
                                </h4>
                                <div
                                    style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 1rem;">
                                    <div class="form-group" style="margin-bottom: 0;">
                                        <label><i class="fa-solid fa-calendar-check" style="color: #8b5cf6;"></i>
                                            Randevu Linki</label>
                                        <input type="url" id="websiteAppointmentLink"
                                            placeholder="https://kolayistakip.vercel.app/randevu.html?calendar_id=..." />
                                        <small style="color: var(--secondary);">Randevu modülünden paylaşım linkini
                                            yapıştırın</small>
                                    </div>
                                    <div class="form-group" style="margin-bottom: 0;">
                                        <label><i class="fa-solid fa-calendar-days" style="color: #10b981;"></i>
                                            Rezervasyon Linki</label>
                                        <input type="url" id="websiteReservationLink"
                                            placeholder="https://kolayistakip.vercel.app/alan-rezervasyon.html?user_id=..." />
                                        <small style="color: var(--secondary);">Rezervasyon modülünden paylaşım linkini
                                            yapıştırın</small>
                                    </div>
                                </div>
                            </div>

                            <!-- Sosyal Medya Linkleri -->
                            <div
                                style="background: #eff6ff; padding: 1rem; border-radius: 8px; margin-top: 1.5rem; border: 1px solid #bfdbfe;">
                                <h4 style="margin-bottom: 1rem; color: #1e40af; font-size: 1rem;">
                                    <i class="fa-solid fa-share-nodes"></i> Sosyal Medya Linkleri
                                </h4>
                                <div
                                    style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 1rem;">
                                    <div class="form-group" style="margin-bottom: 0;">
                                        <label><i class="fa-brands fa-facebook" style="color: #1877f2;"></i>
                                            Facebook</label>
                                        <input type="url" id="websiteFacebook"
                                            placeholder="https://facebook.com/firmaadi" />
                                    </div>
                                    <div class="form-group" style="margin-bottom: 0;">
                                        <label><i class="fa-brands fa-x-twitter" style="color: #000;"></i> Twitter /
                                            X</label>
                                        <input type="url" id="websiteTwitter" placeholder="https://x.com/firmaadi" />
                                    </div>
                                    <div class="form-group" style="margin-bottom: 0;">
                                        <label><i class="fa-brands fa-instagram" style="color: #e4405f;"></i>
                                            Instagram</label>
                                        <input type="url" id="websiteInstagram"
                                            placeholder="https://instagram.com/firmaadi" />
                                    </div>
                                    <div class="form-group" style="margin-bottom: 0;">
                                        <label><i class="fa-brands fa-linkedin" style="color: #0a66c2;"></i>
                                            LinkedIn</label>
                                        <input type="url" id="websiteLinkedin"
                                            placeholder="https://linkedin.com/company/firmaadi" />
                                    </div>
                                    <div class="form-group" style="margin-bottom: 0;">
                                        <label><i class="fa-brands fa-youtube" style="color: #ff0000;"></i>
                                            YouTube</label>
                                        <input type="url" id="websiteYoutube"
                                            placeholder="https://youtube.com/@firmaadi" />
                                    </div>
                                    <div class="form-group" style="margin-bottom: 0;">
                                        <label><i class="fa-brands fa-tiktok" style="color: #000;"></i> TikTok</label>
                                        <input type="url" id="websiteTiktok"
                                            placeholder="https://tiktok.com/@firmaadi" />
                                    </div>
                                </div>
                            </div>

                            <div class="form-group"
                                style="background: #f8fafc; padding: 1rem; border-radius: 8px; margin-top: 1rem;">
                                <label style="display: flex; align-items: center; gap: 10px; cursor: pointer;">
                                    <input type="checkbox" id="websitePublished"
                                        style="width: 20px; height: 20px; cursor: pointer;" />
                                    <span style="font-weight: 600; color: var(--primary);">Website'i Yayınla</span>
                                </label>
                                <small style="color: var(--secondary); display: block; margin-top: 5px;">Yayınlandığında
                                    siteniz herkese açık olacaktır.</small>
                            </div>


                            <button type="submit" class="btn btn-primary"
                                style="width: 100%; margin-top: 1.5rem; padding: 14px;">
                                <i class="fa-solid fa-save"></i> Ayarları Kaydet
                            </button>
                        </form>
                    </div>
                </div>

                <!-- Products Tab Content -->
                <div id="website-tab-products" class="website-tab-content" style="display:none;">
                    <div class="card">
                        <div
                            style="display:flex; justify-content:space-between; align-items:center; margin-bottom:2rem;">
                            <h2><i class="fa-solid fa-box" style="color: var(--primary);"></i> Ürünler</h2>
                            <button onclick="WebsiteManager.openProductModal()" class="btn btn-primary">
                                <i class="fa-solid fa-plus"></i> Yeni Ürün Ekle
                            </button>
                        </div>
                        <div id="websiteProductsGrid"
                            style="display: grid; grid-template-columns: repeat(auto-fill, minmax(280px, 1fr)); gap: 1.5rem;">
                            <div style="grid-column: 1/-1; text-align:center; color:var(--secondary); padding: 3rem;">
                                <i class="fa-solid fa-box"
                                    style="font-size: 3rem; opacity: 0.2; margin-bottom: 1rem;"></i>
                                <p>Henüz ürün eklenmemiş.</p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Services Tab Content -->
                <div id="website-tab-services" class="website-tab-content" style="display:none;">
                    <div class="card">
                        <div
                            style="display:flex; justify-content:space-between; align-items:center; margin-bottom:2rem;">
                            <h2><i class="fa-solid fa-briefcase" style="color: var(--primary);"></i> Hizmetler</h2>
                            <button onclick="WebsiteManager.openServiceModal()" class="btn btn-primary">
                                <i class="fa-solid fa-plus"></i> Yeni Hizmet Ekle
                            </button>
                        </div>
                        <div id="websiteServicesGrid"
                            style="display: grid; grid-template-columns: repeat(auto-fill, minmax(300px, 1fr)); gap: 1.5rem;">
                            <div style="grid-column: 1/-1; text-align:center; color:var(--secondary); padding: 3rem;">
                                <i class="fa-solid fa-briefcase"
                                    style="font-size: 3rem; opacity: 0.2; margin-bottom: 1rem;"></i>
                                <p>Henüz hizmet eklenmemiş.</p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Team Tab Content -->
                <div id="website-tab-team" class="website-tab-content" style="display:none;">
                    <div class="card">
                        <div
                            style="display:flex; justify-content:space-between; align-items:center; margin-bottom:2rem;">
                            <h2><i class="fa-solid fa-users" style="color: var(--primary);"></i> Ekip Üyeleri</h2>
                            <button onclick="WebsiteManager.openTeamModal()" class="btn btn-primary">
                                <i class="fa-solid fa-plus"></i> Yeni Üye Ekle
                            </button>
                        </div>
                        <div id="websiteTeamGrid"
                            style="display: grid; grid-template-columns: repeat(auto-fill, minmax(250px, 1fr)); gap: 1.5rem;">
                            <div style="grid-column: 1/-1; text-align:center; color:var(--secondary); padding: 3rem;">
                                <i class="fa-solid fa-users"
                                    style="font-size: 3rem; opacity: 0.2; margin-bottom: 1rem;"></i>
                                <p>Henüz ekip üyesi eklenmemiş.</p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Gallery Tab Content -->
                <div id="website-tab-gallery" class="website-tab-content" style="display:none;">
                    <div class="card">
                        <div
                            style="display:flex; justify-content:space-between; align-items:center; margin-bottom:2rem;">
                            <h2><i class="fa-solid fa-images" style="color: var(--primary);"></i> Galeri</h2>
                            <button onclick="WebsiteManager.openGalleryModal()" class="btn btn-primary">
                                <i class="fa-solid fa-plus"></i> Görsel Ekle
                            </button>
                        </div>
                        <div id="websiteGalleryGrid"
                            style="display: grid; grid-template-columns: repeat(auto-fill, minmax(200px, 1fr)); gap: 1rem;">
                            <div style="grid-column: 1/-1; text-align:center; color:var(--secondary); padding: 3rem;">
                                <i class="fa-solid fa-images"
                                    style="font-size: 3rem; opacity: 0.2; margin-bottom: 1rem;"></i>
                                <p>Henüz görsel eklenmemiş.</p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Pages Tab Content -->
                <div id="website-tab-pages" class="website-tab-content" style="display:none;">
                    <div class="card">
                        <div
                            style="display:flex; justify-content:space-between; align-items:center; margin-bottom:2rem;">
                            <h2><i class="fa-solid fa-file-lines" style="color: var(--primary);"></i> Sayfalar</h2>
                            <button onclick="WebsiteManager.openPageModal()" class="btn btn-primary">
                                <i class="fa-solid fa-plus"></i> Yeni Sayfa Ekle
                            </button>
                        </div>
                        <div class="table-responsive">
                            <table class="data-table">
                                <thead>
                                    <tr>
                                        <th>Sayfa Başlığı</th>
                                        <th>Slug</th>
                                        <th>Durum</th>
                                        <th>İşlemler</th>
                                    </tr>
                                </thead>
                                <tbody id="websitePagesList">
                                    <tr>
                                        <td colspan="4" style="text-align:center; color:var(--secondary);">Henüz sayfa
                                            eklenmemiş.
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>

                <!-- Messages Tab Content -->
                <div id="website-tab-messages" class="website-tab-content" style="display:none;">
                    <div class="card">
                        <div
                            style="display:flex; justify-content:space-between; align-items:center; margin-bottom:2rem;">
                            <h2><i class="fa-solid fa-envelope" style="color: var(--primary);"></i> Gelen Mesajlar</h2>
                            <button onclick="WebsiteManager.loadMessages()" class="btn"
                                style="background: var(--primary); color: white;">
                                <i class="fa-solid fa-refresh"></i> Yenile
                            </button>
                        </div>
                        <div class="table-responsive">
                            <table class="data-table">
                                <thead>
                                    <tr>
                                        <th>Gönderen</th>
                                        <th>E-posta</th>
                                        <th>Mesaj</th>
                                        <th>Tarih</th>
                                        <th>İşlemler</th>
                                    </tr>
                                </thead>
                                <tbody id="websiteMessagesList">
                                    <tr>
                                        <td colspan="5"
                                            style="text-align:center; color:var(--secondary);padding: 2rem;">Henüz mesaj
                                            yok.
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </section>
        </main>
    </div>

    <!-- Bulk Create Areas Modal -->
    <div id="bulkCreateModal" class="modal-overlay" style="display:none;">
        <div class="modal-content card" style="max-width: 550px;">
            <h2 style="margin-bottom:1.5rem;"><i class="fa-solid fa-layer-group" style="color: #8b5cf6;"></i> Toplu Alan
                Oluştur</h2>
            <p style="color: var(--secondary); font-size: 0.9rem; margin-bottom: 1.5rem;">
                Birden fazla alanı tek seferde oluşturun. Örn: h100 ile h150 arası 51 alan.
            </p>
            <form id="bulkCreateForm">
                <div style="display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 12px; margin-bottom: 1rem;">
                    <div class="form-group" style="margin-bottom: 0;">
                        <label style="font-size: 0.75rem;">Önek (prefix)</label>
                        <input type="text" id="bulkPrefix" required placeholder="Örn: H"
                            style="text-transform: uppercase;">
                    </div>
                    <div class="form-group" style="margin-bottom: 0;">
                        <label style="font-size: 0.75rem;">Başlangıç No</label>
                        <input type="number" id="bulkStartNo" required min="1" placeholder="100">
                    </div>
                    <div class="form-group" style="margin-bottom: 0;">
                        <label style="font-size: 0.75rem;">Bitiş No</label>
                        <input type="number" id="bulkEndNo" required min="1" placeholder="200">
                    </div>
                </div>

                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 12px; margin-bottom: 1rem;">
                    <div class="form-group" style="margin-bottom: 0;">
                        <label style="font-size: 0.75rem;">Alan Tipi</label>
                        <select id="bulkAlanTipi" required>
                            <option value="stand">Fuar Standı</option>
                            <option value="toplanti">Toplantı Odası</option>
                            <option value="masa">Coworking Masası</option>
                            <option value="kort">Spor Kortu/Saha</option>
                            <option value="loca">Stadyum Locası</option>
                        </select>
                    </div>
                    <div class="form-group" style="margin-bottom: 0;">
                        <label style="font-size: 0.75rem;">Büyüklük</label>
                        <input type="text" id="bulkBuyukluk" required placeholder="Örn: 18 m²">
                    </div>
                </div>

                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 12px; margin-bottom: 1rem;">
                    <div class="form-group" style="margin-bottom: 0;">
                        <label style="font-size: 0.75rem;">Fiyat (₺)</label>
                        <input type="number" id="bulkFiyat" required min="0" step="0.01" placeholder="0.00">
                    </div>
                    <div class="form-group" style="margin-bottom: 0;">
                        <label style="font-size: 0.75rem;">Durum</label>
                        <select id="bulkDurum" required>
                            <option value="bos">Müsait</option>
                            <option value="opsiyonda">Opsiyonda</option>
                            <option value="rezerve">Dolu</option>
                        </select>
                    </div>
                </div>

                <div id="bulkPreview"
                    style="background: #f8fafc; padding: 12px; border-radius: 8px; margin-bottom: 1rem; font-size: 0.85rem; color: var(--secondary);">
                    <i class="fa-solid fa-info-circle"></i> Oluşturulacak alan sayısı hesaplanacak...
                </div>

                <div style="display:flex; gap:1rem; margin-top:1.5rem;">
                    <button type="button" onclick="closeBulkCreateModal()" class="btn"
                        style="background:#f1f5f9; color:var(--dark);">İptal</button>
                    <button type="submit" class="btn" style="flex:1; background: #8b5cf6; color: white;">
                        <i class="fa-solid fa-layer-group"></i> Toplu Oluştur
                    </button>
                </div>
            </form>
        </div>
    </div>

    <!-- Add Employee Modal -->
    <div id="addEmployeeModal" class="modal-overlay" style="display:none;">
        <div class="modal-content card">
            <h2 style="margin-bottom:1.5rem;"><i class="fa-solid fa-user-plus" style="color: var(--primary);"></i> Yeni
                Çalışan Ekle</h2>
            <form id="addEmployeeForm">
                <div class="form-group">
                    <label>Ad Soyad</label>
                    <input type="text" id="newEmpName" required placeholder="Örn: Ahmet Yılmaz" />
                </div>
                <div class="form-group">
                    <label>Telefon</label>
                    <input type="tel" id="newEmpPhone" required placeholder="5XX XXX XX XX" />
                </div>
                <div class="form-group">
                    <label>Departman (Opsiyonel)</label>
                    <select id="newEmpDepartment">
                        <option value="">Departman Seçiniz</option>
                        <!-- Departments will be loaded dynamically -->
                    </select>
                </div>
                <div style="display:flex; gap:1rem; margin-top:1.5rem;">
                    <button type="button" onclick="closeAddEmployeeModal()" class="btn"
                        style="background:#f1f5f9; color:var(--dark);">İptal</button>
                    <button type="submit" class="btn btn-primary" style="flex:1;">Kaydet</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Edit Employee Modal -->
    <div id="editEmployeeModal" class="modal-overlay" style="display:none;">
        <div class="modal-content card">
            <h2 style="margin-bottom:1.5rem;"><i class="fa-solid fa-pen-to-square" style="color: var(--primary);"></i>
                Çalışan Düzenle</h2>
            <form id="editEmployeeForm">
                <input type="hidden" id="editEmpId" />
                <div class="form-group">
                    <label>Ad Soyad</label>
                    <input type="text" id="editEmpName" required placeholder="Örn: Ahmet Yılmaz" />
                </div>
                <div class="form-group">
                    <label>Telefon</label>
                    <input type="tel" id="editEmpPhone" required placeholder="5XX XXX XX XX" />
                </div>
                <div class="form-group">
                    <label>Departman (Opsiyonel)</label>
                    <select id="editEmpDepartment">
                        <option value="">Departman Seçiniz</option>
                        <!-- Departments will be loaded dynamically -->
                    </select>
                </div>
                <div style="display:flex; gap:1rem; margin-top:1.5rem;">
                    <button type="button" onclick="closeEditEmployeeModal()" class="btn"
                        style="background:#f1f5f9; color:var(--dark);">İptal</button>
                    <button type="submit" class="btn btn-primary" style="flex:1;">Güncelle</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Edit Task Modal -->
    <div id="editTaskModal" class="modal-overlay" style="display:none;">
        <div class="modal-content card">
            <h2 style="margin-bottom:1.5rem;"><i class="fa-solid fa-pen-to-square" style="color: var(--primary);"></i>
                Görev Düzenle</h2>
            <form id="editTaskForm">
                <input type="hidden" id="editTaskId" />
                <div class="form-group">
                    <label>Yapılacak İş <span style="color: red;">*</span></label>
                    <textarea id="editTaskDesc" required placeholder="Görev açıklaması..."
                        style="min-height:100px; resize:vertical;"></textarea>
                </div>
                <div class="form-group">
                    <label>Çalışan</label>
                    <select id="editTaskEmployee" required>
                        <option value="">Çalışan Seçin...</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>Müşteri (Opsiyonel)</label>
                    <select id="editTaskCustomer">
                        <option value="">Müşteri Seçin...</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>Termin Tarihi (Opsiyonel)</label>
                    <input type="date" id="editTaskDeadline" />
                </div>
                <div style="display:flex; gap:1rem; margin-top:1.5rem;">
                    <button type="button" onclick="closeEditTaskModal()" class="btn"
                        style="background:#f1f5f9; color:var(--dark);">İptal</button>
                    <button type="submit" class="btn btn-primary" style="flex:1;">Güncelle</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Add Customer Modal -->
    <div id="addCustomerModal" class="modal-overlay" style="display:none;">
        <div class="modal-content card">
            <h2 style="margin-bottom:1.5rem;"><i class="fa-solid fa-user-plus" style="color: var(--primary);"></i> Yeni
                Müşteri Kartı</h2>
            <form id="addCustomerForm">
                <div class="form-group">
                    <label>Ad Soyad <span style="color: red;">*</span></label>
                    <input type="text" id="newCustomerName" required placeholder="Örn: Ahmet Yılmaz" />
                </div>
                <div class="form-group">
                    <label>E-posta Adresi <span style="color: red;">*</span></label>
                    <input type="email" id="newCustomerEmail" required placeholder="ornek@email.com" />
                </div>
                <div class="form-group">
                    <label>Telefon Numara <span style="color: red;">*</span></label>
                    <input type="tel" id="newCustomerPhone" required placeholder="5XX XXX XX XX" />
                </div>
                <div class="form-group">
                    <label>Sektör / İş Alanı <span style="color: red;">*</span></label>
                    <input type="text" id="newCustomerSector" required placeholder="Örn: Teknoloji, Sağlık, Eğitim" />
                </div>
                <div class="form-group">
                    <label>Durum <span style="color: red;">*</span></label>
                    <select id="newCustomerStatus" required>
                        <option value="Aktif" selected>Aktif</option>
                        <option value="Potansiyel">Potansiyel</option>
                        <option value="Pasif">Pasif</option>
                    </select>
                </div>
                <div style="display:flex; gap:1rem; margin-top:1.5rem;">
                    <button type="button" onclick="closeAddCustomerModal()" class="btn"
                        style="background:#f1f5f9; color:var(--dark);">İptal</button>
                    <button type="submit" class="btn btn-primary" style="flex:1;">Kaydet</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Edit Customer Modal -->
    <div id="editCustomerModal" class="modal-overlay" style="display:none;">
        <div class="modal-content card">
            <h2 style="margin-bottom:1.5rem;"><i class="fa-solid fa-pen-to-square" style="color: var(--primary);"></i>
                Müşteri Düzenle</h2>
            <form id="editCustomerForm">
                <input type="hidden" id="editCustomerId" />
                <div class="form-group">
                    <label>Ad Soyad <span style="color: red;">*</span></label>
                    <input type="text" id="editCustomerName" required placeholder="Örn: Ahmet Yılmaz" />
                </div>
                <div class="form-group">
                    <label>E-posta Adresi <span style="color: red;">*</span></label>
                    <input type="email" id="editCustomerEmail" required placeholder="ornek@email.com" />
                </div>
                <div class="form-group">
                    <label>Telefon Numara <span style="color: red;">*</span></label>
                    <input type="tel" id="editCustomerPhone" required placeholder="5XX XXX XX XX" />
                </div>
                <div class="form-group">
                    <label>Sektör / İş Alanı <span style="color: red;">*</span></label>
                    <input type="text" id="editCustomerSector" required placeholder="Örn: Teknoloji, Sağlık, Eğitim" />
                </div>
                <div class="form-group">
                    <label>Durum <span style="color: red;">*</span></label>
                    <select id="editCustomerStatus" required>
                        <option value="Aktif">Aktif</option>
                        <option value="Potansiyel">Potansiyel</option>
                        <option value="Pasif">Pasif</option>
                    </select>
                </div>
                <div style="display:flex; gap:1rem; margin-top:1.5rem;">
                    <button type="button" onclick="closeEditCustomerModal()" class="btn"
                        style="background:#f1f5f9; color:var(--dark);">İptal</button>
                    <button type="submit" class="btn btn-primary" style="flex:1;">Güncelle</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Customer Tasks Modal -->
    <div id="customerTasksModal" class="modal-overlay" style="display:none;"
        onclick="if(event.target === this) closeCustomerTasksModal()">
        <div class="modal-content card" style="max-width: 700px; max-height: 85vh; overflow-y: auto;">
            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1.5rem;">
                <h2 style="margin: 0;">
                    <i class="fa-solid fa-list-check" style="color: var(--primary);"></i>
                    <span id="customerTasksModalTitle">Müşteri Görevleri</span>
                </h2>
                <button onclick="closeCustomerTasksModal()"
                    style="background: none; border: none; font-size: 1.5rem; cursor: pointer; color: var(--secondary); padding: 0; width: 32px; height: 32px; display: flex; align-items: center; justify-content: center;">
                    <i class="fa-solid fa-xmark"></i>
                </button>
            </div>

            <div id="customerTasksListContainer">
                <!-- Tasks will be rendered here -->
            </div>
        </div>
    </div>

    <!-- Reservation Detail Modal -->
    <div id="reservationDetailModal" class="modal-overlay" style="display:none;"
        onclick="if(event.target === this) closeReservationDetailModal()">
        <div class="modal-content card" style="max-width: 500px;">
            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1.5rem;">
                <h2 style="margin: 0;"><i class="fa-solid fa-circle-info" style="color: var(--primary);"></i> Alan
                    Detayları</h2>
                <button onclick="closeReservationDetailModal()"
                    style="background: none; border: none; font-size: 1.5rem; cursor: pointer; color: var(--secondary);">
                    <i class="fa-solid fa-xmark"></i>
                </button>
            </div>
            <div id="reservationDetailContent">
                <!-- Content will be populated by JS -->
            </div>
            <div style="margin-top: 1.5rem; display: flex; gap: 10px;">
                <button onclick="closeReservationDetailModal()" class="btn"
                    style="flex: 1; background: #f1f5f9; color: var(--dark);">Kapat</button>
                <button onclick="editFromDetailModal()" class="btn btn-primary" style="flex: 1;"><i
                        class="fa-solid fa-pen"></i> Düzenle</button>
            </div>
        </div>
    </div>

    <!-- Reservation Edit Modal -->
    <div id="reservationEditModal" class="modal-overlay" style="display:none;"
        onclick="if(event.target === this) closeReservationEditModal()">
        <div class="modal-content card" style="max-width: 600px; max-height: 90vh; overflow-y: auto;">
            <h2 style="margin-bottom: 1.5rem;"><i class="fa-solid fa-pen-to-square" style="color: var(--primary);"></i>
                Alan Düzenle</h2>
            <form id="reservationEditForm">
                <input type="hidden" id="modalEditReservationId">

                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 12px; margin-bottom: 1rem;">
                    <div class="form-group" style="margin-bottom: 0;">
                        <label style="font-size: 0.85rem;">Alan Kodu/Numarası</label>
                        <input type="text" id="modalAlanNo" required placeholder="Örn: F301">
                    </div>
                    <div class="form-group" style="margin-bottom: 0;">
                        <label style="font-size: 0.85rem;">Alan Tipi</label>
                        <select id="modalAlanTipi" required>
                            <option value="stand">Fuar Standı</option>
                            <option value="toplanti">Toplantı Odası</option>
                            <option value="masa">Coworking Masası</option>
                            <option value="kort">Spor Kortu/Saha</option>
                            <option value="loca">Stadyum Locası</option>
                        </select>
                    </div>
                </div>

                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 12px; margin-bottom: 1rem;">
                    <div class="form-group" style="margin-bottom: 0;">
                        <label style="font-size: 0.85rem;">Büyüklük / Kapasite</label>
                        <input type="text" id="modalAlanBuyukluk" required placeholder="Örn: 24 m²">
                    </div>
                    <div class="form-group" style="margin-bottom: 0;">
                        <label style="font-size: 0.85rem;">Fiyat (₺)</label>
                        <input type="number" id="modalFiyatMiktar" min="0" step="0.01" required placeholder="0.00">
                    </div>
                </div>

                <div class="form-group" style="margin-bottom: 1rem;">
                    <label style="font-size: 0.85rem;">Durum</label>
                    <select id="modalAlanDurum" required onchange="toggleModalReservationInfo()">
                        <option value="bos">Müsait</option>
                        <option value="opsiyonda">Opsiyonda</option>
                        <option value="rezerve">Dolu</option>
                    </select>
                </div>

                <div class="form-group" style="margin-bottom: 1rem;">
                    <label style="font-size: 0.85rem;">Açıklama (Opsiyonel)</label>
                    <input type="text" id="modalAlanAciklama" placeholder="Alan hakkında ek bilgiler...">
                </div>

                <!-- Reservation Info Section (shown when durum = rezerve) -->
                <div id="modalReservationInfoSection"
                    style="display: none; border-top: 2px solid var(--border); padding-top: 1rem; margin-top: 1rem;">
                    <h3 style="color: var(--primary); margin-bottom: 1rem; font-size: 1rem;">
                        <i class="fa-solid fa-building"></i> Rezervasyon Bilgileri
                    </h3>
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 12px;">
                        <div class="form-group" style="margin-bottom: 0;">
                            <label style="font-size: 0.85rem;">Firma Ünvanı</label>
                            <input type="text" id="modalReservedCompany" placeholder="Örn: ABC Ltd. Şti.">
                        </div>
                        <div class="form-group" style="margin-bottom: 0;">
                            <label style="font-size: 0.85rem;">Yetkili Ad Soyad</label>
                            <input type="text" id="modalReservedName" placeholder="Örn: Ahmet Yılmaz">
                        </div>
                        <div class="form-group" style="margin-bottom: 0;">
                            <label style="font-size: 0.85rem;">Telefon</label>
                            <input type="tel" id="modalReservedPhone" placeholder="(5XX) XXX XX XX">
                        </div>
                        <div class="form-group" style="margin-bottom: 0;">
                            <label style="font-size: 0.85rem;">E-posta</label>
                            <input type="email" id="modalReservedEmail" placeholder="ornek@firma.com">
                        </div>
                    </div>
                    <div class="form-group" style="margin-top: 12px; margin-bottom: 0;">
                        <label style="font-size: 0.85rem;">Özel İstekler / Notlar</label>
                        <textarea id="modalReservedNotes" rows="2" placeholder="Varsa özel istekler..."></textarea>
                    </div>
                </div>

                <div style="display: flex; gap: 1rem; margin-top: 1.5rem;">
                    <button type="button" onclick="closeReservationEditModal()" class="btn"
                        style="background: #f1f5f9; color: var(--dark);">İptal</button>
                    <button type="submit" class="btn btn-primary" style="flex: 1;"><i class="fa-solid fa-save"></i>
                        Kaydet</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Scripts -->
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <script src="supabase-config.js"></script>
    <script src="security.js"></script>
    <script src="auth.js"></script>

    <script src="app.js"></script>
    <!-- FullCalendar JS -->
    <script src='https://cdn.jsdelivr.net/npm/fullcalendar@6.1.10/index.global.min.js'></script>
    <script src='https://cdn.jsdelivr.net/npm/@fullcalendar/core@6.1.10/locales/tr.global.min.js'></script>
    <script src="appointments.js"></script>
    <script src="proposals.js"></script>
    <script src="dashboard-data.js"></script>
    <script src="website-manager.js"></script>

    <script>
        document.addEventListener('DOMContentLoaded', async () => {
            const user = await Auth.checkAuth();
            if (user) {
                document.getElementById('userNameDisplay').textContent = user.company_name || user.username;

                const badge = document.getElementById('trialBadge');
                if (user.is_premium) {
                    badge.style.background = '#dcfce7';
                    badge.style.color = '#166534';
                    badge.innerHTML = '<i class="fa-solid fa-crown"></i> Premium Üyelik';
                } else {
                    const daysLeft = Auth.getDaysLeft(user);
                    if (daysLeft < 0) {
                        badge.style.background = '#fee2e2'; badge.style.color = '#991b1b';
                        badge.innerHTML = '<i class="fa-solid fa-circle-exclamation"></i> Süre Doldu';
                    } else {
                        badge.innerHTML = `<i
        class="fa-regular fa-clock"></i> ${daysLeft} Gün Kaldı`;
                    }
                }
            }
        });
    </script>

    <!-- Slot Modal -->
    <div id="slotModal" class="modal-overlay" style="display:none;">
        <div class="modal-content card" style="max-height: 85vh; overflow-y: auto;">
            <h2 style="margin-bottom:1rem;">
                <i class="fa-solid fa-calendar-plus" style="color: var(--primary);"></i> Yeni Zaman Dilimi
            </h2>
            <form id="slotForm">
                <div class="form-group">
                    <label>Tarih</label>
                    <input type="date" id="slotDate" required />
                </div>
                <div class="form-group">
                    <label>Saat</label>
                    <input type="time" id="slotTime" required />
                </div>
                <div class="form-group">
                    <label>Süre (Dakika)</label>
                    <select id="slotDuration" required>
                        <option value="30">30 dakika</option>
                        <option value="60" selected>1 saat</option>
                        <option value="90">1.5 saat</option>
                        <option value="120">2 saat</option>
                    </select>
                </div>

                <div class="form-group"
                    style="background: #f0fdf4; padding: 12px; border-radius: 8px; border: 1px solid #bbf7d0;">
                    <label style="color: #166534;"><i class="fa-solid fa-users"></i> Kapasite (Opsiyonel)</label>
                    <input type="number" id="slotCapacity" min="2" max="100"
                        placeholder="Örn: 10 (boş bırakın = tek kişilik)" />
                    <small style="color: #166534; display: block; margin-top: 5px;">
                        <i class="fa-solid fa-info-circle"></i> Grup dersleri, seminerler veya toplu etkinlikler için
                        kapasite belirleyin.
                    </small>
                </div>

                <div class="form-group">
                    <label>Müşteri Seç (Opsiyonel)</label>
                    <select id="slotCustomerSelect">
                        <option value="">Müşteri Seçin...</option>
                        <!-- Will be populated from customers list -->
                    </select>
                    <div style="margin-top:8px; font-size:0.85rem; color:var(--secondary);">
                        Listede yok mu? <a href="#" onclick="switchView('customers')"
                            style="color:var(--primary); font-weight:600;">Yeni Müşteri Ekle</a>
                    </div>
                </div>

                <div style="border-top: 1px solid #e5e7eb; margin: 1rem 0; padding-top: 1rem;">
                    <h3 style="font-size: 0.95rem; margin-bottom: 0.5rem; color: var(--primary);">
                        <i class="fa-solid fa-user-pen"></i> Doğrudan Randevu (Opsiyonel)
                    </h3>
                    <p style="font-size: 0.8rem; color: var(--secondary); margin-bottom: 1rem;">
                        Eğer boş bırakırsanız "Müsait" olarak açılır. Doldurursanız direkt randevu oluşturulur.
                    </p>
                    <div class="form-group">
                        <label>Müşteri Adı Soyadı</label>
                        <input type="text" id="slotCustomerName" placeholder="Örn: Ayşe Demir" />
                    </div>
                    <div class="form-group">
                        <label>Müşteri Telefon</label>
                        <input type="tel" id="slotCustomerPhone" placeholder="Örn: 5XX XXX XX XX" />
                    </div>
                </div>

                <div style="display:flex; gap:1rem; margin-top:1rem;">
                    <button type="button" onclick="closeSlotModal()" class="btn"
                        style="background:#f1f5f9; color:var(--dark);">İptal</button>
                    <button type="submit" class="btn btn-primary" style="flex:1;">Ekle</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Proposal Modal -->
    <div id="proposalModal" class="modal-overlay" style="display:none;">
        <div class="modal-content card" style="max-width: 600px; width: 95%; max-height: 85vh; overflow-y: auto;">
            <h2 style="margin-bottom:1.5rem; color: #0ea5e9; display: flex; align-items: center; gap: 10px;">
                <i class="fa-solid fa-file-signature"></i> Fiyat Teklifi Oluştur
            </h2>
            <form id="proposalForm">
                <div class="form-group">
                    <label style="font-weight: 600; color: #334155;">Müşteri Adı / Firma:</label>
                    <input type="text" id="propCustomerName" required placeholder="Örn: Mehmet Demir"
                        style="border: 1px solid #cbd5e1; padding: 10px; border-radius: 6px; width: 100%;" />
                </div>
                <div class="form-group">
                    <label style="font-weight: 600; color: #334155;">Müşteri WhatsApp Numarası (Opsiyonel):</label>
                    <input type="tel" id="propCustomerPhone" placeholder="5XX XXX XX XX"
                        style="border: 1px solid #cbd5e1; padding: 10px; border-radius: 6px; width: 100%;" />
                </div>

                <div class="form-group">
                    <label style="font-weight: 600; color: #334155;">Teklif Başlığı:</label>
                    <input type="text" id="propTitle" required placeholder="Örn: Web Sitesi Tasarımı"
                        style="border: 1px solid #cbd5e1; padding: 10px; border-radius: 6px; width: 100%;" />
                </div>

                <div style="margin-top: 20px;">
                    <h3 style="font-size: 1.1rem; font-weight: 600; color: #334155; margin-bottom: 10px;">Ürün/Hizmet
                        Kalemleri</h3>

                    <div id="proposalItemsContainer" style="display: flex; flex-direction: column; gap: 10px;">
                        <!-- Dynamic Items will be added here -->
                    </div>

                    <button type="button" onclick="Proposals.addItem()" class="btn"
                        style="background: #22c55e; color: white; margin-top: 10px; display: inline-flex; align-items: center; gap: 5px;">
                        <i class="fa-solid fa-plus"></i> Yeni Kalem Ekle
                    </button>
                </div>

                <div class="form-group" style="margin-top: 20px;">
                    <label style="font-weight: 600; color: #334155;">Ek Notlar:</label>
                    <textarea id="propDetails" rows="3" placeholder="Teklif detaylarını buraya yazın..."
                        style="border: 1px solid #cbd5e1; padding: 10px; border-radius: 6px; width: 100%;"></textarea>
                </div>

                <div style="text-align: right; margin-top: 20px; font-size: 1.2rem; font-weight: 700; color: #0ea5e9;">
                    Toplam Tutar: <span id="propTotalAmount">₺0.00</span>
                </div>

                <div style="display:flex; gap:1rem; margin-top:1.5rem;">
                    <button type="button" onclick="closeProposalModal()" class="btn"
                        style="background:#f1f5f9; color:var(--dark);">İptal</button>
                    <button type="submit" class="btn btn-primary" style="flex:1;">Teklifi Kaydet</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Firma Ekleme Modal -->
    <div id="firmaModal" class="modal-overlay" style="display:none;">
        <div class="modal-content card">
            <h2 style="margin-bottom:1.5rem;"><i class="fa-solid fa-building" style="color: var(--primary);"></i> Firma
                Bilgileri Ekle</h2>
            <form id="firmaModalForm" onsubmit="saveFirmaToReservation(event)">
                <input type="hidden" id="firmaModalReservationId">

                <div class="form-group">
                    <label>Firma Ünvanı *</label>
                    <input type="text" id="modalFirmaName" required placeholder="Örn: ABC Tekstil Ltd. Şti.">
                </div>

                <div class="form-group">
                    <label>Yetkili Ad Soyad</label>
                    <input type="text" id="modalYetkili" placeholder="Örn: Ahmet Yılmaz">
                </div>

                <div class="form-group">
                    <label>Telefon</label>
                    <input type="tel" id="modalTelefon" placeholder="5XX XXX XX XX">
                </div>

                <div class="form-group">
                    <label>E-posta</label>
                    <input type="email" id="modalEmail" placeholder="ornek@firma.com">
                </div>

                <div class="form-group">
                    <label>Özel İstekler / Notlar</label>
                    <textarea id="modalNotes" rows="3" placeholder="Varsa özel istekler veya notlar..."></textarea>
                </div>

                <div style="display:flex; gap:1rem; margin-top:1.5rem;">
                    <button type="button" onclick="closeFirmaModal()" class="btn"
                        style="background:#f1f5f9; color:var(--dark);">İptal</button>
                    <button type="submit" class="btn btn-primary" style="flex:1;">Kaydet ve Rezerve Et</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Website Product Modal -->
    <div id="productModal" class="modal-overlay" style="display:none;">
        <div class="modal-content card" style="max-width: 500px; max-height: 90vh; overflow-y: auto;">
            <h2 id="productModalTitle" style="margin-bottom: 1.5rem;"><i class="fa-solid fa-box"
                    style="color: var(--primary);"></i> Ürün Ekle</h2>
            <form id="productForm">
                <input type="hidden" id="productId">
                <div class="form-group">
                    <label>Ürün Adı <span style="color: red;">*</span></label>
                    <input type="text" id="productName" required placeholder="Örn: Premium Paket">
                </div>
                <div class="form-group">
                    <label>Kategori</label>
                    <input type="text" id="productCategory" placeholder="Örn: Yazılım">
                </div>
                <div class="form-group">
                    <label>Fiyat (₺)</label>
                    <input type="number" id="productPrice" step="0.01" placeholder="0.00">
                </div>
                <div class="form-group">
                    <label>Ürün Görseli</label>
                    <div style="display: flex; gap: 10px; align-items: center;">
                        <input type="file" id="productImageFile" accept="image/*"
                            onchange="WebsiteManager.uploadProductImage(this)" style="display: none;" />
                        <input type="text" id="productImage" placeholder="Görsel yükleyin" readonly
                            style="flex: 1; background: #f8fafc;" />
                        <button type="button" onclick="document.getElementById('productImageFile').click()" class="btn"
                            style="background: var(--primary); color: white; white-space: nowrap;">
                            <i class="fa-solid fa-upload"></i> Yükle
                        </button>
                    </div>
                    <div id="productImagePreview" style="margin-top: 10px; display: none;">
                        <img id="productImagePreviewImg" src="" alt="Ürün"
                            style="max-width: 100%; max-height: 100px; border-radius: 8px; border: 1px solid var(--border);">
                    </div>
                </div>
                <div class="form-group">
                    <label>Açıklama</label>
                    <textarea id="productDescription" rows="3" placeholder="Ürün hakkında kısa açıklama..."></textarea>
                </div>
                <div class="form-group" style="background: #f8fafc; padding: 0.75rem; border-radius: 8px;">
                    <label style="display: flex; align-items: center; gap: 8px; cursor: pointer; margin: 0;">
                        <input type="checkbox" id="productActive" style="width: 18px; height: 18px;" checked>
                        <span>Aktif (Sitede göster)</span>
                    </label>
                </div>
                <div style="display:flex; gap:10px; justify-content:flex-end; margin-top:1.5rem;">
                    <button type="button" onclick="document.getElementById('productModal').style.display='none'"
                        class="btn" style="background:#f1f5f9; color:#333;">İptal</button>
                    <button type="submit" class="btn btn-primary">Kaydet</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Website Service Modal -->
    <div id="serviceModal" class="modal-overlay" style="display:none;">
        <div class="modal-content card" style="max-width: 500px; max-height: 90vh; overflow-y: auto;">
            <h2 id="serviceModalTitle" style="margin-bottom: 1.5rem;"><i class="fa-solid fa-briefcase"
                    style="color: var(--primary);"></i> Hizmet Ekle</h2>
            <form id="serviceForm">
                <input type="hidden" id="serviceId">
                <div class="form-group">
                    <label>Hizmet Adı <span style="color: red;">*</span></label>
                    <input type="text" id="serviceName" required placeholder="Örn: Web Geliştirme">
                </div>
                <div class="form-group">
                    <label>İkon (FontAwesome sınıfı)</label>
                    <input type="text" id="serviceIcon" placeholder="fa-solid fa-code">
                    <small style="color:var(--secondary);">Örn: fa-solid fa-code, fa-solid fa-paint-brush, fa-solid
                        fa-mobile</small>
                </div>
                <div class="form-group">
                    <label>Açıklama</label>
                    <textarea id="serviceDescription" rows="3"
                        placeholder="Hizmet hakkında kısa açıklama..."></textarea>
                </div>
                <div class="form-group" style="background: #f8fafc; padding: 0.75rem; border-radius: 8px;">
                    <label style="display: flex; align-items: center; gap: 8px; cursor: pointer; margin: 0;">
                        <input type="checkbox" id="serviceActive" style="width: 18px; height: 18px;" checked>
                        <span>Aktif (Sitede göster)</span>
                    </label>
                </div>
                <div style="display:flex; gap:10px; justify-content:flex-end; margin-top:1.5rem;">
                    <button type="button" onclick="document.getElementById('serviceModal').style.display='none'"
                        class="btn" style="background:#f1f5f9; color:#333;">İptal</button>
                    <button type="submit" class="btn btn-primary">Kaydet</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Website Team Modal -->
    <div id="teamModal" class="modal-overlay" style="display:none;">
        <div class="modal-content card" style="max-width: 500px; max-height: 90vh; overflow-y: auto;">
            <h2 id="teamModalTitle" style="margin-bottom: 1.5rem;"><i class="fa-solid fa-user-plus"
                    style="color: var(--primary);"></i> Ekip Üyesi Ekle</h2>
            <form id="teamForm">
                <input type="hidden" id="teamId">
                <div class="form-group">
                    <label>Ad Soyad <span style="color: red;">*</span></label>
                    <input type="text" id="teamName" required placeholder="Örn: Ahmet Yılmaz">
                </div>
                <div class="form-group">
                    <label>Pozisyon / Ünvan <span style="color: red;">*</span></label>
                    <input type="text" id="teamPosition" required placeholder="Örn: Yazılım Geliştirici">
                </div>
                <div class="form-group">
                    <label>Fotoğraf</label>
                    <div style="display: flex; gap: 10px; align-items: center;">
                        <input type="file" id="teamPhotoFile" accept="image/*"
                            onchange="WebsiteManager.uploadTeamPhoto(this)" style="display: none;" />
                        <input type="text" id="teamPhoto" placeholder="Fotoğraf yükleyin" readonly
                            style="flex: 1; background: #f8fafc;" />
                        <button type="button" onclick="document.getElementById('teamPhotoFile').click()" class="btn"
                            style="background: var(--primary); color: white; white-space: nowrap;">
                            <i class="fa-solid fa-upload"></i> Yükle
                        </button>
                    </div>
                    <div id="teamPhotoPreview" style="margin-top: 10px; display: none;">
                        <img id="teamPhotoPreviewImg" src="" alt="Ekip"
                            style="max-width: 80px; max-height: 80px; border-radius: 50%; border: 2px solid var(--border);">
                    </div>
                </div>
                <div class="form-group">
                    <label>Biyografi</label>
                    <textarea id="teamBio" rows="3" placeholder="Ekip üyesi hakkında kısa bilgi..."></textarea>
                </div>
                <div class="form-group">
                    <label>Sıralama</label>
                    <input type="number" id="teamOrder" value="0" min="0">
                    <small style="color:var(--secondary);">Düşük sayı önce görünür</small>
                </div>
                <div style="display:flex; gap:10px; justify-content:flex-end; margin-top:1.5rem;">
                    <button type="button" onclick="document.getElementById('teamModal').style.display='none'"
                        class="btn" style="background:#f1f5f9; color:#333;">İptal</button>
                    <button type="submit" class="btn btn-primary">Kaydet</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Website Gallery Modal -->
    <div id="galleryModal" class="modal-overlay" style="display:none;">
        <div class="modal-content card" style="max-width: 500px;">
            <h2 style="margin-bottom: 1.5rem;"><i class="fa-solid fa-image" style="color: var(--primary);"></i> Galeriye
                Görsel Ekle</h2>
            <form id="galleryForm">
                <div class="form-group">
                    <label>Görsel <span style="color: red;">*</span></label>
                    <div style="display: flex; gap: 10px; align-items: center;">
                        <input type="file" id="galleryImageFile" accept="image/*"
                            onchange="WebsiteManager.uploadGalleryImage(this)" style="display: none;" />
                        <input type="text" id="galleryImage" placeholder="Görsel yükleyin" readonly required
                            style="flex: 1; background: #f8fafc;" />
                        <button type="button" onclick="document.getElementById('galleryImageFile').click()" class="btn"
                            style="background: var(--primary); color: white; white-space: nowrap;">
                            <i class="fa-solid fa-upload"></i> Yükle
                        </button>
                    </div>
                    <div id="galleryImagePreview" style="margin-top: 10px; display: none;">
                        <img id="galleryImagePreviewImg" src="" alt="Galeri"
                            style="max-width: 100%; max-height: 150px; border-radius: 8px; border: 1px solid var(--border);">
                    </div>
                </div>
                <div class="form-group">
                    <label>Başlık (Opsiyonel)</label>
                    <input type="text" id="galleryTitle" placeholder="Görsel başlığı">
                </div>
                <div class="form-group">
                    <label>Kategori <span style="color: red;">*</span></label>
                    <input type="text" id="galleryCategory" required placeholder="Örn: Araçlar, Projeler, Ofis"
                        list="galleryCategoryList">
                    <datalist id="galleryCategoryList">
                        <option value="Genel">
                        <option value="Araçlar">
                        <option value="Projeler">
                        <option value="Ürünler">
                        <option value="Ofis">
                        <option value="Etkinlikler">
                    </datalist>
                    <small style="color: var(--secondary);">Aynı kategorideki görseller gruplanarak gösterilir</small>
                </div>
                <div class="form-group">
                    <label>Sıralama</label>
                    <input type="number" id="galleryOrder" value="0" min="0">
                </div>
                <div style="display:flex; gap:10px; justify-content:flex-end; margin-top:1.5rem;">
                    <button type="button" onclick="document.getElementById('galleryModal').style.display='none'"
                        class="btn" style="background:#f1f5f9; color:#333;">İptal</button>
                    <button type="submit" class="btn btn-primary">Ekle</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Website Page Modal -->
    <div id="pageModal" class="modal-overlay" style="display:none;">
        <div class="modal-content card" style="max-width: 800px; width: 95%;">
            <h2 id="pageModalTitle" style="margin-bottom: 1.5rem;"><i class="fa-solid fa-file-lines"
                    style="color: var(--primary);"></i> Sayfa Ekle</h2>
            <form id="pageForm">
                <input type="hidden" id="pageId">
                <div class="form-group">
                    <label>Sayfa Başlığı <span style="color: red;">*</span></label>
                    <input type="text" id="websitePageTitle" required placeholder="Örn: Hakkımızda">
                </div>
                <div class="form-group">
                    <label>Slug (URL Kısmı) <span style="color: red;">*</span></label>
                    <input type="text" id="pageSlug" required pattern="[a-z0-9-]+" placeholder="hakkimizda">
                    <small style="color:var(--secondary);">Sadece küçük harf, rakam ve tire. Örn: hakkimizda,
                        iletisim</small>
                </div>
                <div class="form-group">
                    <label>İçerik</label>
                    <textarea id="pageContent" rows="12" style="font-size: 0.95rem;"
                        placeholder="Sayfa içeriğinizi buraya yazın..."></textarea>
                </div>
                <div class="form-group" style="background: #f8fafc; padding: 0.75rem; border-radius: 8px;">
                    <label style="display: flex; align-items: center; gap: 8px; cursor: pointer; margin: 0;">
                        <input type="checkbox" id="pagePublished" style="width: 18px; height: 18px;" checked>
                        <span>Yayında</span>
                    </label>
                </div>
                <div style="display:flex; gap:10px; justify-content:flex-end; margin-top:1.5rem;">
                    <button type="button" onclick="document.getElementById('pageModal').style.display='none'"
                        class="btn" style="background:#f1f5f9; color:#333;">İptal</button>
                    <button type="submit" class="btn btn-primary">Kaydet</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Randevu Red Modal -->
    <div id="rejectReasonModal" class="modal-overlay" style="display:none;">
        <div class="modal-content card" style="max-width: 450px;">
            <h2 style="margin-bottom:1rem; color: #ef4444;">
                <i class="fa-solid fa-ban"></i> Randevu Reddi
            </h2>
            <form id="rejectReasonForm">
                <input type="hidden" id="rejectSlotId">
                <div style="background: #fef2f2; padding: 12px; border-radius: 8px; margin-bottom: 1rem;">
                    <p style="margin: 0; color: #991b1b; font-size: 0.9rem;">
                        <i class="fa-solid fa-exclamation-triangle"></i>
                        Bu randevuyu reddettiğinizde slot tekrar "müsait" hale gelecektir.
                    </p>
                </div>
                <div class="form-group">
                    <label>Red Sebebi (Opsiyonel)</label>
                    <textarea id="rejectReason" rows="3" placeholder="Müşteriye iletilecek red sebebi..."></textarea>
                </div>
                <div style="display:flex; gap:1rem; margin-top:1rem;">
                    <button type="button" onclick="closeRejectModal()" class="btn"
                        style="background:#f1f5f9; color:var(--dark);">İptal</button>
                    <button type="submit" class="btn" style="flex:1; background: #ef4444; color: white;">
                        <i class="fa-solid fa-ban"></i> Reddet
                    </button>
                </div>
            </form>
        </div>
    </div>

    <script src="subscription-warning.js"></script>

    <!-- PWA Service Worker Registration -->
    <script>
        // Register Service Worker for PWA
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('/sw.js')
                    .then((registration) => {
                        console.log('✅ Service Worker registered:', registration.scope);
                    })
                    .catch((error) => {
                        console.log('❌ Service Worker registration failed:', error);
                    });
            });
        }
    </script>
</body>

</html>